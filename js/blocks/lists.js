/**
 * @license
 * Copyright 2012 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Constants.Lists"),goog.require("Blockly"),goog.require("Blockly.Blocks"),goog.require("Blockly.FieldDropdown"),goog.require("Blockly.FieldLabel"),goog.require("Blockly.Mutator"),goog.require("Blockly.PXTBlockly.Extensions"),Blockly.Constants.Lists.HUE=260,Blockly.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Blockly.Blocks.lists_create_with={init:function(){Blockly.Extensions.apply("inline-svgs",this,!1),this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.horizontalAfter_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),this.horizontalAfter_&&t.setAttribute("horizontalafter",this.horizontalAfter_),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10);var e=t.getAttribute("horizontalafter");e&&(this.horizontalAfter_=parseInt(e,10)),this.updateShape_()},storeConnections_:function(){this.valueConnections_=[];for(var t=0;t<this.itemCount_;t++)this.valueConnections_.push(this.getInput("ADD"+t).connection.targetConnection)},restoreConnections_:function(){for(var t=0;t<this.itemCount_;t++)Blockly.Mutator.reconnect(this.valueConnections_[t],this,"ADD"+t)},addItem_:function(){this.storeConnections_();if(this.update_(function(){this.itemCount_++}),this.restoreConnections_(),this.itemCount_>1){var t=this.getInput("ADD0");if(t&&t.connection.targetConnection){var e=this.getInput("ADD"+(this.itemCount_-1)),T=t.connection.getShadowDom(),l=T&&T.getAttribute("type");if(l){for(var s=h("shadow",l),_=r(T,"value"),o=0;o<_.length;o++){L(s,(u=_[o]).getAttribute("name"),p=(a=r(u,"shadow")[0])&&a.getAttribute("type"))}e.connection.setShadowDom(s)}var i=t.connection.targetConnection,n=i&&i.getSourceBlock(),I=n&&n.type;if(I&&I!==l){var S=h("block",I);if(n)if(I===Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE){var E=goog.dom.createDom("mutation");E.setAttribute("name",n.getName()),S.appendChild(E)}else if(n.inputList)for(o=0;o<n.inputList.length;o++){var u,a,p=(a=(u=n.inputList[o]).connection&&u.connection.getShadowDom())&&a.getAttribute("type");L(S,u.name,p)}var c=Blockly.Xml.domToBlock(S,this.workspace);e.connection.connect(c.outputConnection)}else e.connection.respawnShadow_()}}function r(t,e){var T=[];if(!t||!t.children)return T;for(var l=0;l<t.children.length;l++){var s=t.children[l];s.tagName===e&&T.push(s)}return T}function L(t,e,T){if(e&&T){var l=Blockly.utils.xml.createElement("value");l.setAttribute("name",e),l.appendChild(h("shadow",T)),t.appendChild(l)}}function h(t,e){var T=Blockly.utils.xml.createElement(t);return T.setAttribute("type",e),T.setAttribute("id",Blockly.utils.genUid()),T}},removeItem_:function(){this.storeConnections_();this.update_(function(){this.itemCount_--}),this.restoreConnections_()},update_:function(t){Blockly.Events.setGroup(!0);var e=this,T=e.mutationToDom(),l=T&&Blockly.Xml.domToText(T),s=e.rendered;e.rendered=!1,t&&t.call(this),this.updateShape_(),e.rendered=s,e.initSvg();var _=Blockly.Events.getGroup(),o=e.mutationToDom(),i=o&&Blockly.Xml.domToText(o);l!=i&&(Blockly.Events.fire(new Blockly.Events.BlockChange(e,"mutation",null,l,i)),setTimeout(function(){Blockly.Events.setGroup(_),e.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),e.rendered&&e.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){var t=this;this.itemCount_?(this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)):(this.getInput("TITLE")&&this.removeInput("TITLE"),this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE));var e=0;for(e=0;e<this.itemCount_;e++)this.getInput("ADD"+e)||this.appendValueInput("ADD"+e);for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS");var T=this.appendDummyInput("BUTTONS");this.itemCount_>0&&T.appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",function(){t.removeItem_()},!1)),T.appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",function(){t.addItem_()},!1));var l=this.itemCount_<=this.horizontalAfter_;this.setInputsInline(l),this.setOutputShape(l?Blockly.OUTPUT_SHAPE_ROUND:Blockly.OUTPUT_SHAPE_SQUARE)}},Blockly.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_indexOf={init:function(){var t=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(t),"END"),this.setInputsInline(!0);var e=this;this.setTooltip(function(){return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")})}},Blockly.Blocks.lists_getIndex={init:function(){var t=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);var e=new Blockly.FieldDropdown(t,function(t){var e="REMOVE"==t;this.getSourceBlock().updateStatement_(e)});this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var T=this;this.setTooltip(function(){var t=T.getFieldValue("MODE"),e=T.getFieldValue("WHERE"),l="";switch(t+" "+e){case"GET FROM_START":case"GET FROM_END":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":l=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}"FROM_START"!=e&&"FROM_END"!=e||(l+="  "+("FROM_START"==e?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",T.workspace.options.oneBasedIndex?"#1":"#0"));return l})},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e=!this.outputConnection;t.setAttribute("statement",e);var T=this.getInput("AT").type==Blockly.INPUT_VALUE;return t.setAttribute("at",T),t},domToMutation:function(t){var e="true"==t.getAttribute("statement");this.updateStatement_(e);var T="false"!=t.getAttribute("at");this.updateAt_(T)},updateStatement_:function(t){t!=!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var T="FROM_START"==e||"FROM_END"==e;if(T!=t){var l=this.getSourceBlock();return l.updateAt_(T),l.setFieldValue(e,"WHERE"),null}});this.getInput("AT").appendField(e,"WHERE"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_setIndex={init:function(){var t=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"],[Blockly.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Blockly.FieldDropdown(t),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var e=this;this.setTooltip(function(){var t=e.getFieldValue("MODE"),T=e.getFieldValue("WHERE"),l="";switch(t+" "+T){case"SET FROM_START":case"SET FROM_END":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":l=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=T&&"FROM_END"!=T||(l+="  "+Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),l})},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e=this.getInput("AT").type==Blockly.INPUT_VALUE;return t.setAttribute("at",e),t},domToMutation:function(t){var e="false"!=t.getAttribute("at");this.updateAt_(e)},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var T="FROM_START"==e||"FROM_END"==e;if(T!=t){var l=this.getSourceBlock();return l.updateAt_(T),l.setFieldValue(e,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(e,"WHERE")}},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation"),e=this.getInput("AT1").type==Blockly.INPUT_VALUE;t.setAttribute("at1",e);var T=this.getInput("AT2").type==Blockly.INPUT_VALUE;return t.setAttribute("at2",T),t},domToMutation:function(t){var e="true"==t.getAttribute("at1"),T="true"==t.getAttribute("at2");this.updateAt_(1,e),this.updateAt_(2,T)},updateAt_:function(t,e){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),e?(this.appendValueInput("AT"+t).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t);var T=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+t],function(T){var l="FROM_START"==T||"FROM_END"==T;if(l!=e){var s=this.getSourceBlock();return s.updateAt_(t,l),s.setFieldValue(T,"WHERE"+t),null}});this.getInput("AT"+t).appendField(T,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_sort={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:Blockly.Msg.LISTS_SORT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_SORT_HELPURL})}},Blockly.Blocks.lists_split={init:function(){var t=this,e=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(e){t.updateType_(e)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){var e=t.getFieldValue("MODE");if("SPLIT"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)})},updateType_:function(t){if(this.getFieldValue("MODE")!=t){var e=this.getInput("INPUT").connection;e.setShadowDom(null);var T=e.targetBlock();T&&(e.disconnect(),T.isShadow()?T.dispose():this.bumpNeighbours())}"SPLIT"==t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var t=Blockly.utils.xml.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))}};