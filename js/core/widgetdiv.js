/**
 * @license
 * Copyright 2013 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.WidgetDiv"),goog.require("Blockly.utils.dom"),goog.requireType("Blockly.utils.Rect"),goog.requireType("Blockly.utils.Size"),goog.requireType("Blockly.WorkspaceSvg"),Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.rendererClassName_="",Blockly.WidgetDiv.themeClassName_="",Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=document.createElement("div"),Blockly.WidgetDiv.DIV.className="blocklyWidgetDiv",(Blockly.parentContainer||document.body).appendChild(Blockly.WidgetDiv.DIV))},Blockly.WidgetDiv.show=function(e,l,i){Blockly.WidgetDiv.hide(),Blockly.WidgetDiv.owner_=e,Blockly.WidgetDiv.dispose_=i;var t=Blockly.WidgetDiv.DIV;t.style.direction=l?"rtl":"ltr",t.style.display="block";var o=Blockly.getMainWorkspace();Blockly.WidgetDiv.rendererClassName_=o.getRenderer().getClassName(),Blockly.WidgetDiv.themeClassName_=o.getTheme().getClassName(),Blockly.utils.dom.addClass(t,Blockly.WidgetDiv.rendererClassName_),Blockly.utils.dom.addClass(t,Blockly.WidgetDiv.themeClassName_)},Blockly.WidgetDiv.repositionForWindowResize=function(){if(Blockly.WidgetDiv.owner_&&Blockly.WidgetDiv.owner_.getScaledBBox&&Blockly.WidgetDiv.isDisplayed()){var e=Blockly.WidgetDiv.owner_.getScaledBBox();Blockly.WidgetDiv.DIV.style.left=e.left+"px",Blockly.WidgetDiv.DIV.style.top=e.top+"px"}else Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.hide=function(){if(Blockly.WidgetDiv.isVisible()){Blockly.WidgetDiv.owner_=null;var e=Blockly.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_(),Blockly.WidgetDiv.dispose_=null,e.textContent="",Blockly.WidgetDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.WidgetDiv.rendererClassName_),Blockly.WidgetDiv.rendererClassName_=""),Blockly.WidgetDiv.themeClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.WidgetDiv.themeClassName_),Blockly.WidgetDiv.themeClassName_=""),Blockly.getMainWorkspace().markFocused()}},Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_},Blockly.WidgetDiv.isDisplayed=function(){return"none"!=Blockly.WidgetDiv.DIV.style.display},Blockly.WidgetDiv.hideIfOwner=function(e){Blockly.WidgetDiv.owner_==e&&Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.positionInternal_=function(e,l,i){Blockly.WidgetDiv.DIV.style.left=e+"px",Blockly.WidgetDiv.DIV.style.top=l+"px",Blockly.WidgetDiv.DIV.style.height=i+"px"},Blockly.WidgetDiv.positionWithAnchor=function(e,l,i,t){var o=Blockly.WidgetDiv.calculateY_(e,l,i),c=Blockly.WidgetDiv.calculateX_(e,l,i,t);o<0?Blockly.WidgetDiv.positionInternal_(c,0,i.height+o):Blockly.WidgetDiv.positionInternal_(c,o,i.height)},Blockly.WidgetDiv.calculateX_=function(e,l,i,t){if(t){var o=l.right-i.width,c=Math.max(o,e.left);return Math.min(c,e.right-i.width)}c=Math.min(l.left,e.right-i.width);return Math.max(c,e.left)},Blockly.WidgetDiv.calculateY_=function(e,l,i){return l.bottom+i.height>=e.bottom?l.top-i.height:l.bottom};