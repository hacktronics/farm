/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.BasicCursor"),goog.require("Blockly.ASTNode"),goog.require("Blockly.Cursor"),goog.require("Blockly.registry"),Blockly.BasicCursor=function(){Blockly.BasicCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.BasicCursor,Blockly.Cursor),Blockly.BasicCursor.registrationName="basicCursor",Blockly.BasicCursor.prototype.next=function(){var r=this.getCurNode();if(!r)return null;var o=this.getNextNode_(r,this.validNode_);return o&&this.setCurNode(o),o},Blockly.BasicCursor.prototype.in=function(){return this.next()},Blockly.BasicCursor.prototype.prev=function(){var r=this.getCurNode();if(!r)return null;var o=this.getPreviousNode_(r,this.validNode_);return o&&this.setCurNode(o),o},Blockly.BasicCursor.prototype.out=function(){return this.prev()},Blockly.BasicCursor.prototype.getNextNode_=function(r,o){if(!r)return null;var t=r.in()||r.next();if(o(t))return t;if(t)return this.getNextNode_(t,o);var e=this.findSiblingOrParent_(r.out());return o(e)?e:e?this.getNextNode_(e,o):null},Blockly.BasicCursor.prototype.getPreviousNode_=function(r,o){if(!r)return null;var t=r.prev();return o(t=t?this.getRightMostChild_(t):r.out())?t:t?this.getPreviousNode_(t,o):null},Blockly.BasicCursor.prototype.validNode_=function(r){var o=!1,t=r&&r.getType();return t!=Blockly.ASTNode.types.OUTPUT&&t!=Blockly.ASTNode.types.INPUT&&t!=Blockly.ASTNode.types.FIELD&&t!=Blockly.ASTNode.types.NEXT&&t!=Blockly.ASTNode.types.PREVIOUS&&t!=Blockly.ASTNode.types.WORKSPACE||(o=!0),o},Blockly.BasicCursor.prototype.findSiblingOrParent_=function(r){if(!r)return null;var o=r.next();return o||this.findSiblingOrParent_(r.out())},Blockly.BasicCursor.prototype.getRightMostChild_=function(r){if(!r.in())return r;for(var o=r.in();o.next();)o=o.next();return this.getRightMostChild_(o)},Blockly.registry.register(Blockly.registry.Type.CURSOR,Blockly.BasicCursor.registrationName,Blockly.BasicCursor);