/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.geras.Drawer"),goog.require("Blockly.blockRendering.Drawer"),goog.require("Blockly.geras.Highlighter"),goog.require("Blockly.geras.RenderInfo"),goog.require("Blockly.utils.object"),goog.require("Blockly.utils.svgPaths"),goog.requireType("Blockly.BlockSvg"),goog.requireType("Blockly.geras.PathObject"),Blockly.geras.Drawer=function(t,e){Blockly.geras.Drawer.superClass_.constructor.call(this,t,e),this.highlighter_=new Blockly.geras.Highlighter(e)},Blockly.utils.object.inherits(Blockly.geras.Drawer,Blockly.blockRendering.Drawer),Blockly.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Blockly.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),Blockly.geras.Drawer.superClass_.drawTop_.call(this)},Blockly.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},Blockly.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),Blockly.geras.Drawer.superClass_.drawValueInput_.call(this,t)},Blockly.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},Blockly.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+Blockly.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},Blockly.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),Blockly.geras.Drawer.superClass_.drawBottom_.call(this)},Blockly.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),Blockly.geras.Drawer.superClass_.drawLeft_.call(this)},Blockly.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},Blockly.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},Blockly.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL?o*=-1:o+=this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(o,t.yPos+this.constants_.DARK_PATH_OFFSET)}},Blockly.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},Blockly.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,o=e.xPos,r=(this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2;e.connectionModel.setOffsetInBlock(r,t.baseline+this.constants_.DARK_PATH_OFFSET)}};