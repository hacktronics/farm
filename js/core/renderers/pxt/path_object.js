/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";goog.provide("Blockly.pxt.PathObject"),goog.require("Blockly.pxt.ConstantProvider"),goog.require("Blockly.utils.dom"),goog.require("Blockly.utils.object"),goog.require("Blockly.zelos.PathObject"),Blockly.pxt.PathObject=function(t,i,l){Blockly.pxt.PathObject.superClass_.constructor.call(this,t,i,l),this.svgPathHighlighted_=null,this.svgPathHighlightedWarning_=null,this.svgOutputConnectionIndicator_=null,Blockly.utils.dom.addClass(this.svgPath,"blocklyBlockBackground")},Blockly.utils.object.inherits(Blockly.pxt.PathObject,Blockly.zelos.PathObject),Blockly.pxt.PathObject.prototype.setPath=function(t){Blockly.pxt.PathObject.superClass_.setPath.call(this,t),this.svgPathHighlighted_&&this.svgPathHighlighted_.setAttribute("d",t),this.svgPathHighlightedWarning_&&this.svgPathHighlightedWarning_.setAttribute("d",t)},Blockly.pxt.PathObject.prototype.applyColour=function(t){if(Blockly.pxt.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()){var i=t.getParent().style.colourTertiary,l=Blockly.utils.colour.hexToRgb(i);Blockly.utils.colour.luminance(l)<.15&&this.svgPath.setAttribute("stroke",Blockly.utils.colour.lighten(i,.3))}},Blockly.pxt.PathObject.prototype.updateHighlighted=function(t){this.setClass_("blocklyHighlighted",t),t?this.svgPathHighlighted_||(this.svgPathHighlighted_=this.svgPath.cloneNode(!0),this.svgPathHighlighted_.setAttribute("fill","none"),this.svgPathHighlighted_.setAttribute("filter","url(#"+this.constants.highlightedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlighted_)):this.svgPathHighlighted_&&(this.svgRoot.removeChild(this.svgPathHighlighted_),this.svgPathHighlighted_=null)},Blockly.pxt.PathObject.prototype.updateHighlightedWarning=function(t){this.setClass_("blocklyHighlightedWarning",t),t?this.svgPathHighlightedWarning_||(this.svgPathHighlightedWarning_=this.svgPath.cloneNode(!0),this.svgPathHighlightedWarning_.setAttribute("fill","none"),this.svgPathHighlightedWarning_.setAttribute("filter","url(#"+this.constants.warningGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlightedWarning_)):this.svgPathHighlightedWarning_&&(this.svgRoot.removeChild(this.svgPathHighlightedWarning_),this.svgPathHighlightedWarning_=null)},Blockly.pxt.PathObject.prototype.updateSelected=function(t){Blockly.pxt.PathObject.superClass_.updateSelected.call(this,t),t&&this.svgOutputConnectionIndicator_&&(this.svgRoot.removeChild(this.svgOutputConnectionIndicator_),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_))},Blockly.pxt.PathObject.prototype.positionConnectionIndicator=function(t,i){this.svgOutputConnectionIndicator_||(this.svgOutputConnectionIndicator_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyConnectionIndicator"}),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_),Blockly.utils.dom.createSvgElement("circle",{r:Blockly.CONNECTION_INDICATOR_RADIUS},this.svgOutputConnectionIndicator_)),this.svgOutputConnectionIndicator_.setAttribute("transform","translate("+t+","+i+")")};