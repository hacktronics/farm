/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";goog.provide("Blockly.pxt.ConstantProvider"),goog.require("Blockly.Colours"),goog.require("Blockly.utils.dom"),goog.require("Blockly.utils.object"),goog.require("Blockly.utils.svgPaths"),goog.require("Blockly.zelos.ConstantProvider"),Blockly.pxt.ConstantProvider=function(){Blockly.pxt.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_FONTFAMILY='"Monaco", "Menlo", "Ubuntu Mono", "Consolas", "source-code-pro", monospace',this.FIELD_TEXT_FONTWEIGHT="600",this.ICON_SEPARATOR_HEIGHT=8*this.GRID_UNIT,this.ELLIPSES_RADIUS=6,this.ELLIPSES_SPACING=8,this.COLLAPSE_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.354)'%3E%3Cpath d='m1611 367.42q0 53-37 90l-651 651q-38 38-91 38-54 0-90-38l-651-651q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l486 486 486-486q37-37 90-37 52 0 91 37l75 75q37 39 37 91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.EXPAND_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.654)'%3E%3Cpath d='m1611 832q0-53-37-90l-651-651q-38-38-91-38-54 0-90 38l-651 651q-38 36-38 90 0 53 38 91l74 75q39 37 91 37 53 0 90-37l486-486 486 486q37 37 90 37 52 0 91-37l75-75q37-39 37-91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.highlightedGlowFilterId="",this.highlightedGlowFilter_=null,this.warningGlowFilterId="",this.warningGlowFilter_=null,this.dropdownArrowImageId=""},Blockly.utils.object.inherits(Blockly.pxt.ConstantProvider,Blockly.zelos.ConstantProvider),Blockly.pxt.ConstantProvider.prototype.init=function(){Blockly.pxt.ConstantProvider.superClass_.init.call(this),this.ELLIPSES=this.makeEllipses()},Blockly.pxt.ConstantProvider.prototype.createDom=function(l,o,t){Blockly.pxt.ConstantProvider.superClass_.createDom.call(this,l,o,t);var e=Blockly.utils.dom.createSvgElement("defs",{},l),i=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightGlowFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e);Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.highlightGlowSize},i);var r=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},i);Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.highlightGlow,"flood-opacity":Blockly.Colours.highlightGlowOpacity,result:"outColor"},i),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),this.highlightedGlowFilterId=i.id,this.highlightedGlowFilter_=i;var s=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightWarningFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e);Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.warningGlowSize},s);var n=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},s);Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.warningGlow,"flood-opacity":Blockly.Colours.warningGlowOpacity,result:"outColor"},s),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},s),this.warningGlowFilterId=s.id,this.warningGlowFilter_=s;var c=this.FIELD_DROPDOWN_SVG_ARROW_SIZE,a=Blockly.utils.dom.createSvgElement("image",{id:"blocklyDropdownArrowSvg"+this.randomIdentifier_,height:c+"px",width:c+"px"},e);a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.FIELD_DROPDOWN_SVG_ARROW_DATAURI),this.dropdownArrowImageId=a.id},Blockly.pxt.ConstantProvider.prototype.makeEllipses=function(){for(var l=this.ELLIPSES_RADIUS,o=this.ELLIPSES_SPACING,t="",e=0;e<3;e++)t+=Blockly.utils.svgPaths.moveBy(o,0)+Blockly.utils.svgPaths.arc("a","180 1,1",l,Blockly.utils.svgPaths.point(2*l,0));for(e=0;e<3;e++)t+=Blockly.utils.svgPaths.arc("a","180 1,1",l,Blockly.utils.svgPaths.point(2*-l,0))+Blockly.utils.svgPaths.moveBy(-o,0);return t},Blockly.pxt.ConstantProvider.prototype.getCSS_=function(l){return Blockly.pxt.ConstantProvider.superClass_.getCSS_.call(this,l).concat([l+" .blocklyConnectionIndicator, "+l+" .blocklyInputConnectionIndicator {","fill: #ff0000;","fill-opacity: 0.9;","stroke: #ffff00;","stroke-width: 3px;","}",l+" .blocklyConnectionIndicator {","display: none;","}",l+" .blocklyBlockDragSurface > g > .blocklyDraggable > .blocklyConnectionIndicator {","display: block;","}",l+" .blocklyConnectionLine {","stroke: #ffff00;","stroke-width: 4px;","}",l+" .blocklyConnectionLine.hidden {","display: none;","}",l+" .blocklyFlyoutHeading .blocklyFlyoutLabelText {font-size: 1.5rem;","}"])};