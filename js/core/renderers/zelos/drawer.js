/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.zelos.Drawer"),goog.require("Blockly.blockRendering.Drawer"),goog.require("Blockly.utils.object"),goog.require("Blockly.utils.svgPaths"),goog.require("Blockly.zelos.RenderInfo"),goog.requireType("Blockly.blockRendering.Row"),goog.requireType("Blockly.BlockSvg"),goog.requireType("Blockly.zelos.PathObject"),Blockly.zelos.Drawer=function(t,o){Blockly.zelos.Drawer.superClass_.constructor.call(this,t,o)},Blockly.utils.object.inherits(Blockly.zelos.Drawer,Blockly.blockRendering.Drawer),Blockly.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},Blockly.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):Blockly.zelos.Drawer.superClass_.drawOutline_.call(this)},Blockly.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():Blockly.zelos.Drawer.superClass_.drawLeft_.call(this)},Blockly.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(t.height<=0))if(t.precedesStatement||t.followsStatement){var o=this.constants_.INSIDE_CORNERS.rightHeight,i=t.height-(t.precedesStatement?o:0);this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(i>0?Blockly.utils.svgPaths.lineOnAxis("V",t.yPos+i):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},Blockly.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},Blockly.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",t.width)},Blockly.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",-t.width)},Blockly.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var o=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var i=t.width-2*t.connectionWidth,n=t.height,e=t.centerline-n/2,s=t.xPos+t.connectionWidth,l=Blockly.utils.svgPaths.moveTo(s,e)+Blockly.utils.svgPaths.lineOnAxis("h",i)+t.shape.pathRightDown(t.height)+Blockly.utils.svgPaths.lineOnAxis("h",-i)+t.shape.pathUp(t.height)+"z";this.block_.pathObject.setOutlinePath(o,l)}},Blockly.zelos.Drawer.prototype.drawStatementInput_=function(t){var o=t.getLastInput(),i=o.xPos+o.notchOffset+o.shape.width,n=o.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis("h",-(o.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,e=t.height-2*this.constants_.INSIDE_CORNERS.height,s=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("h",o.notchOffset-this.constants_.INSIDE_CORNERS.width)+(o.connectedBottomNextConnection?"":o.shape.pathLeft);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",i)+n+Blockly.utils.svgPaths.lineOnAxis("v",e)+s+Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)};