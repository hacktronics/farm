/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.zelos.PathObject"),goog.require("Blockly.blockRendering.PathObject"),goog.require("Blockly.utils.dom"),goog.require("Blockly.utils.object"),goog.require("Blockly.utils.Svg"),goog.require("Blockly.zelos.ConstantProvider"),goog.requireType("Blockly.Theme"),Blockly.zelos.PathObject=function(t,e,l){Blockly.zelos.PathObject.superClass_.constructor.call(this,t,e,l),this.constants=l,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.remainingOutlines_=null,this.outputShapeType=null},Blockly.utils.object.inherits(Blockly.zelos.PathObject,Blockly.blockRendering.PathObject),Blockly.zelos.PathObject.prototype.setPath=function(t){Blockly.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},Blockly.zelos.PathObject.prototype.applyColour=function(t){for(var e in Blockly.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[e].setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.flipRTL=function(){for(var t in Blockly.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},Blockly.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},Blockly.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){var l=t.getParentInput().name,s=this.getOutlinePath_(l);s&&(e?s.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):s.removeAttribute("filter"))},Blockly.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},Blockly.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},Blockly.zelos.PathObject.prototype.setOutlinePath=function(t,e){var l=this.getOutlinePath_(t);l.setAttribute("d",e),l.setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},Blockly.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]};