/**
 * @license
 * Copyright 2016 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.WorkspaceDragSurfaceSvg"),goog.require("Blockly.utils"),goog.require("Blockly.utils.dom"),goog.require("Blockly.utils.Svg"),goog.requireType("Blockly.utils.Coordinate"),Blockly.WorkspaceDragSurfaceSvg=function(l){this.container_=l,this.createDom()},Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(l,t){var o=l.toFixed(0),e=t.toFixed(0);this.SVG_.style.display="block",Blockly.utils.dom.setCssTransform(this.SVG_,"translate3d("+o+"px, "+e+"px, 0px)")},Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)},Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(l){if(!l)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var t=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(t&&o&&Blockly.utils.dom.hasClass(t,"blocklyBlockCanvas")&&Blockly.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?Blockly.utils.dom.insertAfter(t,this.previousSibling_):l.insertBefore(t,l.firstChild),Blockly.utils.dom.insertAfter(o,t),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");Blockly.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(l,t,o,e,r,s){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,l.setAttribute("transform","translate(0, 0) scale("+s+")"),t.setAttribute("transform","translate(0, 0) scale("+s+")"),this.SVG_.setAttribute("width",e),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(l),this.SVG_.appendChild(t),this.SVG_.style.display="block"};