/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.browserEvents"),goog.require("Blockly.Touch"),goog.require("Blockly.utils.global"),Blockly.browserEvents.Data,Blockly.browserEvents.conditionalBind=function(e,o,l,n,c,t){var r=!1,i=function(e){for(var o,t=!c,i=Blockly.Touch.splitEventByTouches(e),u=0;o=i[u];u++)t&&!Blockly.Touch.shouldHandleEvent(o)||(Blockly.Touch.setClientFromTouch(o),l?n.call(l,o):n(o),r=!0)},u=[];if(Blockly.utils.global.PointerEvent&&o in Blockly.Touch.TOUCH_MAP)for(var s=0;a=Blockly.Touch.TOUCH_MAP[o][s];s++)e.addEventListener(a,i,!1),u.push([e,a,i]);else if(e.addEventListener(o,i,!1),u.push([e,o,i]),o in Blockly.Touch.TOUCH_MAP){var a,h=function(e){i(e),r&&!t&&e.preventDefault()};for(s=0;a=Blockly.Touch.TOUCH_MAP[o][s];s++)e.addEventListener(a,h,!1),u.push([e,a,h])}return u},Blockly.browserEvents.bind=function(e,o,l,n){var c=function(e){l?n.call(l,e):n(e)},t=[];if(Blockly.utils.global.PointerEvent&&o in Blockly.Touch.TOUCH_MAP)for(var r=0;i=Blockly.Touch.TOUCH_MAP[o][r];r++)e.addEventListener(i,c,!1),t.push([e,i,c]);else if(e.addEventListener(o,c,!1),t.push([e,o,c]),o in Blockly.Touch.TOUCH_MAP){var i,u=function(e){if(e.changedTouches&&1==e.changedTouches.length){var o=e.changedTouches[0];e.clientX=o.clientX,e.clientY=o.clientY}c(e),e.preventDefault()};for(r=0;i=Blockly.Touch.TOUCH_MAP[o][r];r++)e.addEventListener(i,u,!1),t.push([e,i,u])}return t},Blockly.browserEvents.unbind=function(e){for(;e.length;){var o=e.pop(),l=o[0],n=o[1],c=o[2];l.removeEventListener(n,c,!1)}return c};