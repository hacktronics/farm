/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.registry"),goog.requireType("Blockly.blockRendering.Renderer"),goog.requireType("Blockly.Cursor"),goog.requireType("Blockly.Events.Abstract"),goog.requireType("Blockly.Field"),goog.requireType("Blockly.IBlockDragger"),goog.requireType("Blockly.IConnectionChecker"),goog.requireType("Blockly.IFlyout"),goog.requireType("Blockly.IMetricsManager"),goog.requireType("Blockly.IToolbox"),goog.requireType("Blockly.Options"),goog.requireType("Blockly.Theme"),goog.requireType("Blockly.ToolboxItem"),Blockly.registry.typeMap_=Object.create(null),Blockly.registry.DEFAULT="default",Blockly.registry.Type=function(e){this.name_=e},Blockly.registry.Type.prototype.toString=function(){return this.name_},Blockly.registry.Type.CONNECTION_CHECKER=new Blockly.registry.Type("connectionChecker"),Blockly.registry.Type.CURSOR=new Blockly.registry.Type("cursor"),Blockly.registry.Type.EVENT=new Blockly.registry.Type("event"),Blockly.registry.Type.FIELD=new Blockly.registry.Type("field"),Blockly.registry.Type.RENDERER=new Blockly.registry.Type("renderer"),Blockly.registry.Type.TOOLBOX=new Blockly.registry.Type("toolbox"),Blockly.registry.Type.THEME=new Blockly.registry.Type("theme"),Blockly.registry.Type.TOOLBOX_ITEM=new Blockly.registry.Type("toolboxItem"),Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new Blockly.registry.Type("flyoutsVerticalToolbox"),Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new Blockly.registry.Type("flyoutsHorizontalToolbox"),Blockly.registry.Type.METRICS_MANAGER=new Blockly.registry.Type("metricsManager"),Blockly.registry.Type.BLOCK_DRAGGER=new Blockly.registry.Type("blockDragger"),Blockly.registry.register=function(e,r,o,t){if(!(e instanceof Blockly.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof r||""==r.trim())throw Error('Invalid name "'+r+'". The name must be a non-empty string.');if(r=r.toLowerCase(),!o)throw Error("Can not register a null value");var y=Blockly.registry.typeMap_[e];if(y||(y=Blockly.registry.typeMap_[e]=Object.create(null)),Blockly.registry.validate_(e,o),!t&&y[r])throw Error('Name "'+r+'" with type "'+e+'" already registered.');y[r]=o},Blockly.registry.validate_=function(e,r){if(e===String(Blockly.registry.Type.FIELD))if("function"!=typeof r.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},Blockly.registry.unregister=function(e,r){e=String(e).toLowerCase(),r=r.toLowerCase();var o=Blockly.registry.typeMap_[e];o&&o[r]?delete Blockly.registry.typeMap_[e][r]:console.warn("Unable to unregister ["+r+"]["+e+"] from the registry.")},Blockly.registry.getItem_=function(e,r,o){e=String(e).toLowerCase(),r=r.toLowerCase();var t=Blockly.registry.typeMap_[e];if(!t||!t[r]){var y="Unable to find ["+r+"]["+e+"] in the registry.";if(o)throw new Error(y+" You must require or register a "+e+" plugin.");return console.warn(y),null}return t[r]},Blockly.registry.hasItem=function(e,r){e=String(e).toLowerCase(),r=r.toLowerCase();var o=Blockly.registry.typeMap_[e];return!!o&&!!o[r]},Blockly.registry.getClass=function(e,r,o){return Blockly.registry.getItem_(e,r,o)},Blockly.registry.getObject=function(e,r,o){return Blockly.registry.getItem_(e,r,o)},Blockly.registry.getClassFromOptions=function(e,r,o){var t=e.toString(),y=r.plugins[t]||Blockly.registry.DEFAULT;return"function"==typeof y?y:Blockly.registry.getClass(e,y,o)};