/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.uiPosition"),goog.require("Blockly.Scrollbar"),goog.require("Blockly.utils.Rect"),goog.require("Blockly.utils.toolbox"),goog.requireType("Blockly.MetricsManager"),goog.requireType("Blockly.WorkspaceSvg"),Blockly.uiPosition.verticalPosition={TOP:0,BOTTOM:1},Blockly.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},Blockly.uiPosition.Position,Blockly.uiPosition.bumpDirection={UP:0,DOWN:1},Blockly.uiPosition.getStartPositionRect=function(o,i,l,t,r,c){var s=0,e=c.scrollbar&&c.scrollbar.canScrollVertically();o.horizontal===Blockly.uiPosition.horizontalPosition.LEFT?(s=r.absoluteMetrics.left+l,e&&c.RTL&&(s+=Blockly.Scrollbar.scrollbarThickness)):(s=r.absoluteMetrics.left+r.viewMetrics.width-i.width-l,e&&!c.RTL&&(s-=Blockly.Scrollbar.scrollbarThickness));var n=0;return o.vertical===Blockly.uiPosition.verticalPosition.TOP?n=r.absoluteMetrics.top+t:(n=r.absoluteMetrics.top+r.viewMetrics.height-i.height-t,c.scrollbar&&c.scrollbar.canScrollHorizontally()&&(n-=Blockly.Scrollbar.scrollbarThickness)),new Blockly.utils.Rect(n,n+i.height,s,s+i.width)},Blockly.uiPosition.getCornerOppositeToolbox=function(o,i){var l=i.toolboxMetrics.position!==Blockly.utils.toolbox.Position.LEFT&&(!o.horizontalLayout||o.RTL),t=i.toolboxMetrics.position===Blockly.utils.toolbox.Position.BOTTOM;return{horizontal:l?Blockly.uiPosition.horizontalPosition.LEFT:Blockly.uiPosition.horizontalPosition.RIGHT,vertical:t?Blockly.uiPosition.verticalPosition.TOP:Blockly.uiPosition.verticalPosition.BOTTOM}},Blockly.uiPosition.bumpPositionRect=function(o,i,l,t){for(var r,c=o.top,s=o.left,e=o.right-o.left,n=o.bottom-o.top,a=o,u=0;r=t[u];u++)a.intersects(r)&&(c=l===Blockly.uiPosition.bumpDirection.UP?r.top-n-i:r.bottom+i,a=new Blockly.utils.Rect(c,c+n,s,s+e),u=-1);return a};