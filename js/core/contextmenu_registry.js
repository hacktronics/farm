/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.ContextMenuRegistry"),goog.requireType("Blockly.BlockSvg"),goog.requireType("Blockly.WorkspaceSvg"),Blockly.ContextMenuRegistry=function(){Blockly.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},Blockly.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},Blockly.ContextMenuRegistry.Scope,Blockly.ContextMenuRegistry.RegistryItem,Blockly.ContextMenuRegistry.ContextMenuOption,Blockly.ContextMenuRegistry.registry=null,Blockly.ContextMenuRegistry.prototype.register=function(e){if(this.registry_[e.id])throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_[e.id]=e},Blockly.ContextMenuRegistry.prototype.unregister=function(e){if(!this.registry_[e])throw new Error('Menu item with ID "'+e+'" not found.');delete this.registry_[e]},Blockly.ContextMenuRegistry.prototype.getItem=function(e){return this.registry_[e]||null},Blockly.ContextMenuRegistry.prototype.getContextMenuOptions=function(e,t){var o=[],r=this.registry_;return Object.keys(r).forEach(function(i){var n=r[i];if(e==n.scopeType){var y=n.preconditionFn(t);if("hidden"!=y){var l={text:"function"==typeof n.displayText?n.displayText(t):n.displayText,enabled:"enabled"==y,callback:n.callback,scope:t,weight:n.weight};o.push(l)}}}),o.sort(function(e,t){return e.weight-t.weight}),o},new Blockly.ContextMenuRegistry;