/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.ShortcutItems"),goog.require("Blockly.Gesture"),goog.require("Blockly.ShortcutRegistry"),goog.require("Blockly.utils.KeyCodes"),goog.requireType("Blockly.BlockSvg"),goog.requireType("Blockly.ICopyable"),Blockly.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},Blockly.ShortcutItems.registerEscape=function(){var e={name:Blockly.ShortcutItems.names.ESCAPE,preconditionFn:function(e){return!e.options.readOnly},callback:function(){return Blockly.hideChaff(),!0}};Blockly.ShortcutRegistry.registry.register(e),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.ESC,e.name)},Blockly.ShortcutItems.registerDelete=function(){var e={name:Blockly.ShortcutItems.names.DELETE,preconditionFn:function(e){return!e.options.readOnly&&Blockly.selected&&Blockly.selected.isDeletable()},callback:function(e,t){return t.preventDefault(),!Blockly.Gesture.inProgress()&&(Blockly.deleteBlock(Blockly.selected),!0)}};Blockly.ShortcutRegistry.registry.register(e),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.DELETE,e.name),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.BACKSPACE,e.name)},Blockly.ShortcutItems.registerCopy=function(){var e={name:Blockly.ShortcutItems.names.COPY,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()&&Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()},callback:function(e,t){return t.preventDefault(),Blockly.hideChaff(),Blockly.copy(Blockly.selected),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name);var l=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.ALT]);Blockly.ShortcutRegistry.registry.addKeyMapping(l,e.name);var r=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.META]);Blockly.ShortcutRegistry.registry.addKeyMapping(r,e.name)},Blockly.ShortcutItems.registerCut=function(){var e={name:Blockly.ShortcutItems.names.CUT,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()&&Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&!Blockly.selected.workspace.isFlyout},callback:function(){return Blockly.copy(Blockly.selected),Blockly.deleteBlock(Blockly.selected),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name);var l=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.ALT]);Blockly.ShortcutRegistry.registry.addKeyMapping(l,e.name);var r=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.META]);Blockly.ShortcutRegistry.registry.addKeyMapping(r,e.name)},Blockly.ShortcutItems.registerPaste=function(){var e={name:Blockly.ShortcutItems.names.PASTE,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()},callback:function(){return Blockly.paste()}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name);var l=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.ALT]);Blockly.ShortcutRegistry.registry.addKeyMapping(l,e.name);var r=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.META]);Blockly.ShortcutRegistry.registry.addKeyMapping(r,e.name)},Blockly.ShortcutItems.registerUndo=function(){var e={name:Blockly.ShortcutItems.names.UNDO,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()},callback:function(e){return Blockly.hideChaff(),e.undo(!1),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name);var l=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.ALT]);Blockly.ShortcutRegistry.registry.addKeyMapping(l,e.name);var r=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.META]);Blockly.ShortcutRegistry.registry.addKeyMapping(r,e.name)},Blockly.ShortcutItems.registerRedo=function(){var e={name:Blockly.ShortcutItems.names.REDO,preconditionFn:function(e){return!Blockly.Gesture.inProgress()&&!e.options.readOnly},callback:function(e){return Blockly.hideChaff(),e.undo(!0),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name);var l=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.ALT]);Blockly.ShortcutRegistry.registry.addKeyMapping(l,e.name);var r=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.META]);Blockly.ShortcutRegistry.registry.addKeyMapping(r,e.name);var o=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Y,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(o,e.name)},Blockly.ShortcutItems.registerDefaultShortcuts=function(){Blockly.ShortcutItems.registerEscape(),Blockly.ShortcutItems.registerDelete(),Blockly.ShortcutItems.registerCopy(),Blockly.ShortcutItems.registerCut(),Blockly.ShortcutItems.registerPaste(),Blockly.ShortcutItems.registerUndo(),Blockly.ShortcutItems.registerRedo()},Blockly.ShortcutItems.registerDefaultShortcuts();