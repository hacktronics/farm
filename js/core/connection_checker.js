/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
'use strict';var a0_0x3b80f9=a0_0x4e99;function a0_0x4c3a(){var _0xc7bcee=['Blockly.connectionTypes','requireType','isInsertionMarker','7bTbcft','Attempted\x20to\x20connect\x20a\x20block\x20to\x20itself.','3559252VOGzES','2GLdhHd','draggingConnections','canConnect','2008257eKUJSQ','CAN_CONNECT','isMovable','Type','2360744EgoNyR','connectionTypes','previousConnection','ConnectionChecker','Target\x20connection\x20is\x20null.','Blocks\x20not\x20on\x20same\x20workspace.','prototype','getSourceBlock','Blockly.pxtBlocklyUtils','hasMatchingArgumentReporter','canConnectToPrevious_','targetConnection','registry','targetBlock','Connection','doDragChecks','Blockly.RenderedConnection','register','nextConnection','4538750nBvQkO','Blockly.constants','REASON_SELF_CONNECTION','distanceFrom','OUTPUT_VALUE','length','REASON_SHADOW_PARENT','provide','DEFAULT','isConnected','Blockly.registry','require','Connection\x20checks\x20failed.\x20','67682NJLSIM','REASON_DIFFERENT_WORKSPACES','NEXT_STATEMENT','isSuperior','canConnectWithReason','getPreviousBlock','getParent','isShadow','REASON_TARGET_NULL','getCheck','REASON_CHECKS_FAILED','isFunctionArgumentReporter','type','REASON_WRONG_TYPE','\x20expected\x20','25327629stCPAd','doTypeChecks','OPPOSITE_TYPE','isEnabled','4873380LZZcDB','Blockly.ConnectionChecker','CONNECTION_CHECKER','indexOf','Attempt\x20to\x20connect\x20incompatible\x20types.','pxtBlocklyUtils','workspace'];a0_0x4c3a=function(){return _0xc7bcee;};return a0_0x4c3a();}function a0_0x4e99(_0x191ea2,_0x2e3578){var _0x4c3a16=a0_0x4c3a();return a0_0x4e99=function(_0x4e9919,_0x2f077c){_0x4e9919=_0x4e9919-0xb6;var _0x2d0bee=_0x4c3a16[_0x4e9919];return _0x2d0bee;},a0_0x4e99(_0x191ea2,_0x2e3578);}(function(_0x140f99,_0x38ba3d){var _0xace9c1=a0_0x4e99,_0x30fe47=_0x140f99();while(!![]){try{var _0x4dbd=parseInt(_0xace9c1(0xbb))/0x1*(-parseInt(_0xace9c1(0xe2))/0x2)+parseInt(_0xace9c1(0xbe))/0x3+parseInt(_0xace9c1(0xba))/0x4+parseInt(_0xace9c1(0xd5))/0x5+parseInt(_0xace9c1(0xf5))/0x6*(parseInt(_0xace9c1(0xb8))/0x7)+parseInt(_0xace9c1(0xc2))/0x8+-parseInt(_0xace9c1(0xf1))/0x9;if(_0x4dbd===_0x38ba3d)break;else _0x30fe47['push'](_0x30fe47['shift']());}catch(_0x238d46){_0x30fe47['push'](_0x30fe47['shift']());}}}(a0_0x4c3a,0xa90da));goog[a0_0x3b80f9(0xdc)](a0_0x3b80f9(0xf6)),goog[a0_0x3b80f9(0xe0)]('Blockly.Connection'),goog[a0_0x3b80f9(0xe0)](a0_0x3b80f9(0xfc)),goog[a0_0x3b80f9(0xe0)](a0_0x3b80f9(0xd6)),goog['require']('Blockly.IConnectionChecker'),goog[a0_0x3b80f9(0xe0)](a0_0x3b80f9(0xca)),goog['require'](a0_0x3b80f9(0xdf)),goog[a0_0x3b80f9(0xb6)](a0_0x3b80f9(0xd2)),Blockly[a0_0x3b80f9(0xc5)]=function(){},Blockly[a0_0x3b80f9(0xc5)]['prototype'][a0_0x3b80f9(0xbd)]=function(_0x4f3361,_0x23918d,_0x18c4ad,_0x453600){var _0x1c39d6=a0_0x3b80f9;return this['canConnectWithReason'](_0x4f3361,_0x23918d,_0x18c4ad,_0x453600)==Blockly[_0x1c39d6(0xd0)][_0x1c39d6(0xbf)];},Blockly[a0_0x3b80f9(0xc5)][a0_0x3b80f9(0xc8)][a0_0x3b80f9(0xe6)]=function(_0x5ce98c,_0x1c7642,_0x4ceaa3,_0x2b172d){var _0x148c7b=a0_0x3b80f9,_0x13887b=this['doSafetyChecks'](_0x5ce98c,_0x1c7642);if(_0x13887b!=Blockly[_0x148c7b(0xd0)][_0x148c7b(0xbf)])return _0x13887b;var _0x426d72=_0x5ce98c,_0x1ef588=_0x1c7642;return this['doTypeChecks'](_0x426d72,_0x1ef588)?_0x4ceaa3&&!this[_0x148c7b(0xd1)](_0x5ce98c,_0x1c7642,_0x2b172d||0x0)?Blockly[_0x148c7b(0xd0)]['REASON_DRAG_CHECKS_FAILED']:Blockly[_0x148c7b(0xd0)][_0x148c7b(0xbf)]:Blockly[_0x148c7b(0xd0)]['REASON_CHECKS_FAILED'];},Blockly[a0_0x3b80f9(0xc5)][a0_0x3b80f9(0xc8)]['getErrorMessage']=function(_0x147c0e,_0x231f5f,_0x709132){var _0x5dcc6e=a0_0x3b80f9;switch(_0x147c0e){case Blockly[_0x5dcc6e(0xd0)]['REASON_SELF_CONNECTION']:return _0x5dcc6e(0xb9);case Blockly[_0x5dcc6e(0xd0)][_0x5dcc6e(0xe3)]:return _0x5dcc6e(0xc7);case Blockly['Connection'][_0x5dcc6e(0xef)]:return _0x5dcc6e(0xf9);case Blockly[_0x5dcc6e(0xd0)]['REASON_TARGET_NULL']:return _0x5dcc6e(0xc6);case Blockly[_0x5dcc6e(0xd0)][_0x5dcc6e(0xec)]:var _0x43aff6=_0x709132,_0x13456f=_0x5dcc6e(0xe1);return _0x13456f+=_0x231f5f+_0x5dcc6e(0xf0)+_0x231f5f[_0x5dcc6e(0xeb)]()+',\x20found\x20'+_0x43aff6['getCheck']();case Blockly[_0x5dcc6e(0xd0)][_0x5dcc6e(0xdb)]:return'Connecting\x20non-shadow\x20to\x20shadow\x20block.';case Blockly[_0x5dcc6e(0xd0)]['REASON_DRAG_CHECKS_FAILED']:return'Drag\x20checks\x20failed.';default:return'Unknown\x20connection\x20failure:\x20this\x20should\x20never\x20happen!';}},Blockly['ConnectionChecker']['prototype']['doSafetyChecks']=function(_0x3a9769,_0x3c397f){var _0x527028=a0_0x3b80f9;if(!_0x3a9769||!_0x3c397f)return Blockly[_0x527028(0xd0)][_0x527028(0xea)];if(_0x3a9769[_0x527028(0xe5)]())var _0x24237e=_0x3a9769[_0x527028(0xc9)](),_0x5c43a3=_0x3c397f[_0x527028(0xc9)]();else _0x5c43a3=_0x3a9769['getSourceBlock'](),_0x24237e=_0x3c397f['getSourceBlock']();return _0x24237e==_0x5c43a3?Blockly[_0x527028(0xd0)][_0x527028(0xd7)]:_0x3c397f[_0x527028(0xee)]!=Blockly[_0x527028(0xf3)][_0x3a9769[_0x527028(0xee)]]?Blockly['Connection'][_0x527028(0xef)]:_0x24237e[_0x527028(0xfb)]!==_0x5c43a3[_0x527028(0xfb)]?Blockly['Connection'][_0x527028(0xe3)]:Blockly['Connection']['CAN_CONNECT'];},Blockly[a0_0x3b80f9(0xc5)]['prototype'][a0_0x3b80f9(0xf2)]=function(_0x4547de,_0x58b3e5){var _0x3f4269=a0_0x3b80f9,_0x3ab883=_0x4547de['getCheck'](),_0xd38ba8=_0x58b3e5[_0x3f4269(0xeb)]();if(!_0x3ab883||!_0xd38ba8)return!0x0;for(var _0x5a5653=0x0;_0x5a5653<_0x3ab883[_0x3f4269(0xda)];_0x5a5653++)if(-0x1!=_0xd38ba8['indexOf'](_0x3ab883[_0x5a5653]))return!0x0;return!0x1;},Blockly[a0_0x3b80f9(0xc5)][a0_0x3b80f9(0xc8)][a0_0x3b80f9(0xd1)]=function(_0x453180,_0x594aa5,_0x12a5f2){var _0x25848a=a0_0x3b80f9;if(_0x453180[_0x25848a(0xd8)](_0x594aa5)>_0x12a5f2)return!0x1;if(_0x594aa5[_0x25848a(0xc9)]()['isInsertionMarker']())return!0x1;switch(_0x594aa5[_0x25848a(0xee)]){case Blockly['connectionTypes']['PREVIOUS_STATEMENT']:return this[_0x25848a(0xcc)](_0x453180,_0x594aa5);case Blockly['connectionTypes'][_0x25848a(0xd9)]:if(_0x594aa5[_0x25848a(0xde)]()&&!_0x594aa5[_0x25848a(0xcf)]()[_0x25848a(0xb7)]()||_0x453180[_0x25848a(0xde)]())return!0x1;break;case Blockly['connectionTypes']['INPUT_VALUE']:if(_0x594aa5['isConnected']()&&!_0x594aa5[_0x25848a(0xcf)]()[_0x25848a(0xc0)]()&&!_0x594aa5[_0x25848a(0xcf)]()['isShadow']())return!0x1;if(_0x594aa5&&_0x594aa5[_0x25848a(0xcf)]()){var _0xeac9ad=_0x594aa5[_0x25848a(0xcf)]();if(_0xeac9ad['isShadow']()&&Blockly[_0x25848a(0xfa)]['isFunctionArgumentReporter'](_0xeac9ad))return!0x1;}if(Blockly['pxtBlocklyUtils'][_0x25848a(0xed)](_0x453180[_0x25848a(0xc9)]())){for(var _0x2d1eca=_0x594aa5[_0x25848a(0xc9)]()[_0x25848a(0xe8)](),_0x5305b5=!0x1;_0x2d1eca;){if(!_0x2d1eca[_0x25848a(0xf4)]()||Blockly[_0x25848a(0xfa)][_0x25848a(0xcb)](_0x2d1eca,_0x453180['getSourceBlock']())){_0x5305b5=!0x0;break;}_0x2d1eca=_0x2d1eca[_0x25848a(0xe8)]();}if(!_0x5305b5)return!0x1;}break;case Blockly[_0x25848a(0xc3)][_0x25848a(0xe4)]:if(_0x594aa5[_0x25848a(0xde)]()&&!_0x453180[_0x25848a(0xc9)]()[_0x25848a(0xd4)]&&!_0x594aa5['targetBlock']()[_0x25848a(0xe9)]()&&_0x594aa5['targetBlock']()[_0x25848a(0xd4)])return!0x1;break;default:return!0x1;}return-0x1==Blockly[_0x25848a(0xbc)][_0x25848a(0xf8)](_0x594aa5);},Blockly['ConnectionChecker'][a0_0x3b80f9(0xc8)][a0_0x3b80f9(0xcc)]=function(_0x30dc7d,_0x3f753c){var _0x5c8cbe=a0_0x3b80f9;if(_0x30dc7d[_0x5c8cbe(0xcd)])return!0x1;if(-0x1!=Blockly[_0x5c8cbe(0xbc)]['indexOf'](_0x3f753c))return!0x1;var _0x5acf19=_0x30dc7d[_0x5c8cbe(0xc9)](),_0x53ed11=_0x5acf19['getFirstStatementConnection'](),_0x14cd10=null!=_0x53ed11,_0x405c28=_0x30dc7d==_0x53ed11,_0x2bdfc1=_0x30dc7d==_0x5acf19[_0x5c8cbe(0xd4)];if(_0x14cd10&&!_0x405c28&&!_0x2bdfc1)return!0x1;var _0x13a2e5=null!=_0x5acf19[_0x5c8cbe(0xc4)];if(_0x405c28&&_0x13a2e5)return!0x0;if(!_0x3f753c[_0x5c8cbe(0xcd)])return!0x0;var _0x1e7011=_0x3f753c[_0x5c8cbe(0xcf)]();return!!_0x1e7011[_0x5c8cbe(0xb7)]()&&!_0x1e7011[_0x5c8cbe(0xe7)]();},Blockly['registry'][a0_0x3b80f9(0xd3)](Blockly[a0_0x3b80f9(0xce)][a0_0x3b80f9(0xc1)][a0_0x3b80f9(0xf7)],Blockly['registry'][a0_0x3b80f9(0xdd)],Blockly[a0_0x3b80f9(0xc5)]);