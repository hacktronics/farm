/**
 * @license
 * Copyright 2016 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Options"),goog.require("Blockly.Colours"),goog.require("Blockly.registry"),goog.require("Blockly.Theme"),goog.require("Blockly.Themes.Classic"),goog.require("Blockly.utils.IdGenerator"),goog.require("Blockly.utils.Metrics"),goog.require("Blockly.utils.toolbox"),goog.requireType("Blockly.WorkspaceSvg"),Blockly.Options=function(o){var l=!!o.readOnly;if(l)var e=null,s=!1,r=!1,t=!1,i=!1,a=!1,n=!1,c=!1;else{e=Blockly.utils.toolbox.convertToolboxDefToJson(o.toolbox),s=null!=o.hasCategories?o.hasCategories:Blockly.utils.toolbox.hasCategories(e);void 0===(r=o.trashcan)&&(r=s);var p=o.maxTrashcanContents;r?void 0===p&&(p=32):p=0,void 0===(t=o.collapse)&&(t=s),void 0===(i=o.comments)&&(i=s),void 0===(a=o.disable)&&(a=s),void 0===(n=o.sounds)&&(n=!0);var h=o.inline;void 0===h&&(h=!1)}var d=!!o.rtl,u=o.horizontalLayout;void 0===u&&(u=!1);var y,b=o.toolboxPosition;b="end"!==b,y=u?b?Blockly.utils.toolbox.Position.TOP:Blockly.utils.toolbox.Position.BOTTOM:b==d?Blockly.utils.toolbox.Position.RIGHT:Blockly.utils.toolbox.Position.LEFT;var g=o.css;void 0===g&&(g=!0);var m="https://blockly-demo.appspot.com/static/media/";if(o.media?m=o.media:o.path&&(m=o.path+"media/"),void 0===o.oneBasedIndex)var v=!0;else v=!!o.oneBasedIndex;var k=o.renderer||"geras",B=o.colours;if(B)for(var O in B)B.hasOwnProperty(O)&&Blockly.Colours.hasOwnProperty(O)&&(Blockly.Colours[O]=B[O]);var T=o.plugins||{};this.RTL=d,this.oneBasedIndex=v,this.collapse=t,this.comments=i,this.debugMode=c,this.disable=a,this.readOnly=l,this.maxBlocks=o.maxBlocks||1/0,this.maxInstances=o.maxInstances,this.inline=h,this.newFunctions=1==o.newFunctions,this.pathToMedia=m,this.hasCategories=s,this.moveOptions=Blockly.Options.parseMoveOptions_(o,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=p,this.hasSounds=n,this.hasCss=g,this.horizontalLayout=u,this.languageTree=e,this.gridOptions=Blockly.Options.parseGridOptions_(o),this.zoomOptions=Blockly.Options.parseZoomOptions_(o),this.toolboxPosition=y,this.theme=Blockly.Options.parseThemeOptions_(o),this.renderer=k,this.rendererOverrides=o.rendererOverrides,this.gridPattern=null,this.parentWorkspace=o.parentWorkspace,this.plugins=T},Blockly.BlocklyOptions=function(){},Blockly.Options.GridOptions,Blockly.Options.MoveOptions,Blockly.Options.ScrollbarOptions,Blockly.Options.ZoomOptions,Blockly.Options.prototype.setMetrics,Blockly.Options.prototype.getMetrics,Blockly.Options.parseMoveOptions_=function(o,l){var e=o.move||{},s={};return void 0===e.scrollbars&&void 0===o.scrollbars?s.scrollbars=l:"object"==typeof e.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!e.scrollbars.horizontal,s.scrollbars.vertical=!!e.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!e.scrollbars||!!o.scrollbars,s.scrollbars&&void 0!==e.wheel?s.wheel=!!e.wheel:s.wheel="object"==typeof s.scrollbars,s.scrollbars?void 0===e.drag?s.drag=!0:s.drag=!!e.drag:s.drag=!1,s},Blockly.Options.parseZoomOptions_=function(o){var l=o.zoom||{},e={};return void 0===l.controls?e.controls=!1:e.controls=!!l.controls,void 0===l.wheel?e.wheel=!1:e.wheel=!!l.wheel,void 0===l.startScale?e.startScale=1:e.startScale=Number(l.startScale),void 0===l.maxScale?e.maxScale=3:e.maxScale=Number(l.maxScale),void 0===l.minScale?e.minScale=.3:e.minScale=Number(l.minScale),void 0===l.scaleSpeed?e.scaleSpeed=1.2:e.scaleSpeed=Number(l.scaleSpeed),void 0===l.pinch?e.pinch=e.wheel||e.controls:e.pinch=!!l.pinch,e},Blockly.Options.parseGridOptions_=function(o){var l=o.grid||{},e={};return e.spacing=Number(l.spacing)||0,e.colour=l.colour||"#888",e.length=void 0===l.length?1:Number(l.length),e.snap=e.spacing>0&&!!l.snap,e.image=Blockly.Options.parseGridImageOptions_(l),e},Blockly.Options.parseGridImageOptions_=function(o){var l=o.image;return l&&l.path?(l.width=l.width||100,l.height=l.height||100,l):null},Blockly.Options.parseThemeOptions_=function(o){var l=o.theme||Blockly.Themes.Classic;return"string"==typeof l?Blockly.registry.getObject(Blockly.registry.Type.THEME,l):l instanceof Blockly.Theme?l:Blockly.Theme.defineTheme(l.name||"builtin"+Blockly.utils.IdGenerator.getNextUniqueId(),l)},Blockly.Options.parseToolboxTree=function(o){return Blockly.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),Blockly.utils.toolbox.parseToolboxTree(o)};