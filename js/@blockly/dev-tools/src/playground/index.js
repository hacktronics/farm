/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const a0_0x1eb031=a0_0x5150;(function(_0x933578,_0x14b4c2){const _0x7a2adf=a0_0x5150,_0x57add3=_0x933578();while(!![]){try{const _0x41eb75=-parseInt(_0x7a2adf(0x1b4))/0x1+parseInt(_0x7a2adf(0x1ec))/0x2*(-parseInt(_0x7a2adf(0x1bc))/0x3)+-parseInt(_0x7a2adf(0x200))/0x4+parseInt(_0x7a2adf(0x1b3))/0x5*(parseInt(_0x7a2adf(0x1cd))/0x6)+parseInt(_0x7a2adf(0x1dc))/0x7*(-parseInt(_0x7a2adf(0x1ab))/0x8)+parseInt(_0x7a2adf(0x206))/0x9*(parseInt(_0x7a2adf(0x1be))/0xa)+parseInt(_0x7a2adf(0x1a2))/0xb*(parseInt(_0x7a2adf(0x1b2))/0xc);if(_0x41eb75===_0x14b4c2)break;else _0x57add3['push'](_0x57add3['shift']());}catch(_0x1aa9db){_0x57add3['push'](_0x57add3['shift']());}}}(a0_0x3fff,0x396a9));import{toolboxTestBlocks,toolboxTestBlocksInit}from'@blockly/block-test';import*as a0_0x238bfb from'blockly/core';import*as a0_0x5044d0 from'blockly/dart';import*as a0_0x4c1782 from'blockly/javascript';function a0_0x5150(_0x34a88b,_0x4c5777){const _0x3fff26=a0_0x3fff();return a0_0x5150=function(_0x515003,_0x206a9b){_0x515003=_0x515003-0x18e;let _0x3363d8=_0x3fff26[_0x515003];return _0x3363d8;},a0_0x5150(_0x34a88b,_0x4c5777);}import*as a0_0xb823a0 from'blockly/lua';import*as a0_0x471964 from'blockly/php';import*as a0_0x1815dc from'blockly/python';import{downloadWorkspaceScreenshot}from'../screenshot';import a0_0x515c70 from'../toolboxCategories';import a0_0x18457b from'../toolboxSimple';import{id}from'./id';function a0_0x3fff(){const _0x219272=['763070iUAxQR','Xml','XML','toolboxes','addEventListener','Dart','replace','addAction','getValue','1280smBLJP','Failed\x20to\x20auto\x20import.','#2D2D2D','values','playground','generate','focus','36JQfKzO','1777535qnlUtw','164426bwMLci','Generate','editor','error','Enter','isEditorXml','domElement','getModel','6MTVwpq','clean-xml','10ghdHQU','KEY_S','ctrlKey','save','domToPrettyText','firstChild','php','saveViewState','Import\x20from\x20XML','svgResize','forEach','change','vs-dark','domToWorkspace','type','6spZVgk','setModel','Expand','Failed\x20to\x20auto\x20save.','display','workspaceToCode','none','Range','#1E1E1E','Lua','setSelection','usage:\x20removeGenerator(label);','data-tab','push','viewState','154ZbsSiz','updateOptions','KeyCode','length','tabElement','removeChild','setAttribute','usage:\x20addGenerator(label,\x20generator,\x20language?);','model','Clean\x20XML','xml','javascript','Download\x20Screenshot','checked','getWorkspace','PHP','359548jBmfKX','name','monaco','!isEditorXml','flex','CtrlCmd','Auto','restoreViewState','utils','then','call','getFullModelRange','100%','createContextKey','createModel','getCurrentTab','target','background','inject','python','578268AqmijB','removeGenerator\x20called\x20on\x20invalid\x20label:\x20','autoGenerate','textToDom','dart','getTopBlocks','3092589tcHCWp','KeyMod','workspaceToDom','relative','get','state','Collapse','auto','JavaScript','Python','style','warn','export-xml','set','setValue','keydown','workspaceXml','lua','KeyCodes','metaKey','getAttribute','keyCode','appendChild','preventDefault','textContent'];a0_0x3fff=function(){return _0x219272;};return a0_0x3fff();}import{addCodeEditor}from'./monaco';import{addGUIControls}from'./options';import{LocalStorageState}from'./state';import{renderCheckbox,renderCodeTab,renderPlayground}from'./ui';let CreateWorkspaceFn,PlaygroundTab,PlaygroundAPI;export function createPlayground(_0x2e0572,_0x10c1f7=a0_0x238bfb[a0_0x1eb031(0x1fe)],_0x2eeaa3={'toolbox':a0_0x515c70},_0x49b8b8={},_0x4c3422){const _0x2f05a1=a0_0x1eb031,{blocklyDiv:_0x56f048,minimizeButton:_0x335ae8,monacoDiv:_0x1602f3,guiContainer:_0x5a44a3,playgroundDiv:_0x17e25b,tabButtons:_0x4d58c9,tabsDiv:_0x2d8f25}=renderPlayground(_0x2e0572);return addCodeEditor(_0x1602f3,{'model':null,'language':_0x2f05a1(0x1e6),'minimap':{'enabled':!0x1},'theme':_0x2f05a1(0x1ca),'scrollBeyondLastLine':!0x1,'automaticLayout':!0x0},_0x4c3422)[_0x2f05a1(0x1f5)](_0x218bb6=>{const _0x21ab68=_0x2f05a1;let _0x59aff8;const _0x552573=window[_0x21ab68(0x1ee)][_0x21ab68(0x1b6)][_0x21ab68(0x1fa)](''),_0x459362=_0x218bb6[_0x21ab68(0x1f9)](_0x21ab68(0x1b9),!0x0),_0x42028c=new LocalStorageState('playgroundState_'+id,{'activeTab':_0x21ab68(0x1a4),'autoGenerate':!_0x49b8b8||null==_0x49b8b8['auto']||_0x49b8b8[_0x21ab68(0x190)],'workspaceXml':''});function _0x185da0(_0x22676c,_0x6ed0c,_0x389df3,_0x2c52ea){const _0x276c21=_0x21ab68,_0x24c4b5=renderCodeTab(_0x22676c);_0x24c4b5[_0x276c21(0x1e2)]('data-tab',_0x22676c),_0x2d8f25[_0x276c21(0x19f)](_0x24c4b5);const _0x1c9123=window[_0x276c21(0x1ee)]['editor'][_0x276c21(0x1fa)]('',_0x6ed0c);return{'generate':function(){const _0x311004=_0x276c21;let _0x13cc10,_0xf831c=_0x1c9123;try{_0x13cc10=_0x389df3(_0x59aff8);}catch(_0x5b0f1a){console[_0x311004(0x1b7)](_0x5b0f1a),_0x13cc10=_0x5b0f1a['message'],_0xf831c=_0x552573,_0x218bb6[_0x311004(0x1dd)]({'wordWrap':!0x0});}_0xf831c['pushEditOperations']([],[{'range':_0xf831c['getFullModelRange'](),'text':_0x13cc10}],()=>null),_0x218bb6[_0x311004(0x1ce)](_0xf831c),_0x218bb6[_0x311004(0x1d7)](new window[(_0x311004(0x1ee))][(_0x311004(0x1d4))](0x0,0x0,0x0,0x0));},'state':{'name':_0x22676c,'model':_0x1c9123,'language':_0x6ed0c,'viewState':void 0x0},'tabElement':_0x24c4b5};}_0x42028c['load']();const _0x4665f5=_0x45ebcf=>{const _0x5018e0=_0x21ab68;_0x15e2ff=_0x45ebcf,_0x151527=_0x45ebcf[_0x5018e0(0x1b0)];const _0x43f8b4=_0x5018e0(0x1a4)==_0x45ebcf[_0x5018e0(0x18e)]['name'];_0x218bb6['setModel'](_0x15e2ff['state'][_0x5018e0(0x1e4)]),_0x218bb6[_0x5018e0(0x1dd)]({'readOnly':!_0x43f8b4,'wordWrap':!0x1}),Object[_0x5018e0(0x1ae)](_0xd37ca9)[_0x5018e0(0x1c8)](_0xb3863a=>_0xb3863a['tabElement'][_0x5018e0(0x193)][_0x5018e0(0x1fd)]=_0xb3863a[_0x5018e0(0x1e0)]==_0x45ebcf[_0x5018e0(0x1e0)]?_0x5018e0(0x1d5):_0x5018e0(0x1ad)),_0x459362[_0x5018e0(0x196)](_0x43f8b4),_0x42028c[_0x5018e0(0x196)]('activeTab',_0x45ebcf['state'][_0x5018e0(0x1ed)]),_0x42028c[_0x5018e0(0x1c1)]();},_0xb63aa9=()=>{const _0x2b4fc6=_0x21ab68;if(_0x42028c[_0x2b4fc6(0x20a)](_0x2b4fc6(0x202))){if(_0x33e356&&_0x46fc20){_0x46fc20=!0x1;try{a0_0x238bfb['Xml']['domToWorkspace'](a0_0x238bfb[_0x2b4fc6(0x1a3)][_0x2b4fc6(0x203)](_0x33e356),_0x59aff8);}catch(_0x556054){console[_0x2b4fc6(0x194)](_0x2b4fc6(0x1ac),_0x556054);}}_0x151527&&_0x151527();let _0x3f2c0c='';try{_0x3f2c0c=a0_0x238bfb[_0x2b4fc6(0x1a3)][_0x2b4fc6(0x1c2)](a0_0x238bfb['Xml'][_0x2b4fc6(0x208)](_0x59aff8));}catch(_0x545d2d){console[_0x2b4fc6(0x194)](_0x2b4fc6(0x1d0),_0x545d2d);}_0x42028c[_0x2b4fc6(0x196)]('workspaceXml',_0x3f2c0c),_0x42028c[_0x2b4fc6(0x1c1)]();}},_0xd37ca9={'XML':_0x185da0(_0x21ab68(0x1a4),'xml',_0x59b77c=>a0_0x238bfb[_0x21ab68(0x1a3)][_0x21ab68(0x1c2)](a0_0x238bfb[_0x21ab68(0x1a3)][_0x21ab68(0x208)](_0x59b77c))),'JavaScript':_0x185da0(_0x21ab68(0x191),_0x21ab68(0x1e7),_0x6d8809=>(a0_0x4c1782||a0_0x238bfb[_0x21ab68(0x191)])[_0x21ab68(0x1d2)](_0x6d8809)),'Python':_0x185da0(_0x21ab68(0x192),_0x21ab68(0x1ff),_0x1c7f12=>(a0_0x1815dc||a0_0x238bfb['Python'])[_0x21ab68(0x1d2)](_0x1c7f12)),'Dart':_0x185da0(_0x21ab68(0x1a7),_0x21ab68(0x204),_0x539a10=>(a0_0x5044d0||a0_0x238bfb[_0x21ab68(0x1a7)])[_0x21ab68(0x1d2)](_0x539a10)),'Lua':_0x185da0(_0x21ab68(0x1d6),_0x21ab68(0x19a),_0x390455=>(a0_0xb823a0||a0_0x238bfb[_0x21ab68(0x1d6)])[_0x21ab68(0x1d2)](_0x390455)),'PHP':_0x185da0(_0x21ab68(0x1eb),_0x21ab68(0x1c4),_0xfd22e=>(a0_0x471964||a0_0x238bfb[_0x21ab68(0x1eb)])[_0x21ab68(0x1d2)](_0xfd22e))};_0x2d8f25[_0x21ab68(0x1a6)]('click',_0x19d0b0=>{const _0x2d890c=_0x21ab68,_0x5d81ca=_0x19d0b0[_0x2d890c(0x1fc)][_0x2d890c(0x19d)](_0x2d890c(0x1d9));if(!_0x5d81ca)return;const _0x54a03e=_0xd37ca9[_0x5d81ca];_0x15e2ff['state'][_0x2d890c(0x1db)]=_0x218bb6[_0x2d890c(0x1c5)](),_0x4665f5(_0x54a03e),_0xb63aa9(),_0x218bb6[_0x2d890c(0x1f3)](_0x15e2ff['state'][_0x2d890c(0x1db)]),_0x218bb6[_0x2d890c(0x1b1)]();});const _0x33e356=_0x42028c['get'](_0x21ab68(0x199))||'',_0x85b93d=_0xd37ca9[_0x21ab68(0x1a4)][_0x21ab68(0x18e)][_0x21ab68(0x1e4)];let _0x46fc20=!0x0;_0x85b93d[_0x21ab68(0x197)](_0x33e356),_0x85b93d['onDidChangeContent'](()=>{const _0x324cad=_0x21ab68;_0x42028c[_0x324cad(0x196)]('workspaceXml',_0x85b93d[_0x324cad(0x1aa)]()),_0x42028c[_0x324cad(0x1c1)]();});const _0x3e374f=_0x42028c[_0x21ab68(0x20a)]('activeTab');let _0x151527,_0x15e2ff=_0xd37ca9[_0x3e374f];_0x15e2ff&&_0x4665f5(_0x15e2ff);const _0x15c9c9=addGUIControls(_0x2c29c8=>{_0x59aff8=_0x10c1f7(_0x56f048,_0x2c29c8),toolboxTestBlocksInit(_0x59aff8);const _0x3cc183=_0x59aff8['configureContextMenu'];return _0x59aff8['configureContextMenu']=(_0x18848d,_0x4aac69)=>{const _0x12b657=a0_0x5150;_0x3cc183&&_0x3cc183[_0x12b657(0x1f6)](null,_0x18848d,_0x4aac69);const _0x30f264={'text':_0x12b657(0x1e8),'enabled':_0x59aff8[_0x12b657(0x205)]()[_0x12b657(0x1df)],'callback':function(){downloadWorkspaceScreenshot(_0x59aff8);}};_0x18848d[_0x12b657(0x1da)](_0x30f264);},_0xb63aa9(),_0x59aff8['addChangeListener'](_0x4f019c=>{const _0x200976=a0_0x5150;'ui'!==_0x4f019c[_0x200976(0x1cc)]&&_0xb63aa9();}),_0x59aff8;},_0x2eeaa3,{'disableResize':!0x0,'toolboxes':_0x49b8b8[_0x21ab68(0x1a5)]||{'categories':a0_0x515c70,'simple':a0_0x18457b,'test\x20blocks':toolboxTestBlocks}}),_0x3a0725=_0x15c9c9[_0x21ab68(0x1ba)];_0x3a0725[_0x21ab68(0x1e1)](_0x3a0725[_0x21ab68(0x1c3)]),_0x3a0725[_0x21ab68(0x193)]['position']=_0x21ab68(0x209),_0x3a0725[_0x21ab68(0x193)]['minWidth']=_0x21ab68(0x1f8),_0x5a44a3[_0x21ab68(0x19f)](_0x3a0725),_0x335ae8['addEventListener']('click',_0x51353a=>{const _0x2b2d06=_0x21ab68;'none'===_0x17e25b[_0x2b2d06(0x193)][_0x2b2d06(0x1d1)]?(_0x17e25b[_0x2b2d06(0x193)][_0x2b2d06(0x1d1)]=_0x2b2d06(0x1f0),_0x335ae8[_0x2b2d06(0x1a1)]=_0x2b2d06(0x18f)):(_0x17e25b[_0x2b2d06(0x193)][_0x2b2d06(0x1d1)]=_0x2b2d06(0x1d3),_0x335ae8['textContent']=_0x2b2d06(0x1cf)),a0_0x238bfb[_0x2b2d06(0x1c7)](_0x59aff8);});const _0x50b305={'state':_0x42028c,'addAction':_0x15c9c9[_0x21ab68(0x1a9)],'addCheckboxAction':_0x15c9c9['addCheckboxAction'],'addGenerator':function(_0x1e1fef,_0x25b8ba,_0x47009a){const _0x52144d=_0x21ab68;if(!_0x1e1fef||!_0x25b8ba)throw Error(_0x52144d(0x1e3));_0xd37ca9[_0x1e1fef]=_0x185da0(_0x1e1fef,_0x47009a||_0x52144d(0x1e7),_0x4cdebf=>_0x25b8ba[_0x52144d(0x1d2)](_0x4cdebf)),_0x3e374f===_0x1e1fef&&_0x4665f5(_0xd37ca9[_0x1e1fef]);},'getCurrentTab':function(){return _0x15e2ff;},'getGUI':function(){return _0x15c9c9;},'getWorkspace':function(){return _0x59aff8;},'removeGenerator':function(_0x34ac54){const _0x3e5b6e=_0x21ab68;if(!_0x34ac54)throw Error(_0x3e5b6e(0x1d8));if(!(_0x34ac54 in _0xd37ca9))throw Error(_0x3e5b6e(0x201)+_0x34ac54);const _0x5180ea=_0xd37ca9[_0x34ac54];_0x2d8f25[_0x3e5b6e(0x1e1)](_0x5180ea[_0x3e5b6e(0x1e0)]),delete _0xd37ca9[_0x34ac54];const _0x107019=Object['keys'](_0xd37ca9);_0x3e374f===_0x34ac54&&_0x107019[_0x3e5b6e(0x1df)]&&_0x4665f5(_0xd37ca9[_0x107019[0x0]]);}};return registerTabButtons(_0x218bb6,_0x50b305,_0x4d58c9,_0xb63aa9),registerEditorCommands(_0x218bb6,_0x50b305),_0x50b305;});}function registerTabButtons(_0x149a27,_0x9e73bf,_0x40cb6d,_0x2e0a08){const _0x17ae46=a0_0x1eb031,[_0x1c069c,_0x107342]=renderCheckbox(_0x17ae46(0x202),_0x17ae46(0x1f2));_0x1c069c[_0x17ae46(0x1e9)]=_0x9e73bf[_0x17ae46(0x18e)][_0x17ae46(0x20a)](_0x17ae46(0x202)),_0x1c069c[_0x17ae46(0x1a6)](_0x17ae46(0x1c9),_0x3297a6=>{const _0x25c72d=_0x17ae46,_0x1f027b=_0x3297a6[_0x25c72d(0x1fc)];_0x9e73bf[_0x25c72d(0x18e)][_0x25c72d(0x196)]('autoGenerate',!!_0x1f027b['checked']),_0x9e73bf['state'][_0x25c72d(0x1c1)](),_0x2e0a08();}),_0x40cb6d[_0x17ae46(0x19f)](_0x1c069c),_0x40cb6d[_0x17ae46(0x19f)](_0x107342);}function registerEditorCommands(_0x21d04c,_0x2f167c){const _0x31da0f=a0_0x1eb031,_0x525d65=()=>{const _0x49551f=a0_0x5150;if(_0x49551f(0x1a4)!==_0x2f167c[_0x49551f(0x1fb)]()[_0x49551f(0x18e)]['name'])return;const _0x1c8cd4=_0x21d04c[_0x49551f(0x1bb)]()[_0x49551f(0x1aa)](),_0x36475a=_0x2f167c[_0x49551f(0x1ea)]();a0_0x238bfb[_0x49551f(0x1a3)][_0x49551f(0x1cb)](a0_0x238bfb[_0x49551f(0x1a3)][_0x49551f(0x203)](_0x1c8cd4),_0x36475a);},_0x597310=()=>{_0x2f167c['getCurrentTab']()['generate']();};_0x21d04c[_0x31da0f(0x1a9)]({'id':'import-xml','label':_0x31da0f(0x1c6),'keybindings':[window[_0x31da0f(0x1ee)]['KeyMod']['CtrlCmd']|window[_0x31da0f(0x1ee)]['KeyCode'][_0x31da0f(0x1b8)]],'precondition':'isEditorXml','contextMenuGroupId':'playground','contextMenuOrder':0x0,'run':_0x525d65}),_0x21d04c[_0x31da0f(0x1a9)]({'id':_0x31da0f(0x195),'label':'Export\x20to\x20XML','keybindings':[window[_0x31da0f(0x1ee)][_0x31da0f(0x207)][_0x31da0f(0x1f1)]|window[_0x31da0f(0x1ee)][_0x31da0f(0x1de)][_0x31da0f(0x1bf)]],'precondition':'isEditorXml','contextMenuGroupId':'playground','contextMenuOrder':0x1,'run':_0x597310}),_0x21d04c[_0x31da0f(0x1a9)]({'id':_0x31da0f(0x1bd),'label':_0x31da0f(0x1e5),'precondition':_0x31da0f(0x1b9),'contextMenuGroupId':_0x31da0f(0x1af),'contextMenuOrder':0x2,'run':()=>{const _0x5d91a5=_0x31da0f,_0xcdcf8c=_0x21d04c[_0x5d91a5(0x1bb)](),_0x82d1fe=_0xcdcf8c[_0x5d91a5(0x1aa)]()[_0x5d91a5(0x1a8)](/ (x|y|id)="[^"]*"/gim,'');_0xcdcf8c['pushEditOperations']([],[{'range':_0xcdcf8c[_0x5d91a5(0x1f7)](),'text':_0x82d1fe}],()=>null),_0x21d04c['setSelection'](new window['monaco']['Range'](0x0,0x0,0x0,0x0));}}),_0x21d04c[_0x31da0f(0x1a9)]({'id':_0x31da0f(0x1b0),'label':_0x31da0f(0x1b5),'keybindings':[window[_0x31da0f(0x1ee)][_0x31da0f(0x207)]['CtrlCmd']|window['monaco'][_0x31da0f(0x1de)][_0x31da0f(0x1bf)]],'precondition':_0x31da0f(0x1ef),'contextMenuGroupId':'playground','contextMenuOrder':0x1,'run':_0x597310}),document[_0x31da0f(0x1a6)](_0x31da0f(0x198),_0x5a2acd=>{const _0x1e2b31=_0x31da0f,_0xc01576=_0x5a2acd[_0x1e2b31(0x19c)]||_0x5a2acd[_0x1e2b31(0x1c0)];_0xc01576&&_0x5a2acd[_0x1e2b31(0x19e)]===a0_0x238bfb[_0x1e2b31(0x1f4)]['KeyCodes']['S']?(_0x597310(),_0x5a2acd[_0x1e2b31(0x1a0)]()):_0xc01576&&_0x5a2acd[_0x1e2b31(0x19e)]===a0_0x238bfb[_0x1e2b31(0x1f4)][_0x1e2b31(0x19b)]['ENTER']&&(_0x525d65(),_0x5a2acd[_0x1e2b31(0x1a0)]());});}