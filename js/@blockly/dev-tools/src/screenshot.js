/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
(function(_0x312101,_0x39c962){const _0x28d0f5=a0_0x3979,_0x3c0767=_0x312101();while(!![]){try{const _0x30c7c4=-parseInt(_0x28d0f5(0x1cc))/0x1*(parseInt(_0x28d0f5(0x1bb))/0x2)+parseInt(_0x28d0f5(0x1a9))/0x3+-parseInt(_0x28d0f5(0x1c6))/0x4*(parseInt(_0x28d0f5(0x1b8))/0x5)+parseInt(_0x28d0f5(0x19d))/0x6*(parseInt(_0x28d0f5(0x1ce))/0x7)+parseInt(_0x28d0f5(0x19b))/0x8*(-parseInt(_0x28d0f5(0x199))/0x9)+-parseInt(_0x28d0f5(0x1a2))/0xa*(-parseInt(_0x28d0f5(0x197))/0xb)+-parseInt(_0x28d0f5(0x1c5))/0xc*(-parseInt(_0x28d0f5(0x19e))/0xd);if(_0x30c7c4===_0x39c962)break;else _0x3c0767['push'](_0x3c0767['shift']());}catch(_0xa7cb70){_0x3c0767['push'](_0x3c0767['shift']());}}}(a0_0x3a5f,0x5aa82));import a0_0x35562a from'blockly/core';function svgToPng_(_0x3c1566,_0x1fa81c,_0x552ad2,_0xf639d9){const _0x491d63=a0_0x3979,_0x3583c1=document['createElement'](_0x491d63(0x1bc)),_0x230b74=_0x3583c1[_0x491d63(0x1b9)]('2d'),_0x5b018c=new Image();_0x3583c1[_0x491d63(0x1c7)]=0xa*_0x1fa81c,_0x3583c1[_0x491d63(0x1af)]=0xa*_0x552ad2,_0x5b018c[_0x491d63(0x198)]=function(){const _0x48d849=_0x491d63;_0x230b74[_0x48d849(0x1c3)](_0x5b018c,0x0,0x0,_0x1fa81c,_0x552ad2,0x0,0x0,_0x3583c1[_0x48d849(0x1c7)],_0x3583c1[_0x48d849(0x1af)]);try{const _0x1da635=_0x3583c1[_0x48d849(0x1a7)](_0x48d849(0x19f));_0xf639d9(_0x1da635);}catch(_0x5b9d99){console[_0x48d849(0x1a5)](_0x48d849(0x1c0)),_0xf639d9('');}},_0x5b018c[_0x491d63(0x1d8)]=_0x3c1566;}function a0_0x3979(_0x236416,_0x31f942){const _0x3a5f96=a0_0x3a5f();return a0_0x3979=function(_0x39791f,_0x924037){_0x39791f=_0x39791f-0x197;let _0x2b786b=_0x3a5f96[_0x39791f];return _0x2b786b;},a0_0x3979(_0x236416,_0x31f942);}function a0_0x3a5f(){const _0x5868aa=['test','warn','svg','toDataURL','cloneNode','147396AldNNV','&#160','screenshot.png','right','setAttribute','_self','height','style','filter','renderer','firstChild','xmlns','target','join','length','32810rSrSLL','getContext','indexOf','38132atdjeb','canvas','removeAttribute','bottom','getTheme','Error\x20converting\x20the\x20workspace\x20svg\x20to\x20a\x20png','transform','appendChild','drawImage','parentNode','1466664hPWebT','4aXbNjY','width','getBlocksBoundingBox','name','download','innerHTML','6qWYkmB','insertBefore','35PSBtDY','blocklySvg\x20','innerText','top','background-color:\x20transparent','viewBox','createElement','http://www.w3.org/2000/svg','left','class','src','77ygjEvf','onload','6759zdRWfA','serializeToString','608EPpUvt','value','187338yWfaDe','26DPpleY','image/png','geras','map','142390BDfYst','href'];a0_0x3a5f=function(){return _0x5868aa;};return a0_0x3a5f();}function workspaceToSvg_(_0x4cd5d,_0x1e52c4,_0x5ec76e){const _0x4561b9=a0_0x3979,_0x195e0b=document['getElementsByTagName']('textarea');for(let _0xb19d71=0x0;_0xb19d71<_0x195e0b[_0x4561b9(0x1b7)];_0xb19d71++)_0x195e0b[_0xb19d71]['innerHTML']=_0x195e0b[_0xb19d71][_0x4561b9(0x19c)];const _0x4a87c1=_0x4cd5d[_0x4561b9(0x1c8)](),_0x2398c3=_0x4a87c1['x']||_0x4a87c1[_0x4561b9(0x1d6)],_0x27575e=_0x4a87c1['y']||_0x4a87c1[_0x4561b9(0x1d1)],_0x1a2b3d=_0x4a87c1[_0x4561b9(0x1c7)]||_0x4a87c1[_0x4561b9(0x1ac)]-_0x2398c3,_0x166e63=_0x4a87c1['height']||_0x4a87c1[_0x4561b9(0x1be)]-_0x27575e,_0x9d8658=_0x4cd5d['getCanvas']()[_0x4561b9(0x1a8)](!0x0);_0x9d8658[_0x4561b9(0x1bd)](_0x4561b9(0x1c1));const _0x3fc370=document['createElementNS']('http://www.w3.org/2000/svg',_0x4561b9(0x1a6));_0x3fc370[_0x4561b9(0x1ad)](_0x4561b9(0x1b4),_0x4561b9(0x1d5)),_0x3fc370[_0x4561b9(0x1c2)](_0x9d8658),_0x3fc370[_0x4561b9(0x1ad)](_0x4561b9(0x1d3),_0x2398c3+'\x20'+_0x27575e+'\x20'+_0x1a2b3d+'\x20'+_0x166e63),_0x3fc370['setAttribute'](_0x4561b9(0x1d7),_0x4561b9(0x1cf)+(_0x4cd5d['options'][_0x4561b9(0x1b2)]||_0x4561b9(0x1a0))+'-renderer\x20'+(_0x4cd5d[_0x4561b9(0x1bf)]?_0x4cd5d['getTheme']()[_0x4561b9(0x1c9)]+'-theme':'')),_0x3fc370[_0x4561b9(0x1ad)]('width',_0x1a2b3d),_0x3fc370[_0x4561b9(0x1ad)](_0x4561b9(0x1af),_0x166e63),_0x3fc370[_0x4561b9(0x1ad)](_0x4561b9(0x1b0),_0x4561b9(0x1d2));const _0x75b5e1=[]['slice']['call'](document['head']['querySelectorAll'](_0x4561b9(0x1b0)))[_0x4561b9(0x1b1)](function(_0x2f0512){const _0x493dbd=_0x4561b9;return/\.blocklySvg/[_0x493dbd(0x1a4)](_0x2f0512[_0x493dbd(0x1d0)])||0x0===_0x2f0512['id'][_0x493dbd(0x1ba)]('blockly-');})[_0x4561b9(0x1a1)](function(_0x2ad6e4){const _0x5c34f3=_0x4561b9;return _0x2ad6e4[_0x5c34f3(0x1d0)];})[_0x4561b9(0x1b6)]('\x0a'),_0x520766=document['createElement'](_0x4561b9(0x1b0));_0x520766[_0x4561b9(0x1cb)]=_0x75b5e1+'\x0a'+_0x5ec76e,_0x3fc370[_0x4561b9(0x1cd)](_0x520766,_0x3fc370[_0x4561b9(0x1b3)]);let _0x208be7=new XMLSerializer()[_0x4561b9(0x19a)](_0x3fc370);_0x208be7=_0x208be7['replace'](/&nbsp/g,_0x4561b9(0x1aa)),svgToPng_('data:image/svg+xml,'+encodeURIComponent(_0x208be7),_0x1a2b3d,_0x166e63,_0x1e52c4);}export function downloadWorkspaceScreenshot(_0x3e2f83){workspaceToSvg_(_0x3e2f83,function(_0x504941){const _0xd03416=a0_0x3979,_0x3eca36=document[_0xd03416(0x1d4)]('a');_0x3eca36[_0xd03416(0x1ca)]=_0xd03416(0x1ab),_0x3eca36[_0xd03416(0x1b5)]=_0xd03416(0x1ae),_0x3eca36[_0xd03416(0x1a3)]=_0x504941,document['body'][_0xd03416(0x1c2)](_0x3eca36),_0x3eca36['click'](),_0x3eca36[_0xd03416(0x1c4)]['removeChild'](_0x3eca36);});}