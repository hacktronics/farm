"use strict";var arrayProto=require("@sinonjs/commons").prototypes.array,createProxy=require("./proxy"),nextTick=require("./util/core/next-tick"),slice=arrayProto.slice;function getError(r){return r instanceof Error?r:new Error(r)}var uuid=0;function wrapFunc(r){var n,t=function(){var t,e;arguments.length>0&&(t=arguments[0],e=arguments[arguments.length-1]);var u=e&&"function"==typeof e?e:void 0;return n.firstArg=t,n.lastArg=e,n.callback=u,r&&r.apply(this,arguments)};return(n=createProxy(t,r||t)).displayName="fake",n.id="fake#"+uuid++,n}function fakeClass(){var r=null;function n(r){if(arguments.length>0&&"function"!=typeof r)throw new TypeError("Expected f argument to be a Function");return wrapFunc(r)}function t(r,n){return wrapFunc(function(){var t=arguments[arguments.length-1];if("function"!=typeof t)throw new TypeError("Expected last argument to be a function");r?nextTick(function(){t.apply(null,n)}):t.apply(null,n)})}return"function"==typeof Promise&&(r=Promise),n.returns=function(r){return wrapFunc(function(){return r})},n.throws=function(r){return wrapFunc(function(){throw getError(r)})},n.resolves=function(n){return wrapFunc(function(){return r.resolve(n)})},n.rejects=function(n){return wrapFunc(function(){return r.reject(getError(n))})},n.usingPromise=function(t){return r=t,n},n.yields=function(){return t(!1,slice(arguments))},n.yieldsAsync=function(){return t(!0,slice(arguments))},n}module.exports=fakeClass();