/**
 * @license
 * Copyright 2015 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.PHP"),goog.require("Blockly.Generator"),goog.require("Blockly.inputTypes"),goog.require("Blockly.utils.object"),goog.require("Blockly.utils.string"),Blockly.PHP=new Blockly.Generator("PHP"),Blockly.PHP.addReservedWords("__halt_compiler,abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,PHP_VERSION,PHP_MAJOR_VERSION,PHP_MINOR_VERSION,PHP_RELEASE_VERSION,PHP_VERSION_ID,PHP_EXTRA_VERSION,PHP_ZTS,PHP_DEBUG,PHP_MAXPATHLEN,PHP_OS,PHP_SAPI,PHP_EOL,PHP_INT_MAX,PHP_INT_SIZE,DEFAULT_INCLUDE_PATH,PEAR_INSTALL_DIR,PEAR_EXTENSION_DIR,PHP_EXTENSION_DIR,PHP_PREFIX,PHP_BINDIR,PHP_BINARY,PHP_MANDIR,PHP_LIBDIR,PHP_DATADIR,PHP_SYSCONFDIR,PHP_LOCALSTATEDIR,PHP_CONFIG_FILE_PATH,PHP_CONFIG_FILE_SCAN_DIR,PHP_SHLIB_SUFFIX,E_ERROR,E_WARNING,E_PARSE,E_NOTICE,E_CORE_ERROR,E_CORE_WARNING,E_COMPILE_ERROR,E_COMPILE_WARNING,E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_DEPRECATED,E_USER_DEPRECATED,E_ALL,E_STRICT,__COMPILER_HALT_OFFSET__,TRUE,FALSE,NULL,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__"),Blockly.PHP.ORDER_ATOMIC=0,Blockly.PHP.ORDER_CLONE=1,Blockly.PHP.ORDER_NEW=1,Blockly.PHP.ORDER_MEMBER=2.1,Blockly.PHP.ORDER_FUNCTION_CALL=2.2,Blockly.PHP.ORDER_POWER=3,Blockly.PHP.ORDER_INCREMENT=4,Blockly.PHP.ORDER_DECREMENT=4,Blockly.PHP.ORDER_BITWISE_NOT=4,Blockly.PHP.ORDER_CAST=4,Blockly.PHP.ORDER_SUPPRESS_ERROR=4,Blockly.PHP.ORDER_INSTANCEOF=5,Blockly.PHP.ORDER_LOGICAL_NOT=6,Blockly.PHP.ORDER_UNARY_PLUS=7.1,Blockly.PHP.ORDER_UNARY_NEGATION=7.2,Blockly.PHP.ORDER_MULTIPLICATION=8.1,Blockly.PHP.ORDER_DIVISION=8.2,Blockly.PHP.ORDER_MODULUS=8.3,Blockly.PHP.ORDER_ADDITION=9.1,Blockly.PHP.ORDER_SUBTRACTION=9.2,Blockly.PHP.ORDER_STRING_CONCAT=9.3,Blockly.PHP.ORDER_BITWISE_SHIFT=10,Blockly.PHP.ORDER_RELATIONAL=11,Blockly.PHP.ORDER_EQUALITY=12,Blockly.PHP.ORDER_REFERENCE=13,Blockly.PHP.ORDER_BITWISE_AND=13,Blockly.PHP.ORDER_BITWISE_XOR=14,Blockly.PHP.ORDER_BITWISE_OR=15,Blockly.PHP.ORDER_LOGICAL_AND=16,Blockly.PHP.ORDER_LOGICAL_OR=17,Blockly.PHP.ORDER_IF_NULL=18,Blockly.PHP.ORDER_CONDITIONAL=19,Blockly.PHP.ORDER_ASSIGNMENT=20,Blockly.PHP.ORDER_LOGICAL_AND_WEAK=21,Blockly.PHP.ORDER_LOGICAL_XOR=22,Blockly.PHP.ORDER_LOGICAL_OR_WEAK=23,Blockly.PHP.ORDER_NONE=99,Blockly.PHP.ORDER_OVERRIDES=[[Blockly.PHP.ORDER_MEMBER,Blockly.PHP.ORDER_FUNCTION_CALL],[Blockly.PHP.ORDER_MEMBER,Blockly.PHP.ORDER_MEMBER],[Blockly.PHP.ORDER_LOGICAL_NOT,Blockly.PHP.ORDER_LOGICAL_NOT],[Blockly.PHP.ORDER_MULTIPLICATION,Blockly.PHP.ORDER_MULTIPLICATION],[Blockly.PHP.ORDER_ADDITION,Blockly.PHP.ORDER_ADDITION],[Blockly.PHP.ORDER_LOGICAL_AND,Blockly.PHP.ORDER_LOGICAL_AND],[Blockly.PHP.ORDER_LOGICAL_OR,Blockly.PHP.ORDER_LOGICAL_OR]],Blockly.PHP.isInitialized=!1,Blockly.PHP.init=function(_){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new Blockly.Names(this.RESERVED_WORDS_,"$"),this.nameDB_.setVariableMap(_.getVariableMap()),this.nameDB_.populateVariables(_),this.nameDB_.populateProcedures(_),this.isInitialized=!0},Blockly.PHP.finish=function(_){var l=Blockly.utils.object.values(this.definitions_);return _=Object.getPrototypeOf(this).finish.call(this,_),this.isInitialized=!1,this.nameDB_.reset(),l.join("\n\n")+"\n\n\n"+_},Blockly.PHP.scrubNakedValue=function(_){return _+";\n"},Blockly.PHP.quote_=function(_){return"'"+(_=_.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},Blockly.PHP.multiline_quote_=function(_){return _.split(/\n/g).map(this.quote_).join(' . "\\n" .\n')},Blockly.PHP.scrub_=function(_,l,R){var P="";if(!_.outputConnection||!_.outputConnection.targetConnection){var e=_.getCommentText();e&&(e=Blockly.utils.string.wrap(e,this.COMMENT_WRAP-3),P+=this.prefixLines(e,"// ")+"\n");for(var E=0;E<_.inputList.length;E++)if(_.inputList[E].type==Blockly.inputTypes.VALUE){var o=_.inputList[E].connection.targetBlock();o&&(e=this.allNestedComments(o))&&(P+=this.prefixLines(e,"// "))}}var t=_.nextConnection&&_.nextConnection.targetBlock();return P+l+(R?"":this.blockToCode(t))},Blockly.PHP.getAdjusted=function(_,l,R,P,e){var E=R||0,o=e||this.ORDER_NONE;_.workspace.options.oneBasedIndex&&E--;var t=_.workspace.options.oneBasedIndex?"1":"0";if(E>0)var O=this.valueToCode(_,l,this.ORDER_ADDITION)||t;else if(E<0)O=this.valueToCode(_,l,this.ORDER_SUBTRACTION)||t;else if(P)O=this.valueToCode(_,l,this.ORDER_UNARY_NEGATION)||t;else O=this.valueToCode(_,l,o)||t;if(Blockly.isNumber(O))O=Number(O)+E,P&&(O=-O);else{if(E>0){O=O+" + "+E;var i=this.ORDER_ADDITION}else if(E<0){O=O+" - "+-E;i=this.ORDER_SUBTRACTION}if(P){O=E?"-("+O+")":"-"+O;i=this.ORDER_UNARY_NEGATION}i=Math.floor(i),o=Math.floor(o),i&&o>=i&&(O="("+O+")")}return O};