/**
 * @license
 * Copyright 2012 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Python"),goog.require("Blockly.Generator"),goog.require("Blockly.inputTypes"),goog.require("Blockly.utils.string"),Blockly.Python=new Blockly.Generator("Python"),Blockly.Python.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),Blockly.Python.ORDER_ATOMIC=0,Blockly.Python.ORDER_COLLECTION=1,Blockly.Python.ORDER_STRING_CONVERSION=1,Blockly.Python.ORDER_MEMBER=2.1,Blockly.Python.ORDER_FUNCTION_CALL=2.2,Blockly.Python.ORDER_EXPONENTIATION=3,Blockly.Python.ORDER_UNARY_SIGN=4,Blockly.Python.ORDER_BITWISE_NOT=4,Blockly.Python.ORDER_MULTIPLICATIVE=5,Blockly.Python.ORDER_ADDITIVE=6,Blockly.Python.ORDER_BITWISE_SHIFT=7,Blockly.Python.ORDER_BITWISE_AND=8,Blockly.Python.ORDER_BITWISE_XOR=9,Blockly.Python.ORDER_BITWISE_OR=10,Blockly.Python.ORDER_RELATIONAL=11,Blockly.Python.ORDER_LOGICAL_NOT=12,Blockly.Python.ORDER_LOGICAL_AND=13,Blockly.Python.ORDER_LOGICAL_OR=14,Blockly.Python.ORDER_CONDITIONAL=15,Blockly.Python.ORDER_LAMBDA=16,Blockly.Python.ORDER_NONE=99,Blockly.Python.ORDER_OVERRIDES=[[Blockly.Python.ORDER_FUNCTION_CALL,Blockly.Python.ORDER_MEMBER],[Blockly.Python.ORDER_FUNCTION_CALL,Blockly.Python.ORDER_FUNCTION_CALL],[Blockly.Python.ORDER_MEMBER,Blockly.Python.ORDER_MEMBER],[Blockly.Python.ORDER_MEMBER,Blockly.Python.ORDER_FUNCTION_CALL],[Blockly.Python.ORDER_LOGICAL_NOT,Blockly.Python.ORDER_LOGICAL_NOT],[Blockly.Python.ORDER_LOGICAL_AND,Blockly.Python.ORDER_LOGICAL_AND],[Blockly.Python.ORDER_LOGICAL_OR,Blockly.Python.ORDER_LOGICAL_OR]],Blockly.Python.isInitialized=!1,Blockly.Python.init=function(o){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+"pass\n",this.nameDB_?this.nameDB_.reset():this.nameDB_=new Blockly.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(o.getVariableMap()),this.nameDB_.populateVariables(o),this.nameDB_.populateProcedures(o);for(var r=[],e=Blockly.Variables.allDeveloperVariables(o),t=0;t<e.length;t++)r.push(this.nameDB_.getName(e[t],Blockly.Names.DEVELOPER_VARIABLE_TYPE)+" = None");var n=Blockly.Variables.allUsedVarModels(o);for(t=0;t<n.length;t++)r.push(this.nameDB_.getName(n[t].getId(),Blockly.VARIABLE_CATEGORY_NAME)+" = None");this.definitions_.variables=r.join("\n"),this.isInitialized=!0},Blockly.Python.finish=function(o){var r=[],e=[];for(var t in this.definitions_){var n=this.definitions_[t];n.match(/^(from\s+\S+\s+)?import\s+\S+/)?r.push(n):e.push(n)}return o=Object.getPrototypeOf(this).finish.call(this,o),this.isInitialized=!1,this.nameDB_.reset(),(r.join("\n")+"\n\n"+e.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+o},Blockly.Python.scrubNakedValue=function(o){return o+"\n"},Blockly.Python.quote_=function(o){var r="'";return-1!==(o=o.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===o.indexOf('"')?r='"':o=o.replace(/'/g,"\\'")),r+o+r},Blockly.Python.multiline_quote_=function(o){return o.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")},Blockly.Python.scrub_=function(o,r,e){var t="";if(!o.outputConnection||!o.outputConnection.targetConnection){var n=o.getCommentText();n&&(n=Blockly.utils.string.wrap(n,this.COMMENT_WRAP-3),t+=this.prefixLines(n+"\n","# "));for(var i=0;i<o.inputList.length;i++)if(o.inputList[i].type==Blockly.inputTypes.VALUE){var l=o.inputList[i].connection.targetBlock();l&&(n=this.allNestedComments(l))&&(t+=this.prefixLines(n,"# "))}}var s=o.nextConnection&&o.nextConnection.targetBlock();return t+r+(e?"":this.blockToCode(s))},Blockly.Python.getAdjustedInt=function(o,r,e,t){var n=e||0;o.workspace.options.oneBasedIndex&&n--;var i=o.workspace.options.oneBasedIndex?"1":"0",l=n?this.ORDER_ADDITIVE:this.ORDER_NONE,s=this.valueToCode(o,r,l)||i;return Blockly.isNumber(s)?(s=parseInt(s,10)+n,t&&(s=-s)):(s=n>0?"int("+s+" + "+n+")":n<0?"int("+s+" - "+-n+")":"int("+s+")",t&&(s="-"+s)),s};