/**
 * @license
 * Copyright 2014 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Dart"),goog.require("Blockly.Generator"),goog.require("Blockly.inputTypes"),goog.require("Blockly.utils.string"),Blockly.Dart=new Blockly.Generator("Dart"),Blockly.Dart.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError"),Blockly.Dart.ORDER_ATOMIC=0,Blockly.Dart.ORDER_UNARY_POSTFIX=1,Blockly.Dart.ORDER_UNARY_PREFIX=2,Blockly.Dart.ORDER_MULTIPLICATIVE=3,Blockly.Dart.ORDER_ADDITIVE=4,Blockly.Dart.ORDER_SHIFT=5,Blockly.Dart.ORDER_BITWISE_AND=6,Blockly.Dart.ORDER_BITWISE_XOR=7,Blockly.Dart.ORDER_BITWISE_OR=8,Blockly.Dart.ORDER_RELATIONAL=9,Blockly.Dart.ORDER_EQUALITY=10,Blockly.Dart.ORDER_LOGICAL_AND=11,Blockly.Dart.ORDER_LOGICAL_OR=12,Blockly.Dart.ORDER_IF_NULL=13,Blockly.Dart.ORDER_CONDITIONAL=14,Blockly.Dart.ORDER_CASCADE=15,Blockly.Dart.ORDER_ASSIGNMENT=16,Blockly.Dart.ORDER_NONE=99,Blockly.Dart.isInitialized=!1,Blockly.Dart.init=function(t){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new Blockly.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(t.getVariableMap()),this.nameDB_.populateVariables(t),this.nameDB_.populateProcedures(t);for(var e=[],r=Blockly.Variables.allDeveloperVariables(t),o=0;o<r.length;o++)e.push(this.nameDB_.getName(r[o],Blockly.Names.DEVELOPER_VARIABLE_TYPE));var i=Blockly.Variables.allUsedVarModels(t);for(o=0;o<i.length;o++)e.push(this.nameDB_.getName(i[o].getId(),Blockly.VARIABLE_CATEGORY_NAME));e.length&&(this.definitions_.variables="var "+e.join(", ")+";"),this.isInitialized=!0},Blockly.Dart.finish=function(t){t&&(t=this.prefixLines(t,this.INDENT)),t="main() {\n"+t+"}";var e=[],r=[];for(var o in this.definitions_){var i=this.definitions_[o];i.match(/^import\s/)?e.push(i):r.push(i)}return t=Object.getPrototypeOf(this).finish.call(this,t),this.isInitialized=!1,this.nameDB_.reset(),(e.join("\n")+"\n\n"+r.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t},Blockly.Dart.scrubNakedValue=function(t){return t+";\n"},Blockly.Dart.quote_=function(t){return"'"+(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'"))+"'"},Blockly.Dart.multiline_quote_=function(t){return t.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")},Blockly.Dart.scrub_=function(t,e,r){var o="";if(!t.outputConnection||!t.outputConnection.targetConnection){var i=t.getCommentText();i&&(i=Blockly.utils.string.wrap(i,this.COMMENT_WRAP-3),t.getProcedureDef?o+=this.prefixLines(i+"\n","/// "):o+=this.prefixLines(i+"\n","// "));for(var n=0;n<t.inputList.length;n++)if(t.inputList[n].type==Blockly.inputTypes.VALUE){var l=t.inputList[n].connection.targetBlock();l&&(i=this.allNestedComments(l))&&(o+=this.prefixLines(i,"// "))}}var a=t.nextConnection&&t.nextConnection.targetBlock();return o+e+(r?"":this.blockToCode(a))},Blockly.Dart.getAdjusted=function(t,e,r,o,i){var n=r||0,l=i||this.ORDER_NONE;t.workspace.options.oneBasedIndex&&n--;var a=t.workspace.options.oneBasedIndex?"1":"0";if(n)var s=this.valueToCode(t,e,this.ORDER_ADDITIVE)||a;else if(o)s=this.valueToCode(t,e,this.ORDER_UNARY_PREFIX)||a;else s=this.valueToCode(t,e,l)||a;if(Blockly.isNumber(s))s=parseInt(s,10)+n,o&&(s=-s);else{if(n>0){s=s+" + "+n;var c=this.ORDER_ADDITIVE}else if(n<0){s=s+" - "+-n;c=this.ORDER_ADDITIVE}if(o){s=n?"-("+s+")":"-"+s;c=this.ORDER_UNARY_PREFIX}c=Math.floor(c),l=Math.floor(l),c&&l>=c&&(s="("+s+")")}return s};