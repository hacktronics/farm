/**
 * @license
 * Copyright 2012 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Python.procedures"),goog.require("Blockly.Python"),Blockly.Python.procedures_defreturn=function(o){for(var l,n=[],e=o.workspace,y=Blockly.Variables.allUsedVarModels(e)||[],t=0;l=y[t];t++){var c=l.name;-1==o.getVars().indexOf(c)&&n.push(Blockly.Python.nameDB_.getName(c,Blockly.VARIABLE_CATEGORY_NAME))}var r=Blockly.Variables.allDeveloperVariables(e);for(t=0;t<r.length;t++)n.push(Blockly.Python.nameDB_.getName(r[t],Blockly.Names.DEVELOPER_VARIABLE_TYPE));n=n.length?Blockly.Python.INDENT+"global "+n.join(", ")+"\n":"";var B=Blockly.Python.nameDB_.getName(o.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),P="";Blockly.Python.STATEMENT_PREFIX&&(P+=Blockly.Python.injectId(Blockly.Python.STATEMENT_PREFIX,o)),Blockly.Python.STATEMENT_SUFFIX&&(P+=Blockly.Python.injectId(Blockly.Python.STATEMENT_SUFFIX,o)),P&&(P=Blockly.Python.prefixLines(P,Blockly.Python.INDENT));var k="";Blockly.Python.INFINITE_LOOP_TRAP&&(k=Blockly.Python.prefixLines(Blockly.Python.injectId(Blockly.Python.INFINITE_LOOP_TRAP,o),Blockly.Python.INDENT));var h=Blockly.Python.statementToCode(o,"STACK"),E=Blockly.Python.valueToCode(o,"RETURN",Blockly.Python.ORDER_NONE)||"",N="";h&&E&&(N=P),E?E=Blockly.Python.INDENT+"return "+E+"\n":h||(h=Blockly.Python.PASS);var a=[];for(y=o.getVars(),t=0;t<y.length;t++)a[t]=Blockly.Python.nameDB_.getName(y[t],Blockly.VARIABLE_CATEGORY_NAME);var T="def "+B+"("+a.join(", ")+"):\n"+n+P+k+h+N+E;return T=Blockly.Python.scrub_(o,T),Blockly.Python.definitions_["%"+B]=T,null},Blockly.Python.procedures_defnoreturn=Blockly.Python.procedures_defreturn,Blockly.Python.procedures_callreturn=function(o){for(var l=Blockly.Python.nameDB_.getName(o.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),n=[],e=o.getVars(),y=0;y<e.length;y++)n[y]=Blockly.Python.valueToCode(o,"ARG"+y,Blockly.Python.ORDER_NONE)||"None";return[l+"("+n.join(", ")+")",Blockly.Python.ORDER_FUNCTION_CALL]},Blockly.Python.procedures_callnoreturn=function(o){return Blockly.Python.procedures_callreturn(o)[0]+"\n"},Blockly.Python.procedures_ifreturn=function(o){var l="if "+(Blockly.Python.valueToCode(o,"CONDITION",Blockly.Python.ORDER_NONE)||"False")+":\n";if(Blockly.Python.STATEMENT_SUFFIX&&(l+=Blockly.Python.prefixLines(Blockly.Python.injectId(Blockly.Python.STATEMENT_SUFFIX,o),Blockly.Python.INDENT)),o.hasReturnValue_){var n=Blockly.Python.valueToCode(o,"VALUE",Blockly.Python.ORDER_NONE)||"None";l+=Blockly.Python.INDENT+"return "+n+"\n"}else l+=Blockly.Python.INDENT+"return\n";return l};