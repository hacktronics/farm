/**
 * @license
 * Copyright 2016 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Lua.procedures"),goog.require("Blockly.Lua"),Blockly.Lua.procedures_defreturn=function(l){var e=Blockly.Lua.nameDB_.getName(l.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),u="";Blockly.Lua.STATEMENT_PREFIX&&(u+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_PREFIX,l)),Blockly.Lua.STATEMENT_SUFFIX&&(u+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_SUFFIX,l)),u&&(u=Blockly.Lua.prefixLines(u,Blockly.Lua.INDENT));var o="";Blockly.Lua.INFINITE_LOOP_TRAP&&(o=Blockly.Lua.prefixLines(Blockly.Lua.injectId(Blockly.Lua.INFINITE_LOOP_TRAP,l),Blockly.Lua.INDENT));var a=Blockly.Lua.statementToCode(l,"STACK"),c=Blockly.Lua.valueToCode(l,"RETURN",Blockly.Lua.ORDER_NONE)||"",r="";a&&c&&(r=u),c?c=Blockly.Lua.INDENT+"return "+c+"\n":a||(a="");for(var n=[],B=l.getVars(),L=0;L<B.length;L++)n[L]=Blockly.Lua.nameDB_.getName(B[L],Blockly.VARIABLE_CATEGORY_NAME);var k="function "+e+"("+n.join(", ")+")\n"+u+o+a+r+c+"end\n";return k=Blockly.Lua.scrub_(l,k),Blockly.Lua.definitions_["%"+e]=k,null},Blockly.Lua.procedures_defnoreturn=Blockly.Lua.procedures_defreturn,Blockly.Lua.procedures_callreturn=function(l){for(var e=Blockly.Lua.nameDB_.getName(l.getFieldValue("NAME"),Blockly.PROCEDURE_CATEGORY_NAME),u=[],o=l.getVars(),a=0;a<o.length;a++)u[a]=Blockly.Lua.valueToCode(l,"ARG"+a,Blockly.Lua.ORDER_NONE)||"nil";return[e+"("+u.join(", ")+")",Blockly.Lua.ORDER_HIGH]},Blockly.Lua.procedures_callnoreturn=function(l){return Blockly.Lua.procedures_callreturn(l)[0]+"\n"},Blockly.Lua.procedures_ifreturn=function(l){var e="if "+(Blockly.Lua.valueToCode(l,"CONDITION",Blockly.Lua.ORDER_NONE)||"false")+" then\n";if(Blockly.Lua.STATEMENT_SUFFIX&&(e+=Blockly.Lua.prefixLines(Blockly.Lua.injectId(Blockly.Lua.STATEMENT_SUFFIX,l),Blockly.Lua.INDENT)),l.hasReturnValue_){var u=Blockly.Lua.valueToCode(l,"VALUE",Blockly.Lua.ORDER_NONE)||"nil";e+=Blockly.Lua.INDENT+"return "+u+"\n"}else e+=Blockly.Lua.INDENT+"return\n";return e+="end\n"};