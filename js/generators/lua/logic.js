/**
 * @license
 * Copyright 2016 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";goog.provide("Blockly.Lua.logic"),goog.require("Blockly.Lua"),Blockly.Lua.controls_if=function(l){var o,u,a=0,e="";Blockly.Lua.STATEMENT_PREFIX&&(e+=Blockly.Lua.injectId(Blockly.Lua.STATEMENT_PREFIX,l));do{u=Blockly.Lua.valueToCode(l,"IF"+a,Blockly.Lua.ORDER_NONE)||"false",o=Blockly.Lua.statementToCode(l,"DO"+a),Blockly.Lua.STATEMENT_SUFFIX&&(o=Blockly.Lua.prefixLines(Blockly.Lua.injectId(Blockly.Lua.STATEMENT_SUFFIX,l),Blockly.Lua.INDENT)+o),e+=(a>0?"else":"")+"if "+u+" then\n"+o,++a}while(l.getInput("IF"+a));return(l.getInput("ELSE")||Blockly.Lua.STATEMENT_SUFFIX)&&(o=Blockly.Lua.statementToCode(l,"ELSE"),Blockly.Lua.STATEMENT_SUFFIX&&(o=Blockly.Lua.prefixLines(Blockly.Lua.injectId(Blockly.Lua.STATEMENT_SUFFIX,l),Blockly.Lua.INDENT)+o),e+="else\n"+o),e+"end\n"},Blockly.Lua.controls_ifelse=Blockly.Lua.controls_if,Blockly.Lua.logic_compare=function(l){var o={EQ:"==",NEQ:"~=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")];return[(Blockly.Lua.valueToCode(l,"A",Blockly.Lua.ORDER_RELATIONAL)||"0")+" "+o+" "+(Blockly.Lua.valueToCode(l,"B",Blockly.Lua.ORDER_RELATIONAL)||"0"),Blockly.Lua.ORDER_RELATIONAL]},Blockly.Lua.logic_operation=function(l){var o="AND"==l.getFieldValue("OP")?"and":"or",u="and"==o?Blockly.Lua.ORDER_AND:Blockly.Lua.ORDER_OR,a=Blockly.Lua.valueToCode(l,"A",u),e=Blockly.Lua.valueToCode(l,"B",u);if(a||e){var c="and"==o?"true":"false";a||(a=c),e||(e=c)}else a="false",e="false";return[a+" "+o+" "+e,u]},Blockly.Lua.logic_negate=function(l){return["not "+(Blockly.Lua.valueToCode(l,"BOOL",Blockly.Lua.ORDER_UNARY)||"true"),Blockly.Lua.ORDER_UNARY]},Blockly.Lua.logic_boolean=function(l){return["TRUE"==l.getFieldValue("BOOL")?"true":"false",Blockly.Lua.ORDER_ATOMIC]},Blockly.Lua.logic_null=function(l){return["nil",Blockly.Lua.ORDER_ATOMIC]},Blockly.Lua.logic_ternary=function(l){return[(Blockly.Lua.valueToCode(l,"IF",Blockly.Lua.ORDER_AND)||"false")+" and "+(Blockly.Lua.valueToCode(l,"THEN",Blockly.Lua.ORDER_AND)||"nil")+" or "+(Blockly.Lua.valueToCode(l,"ELSE",Blockly.Lua.ORDER_OR)||"nil"),Blockly.Lua.ORDER_OR]};