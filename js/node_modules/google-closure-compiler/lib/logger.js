"use strict";const ESC="",COLOR_END="[0m",COLOR_RED="[91m",COLOR_GREEN="[92m",COLOR_YELLOW="[93m",fs=require("fs");function caretPrefix(r,n){return r.substr(0,n).replace(/[^\t]/g," ")}module.exports=function(r,n=[],e=console.warn){function t(r,t){!t.file&&t.lineNo<0?e(t.type):e(`${t.file}:${t.lineNo} (${t.type})`),e(t.description);const i=function(r){if(!r)return null;const e=n.find(n=>n.path===r);if(e)return e;try{return{path:r,src:fs.readFileSync(r,"utf8")}}catch(r){}return null}(t.file);if(i){const n=i.src.split("\n")[t.lineNo-1]||"";e(r+n+"[0m"),e("[92m"+caretPrefix(n,t.charNo)+"^[0m")}e("")}return r.warnings.forEach(t.bind(null,"[93m")),r.errors.forEach(t.bind(null,"[91m")),r.errors.length>0};