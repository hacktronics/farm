"use strict";const path=require("path"),contribPath=path.resolve(__dirname,"../../contrib"),jscomp=require("google-closure-compiler-js"),CONSOLE_COLOR_CHARS=/\u001B\[\d+m/gu;class CompilerJS{constructor(r){if(this.flags={},Array.isArray(r))r.forEach(r=>{const e=r.split("="),s=this.formatArgument(e[0],e[1]);this.flags[s.key]=s.val});else for(let e in r){const s=this.formatArgument(e,r[e]);this.flags[s.key]=s.val}}run(r,e){const s=jscomp(this.flags,r);if(s.warnings=[].slice.call(s.warnings),s.errors=[].slice.call(s.errors),e){const t=[];require("../logger")(s,r,r=>{t.push(r.replace(CONSOLE_COLOR_CHARS,""))}),e(0===t.length?0:1,s.compiledFiles,t.join("\n\n"))}return s}formatArgument(r,e){let s=r.replace(/_(\w)/g,r=>r[1].toUpperCase());return s=s.replace(/^--/,""),{key:s,val:null==e||e}}}CompilerJS.CONTRIB_PATH=contribPath,module.exports=CompilerJS;