goog.provide("goog.positioning.ViewportClientPosition"),goog.require("goog.dom"),goog.require("goog.math.Coordinate"),goog.require("goog.positioning"),goog.require("goog.positioning.ClientPosition"),goog.require("goog.positioning.Overflow"),goog.require("goog.positioning.OverflowStatus"),goog.require("goog.style"),goog.positioning.ViewportClientPosition=function(o,i){goog.positioning.ClientPosition.call(this,o,i)},goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition),goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0,goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(o){this.lastResortOverflow_=o},goog.positioning.ViewportClientPosition.prototype.reposition=function(o,i,t,g){var n=goog.style.getClientViewportElement(o),e=goog.style.getVisibleRectForElement(n),s=goog.dom.getDomHelper(o).getDocumentScrollElement(),r=new goog.math.Coordinate(this.coordinate.x+s.scrollLeft,this.coordinate.y+s.scrollTop),l=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,p=i,a=goog.positioning.positionAtCoordinate(r,o,p,t,e,l,g);0!=(a&goog.positioning.OverflowStatus.FAILED)&&((a&goog.positioning.OverflowStatus.FAILED_LEFT||a&goog.positioning.OverflowStatus.FAILED_RIGHT)&&(p=goog.positioning.flipCornerHorizontal(p)),(a&goog.positioning.OverflowStatus.FAILED_TOP||a&goog.positioning.OverflowStatus.FAILED_BOTTOM)&&(p=goog.positioning.flipCornerVertical(p)),0!=((a=goog.positioning.positionAtCoordinate(r,o,p,t,e,l,g))&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(r,o,i,t,e,this.lastResortOverflow_,g))};