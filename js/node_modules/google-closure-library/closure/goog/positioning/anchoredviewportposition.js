goog.provide("goog.positioning.AnchoredViewportPosition"),goog.require("goog.positioning"),goog.require("goog.positioning.AnchoredPosition"),goog.require("goog.positioning.Overflow"),goog.require("goog.positioning.OverflowStatus"),goog.positioning.AnchoredViewportPosition=function(o,i,t,n){goog.positioning.AnchoredPosition.call(this,o,i),this.lastResortOverflow_=t?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE,this.overflowConstraint_=n||void 0},goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition),goog.positioning.AnchoredViewportPosition.prototype.getOverflowConstraint=function(){return this.overflowConstraint_},goog.positioning.AnchoredViewportPosition.prototype.setOverflowConstraint=function(o){this.overflowConstraint_=o},goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_},goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(o){this.lastResortOverflow_=o},goog.positioning.AnchoredViewportPosition.prototype.reposition=function(o,i,t,n){var r=goog.positioning.positionAtAnchor(this.element,this.corner,o,i,null,t,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,n,this.overflowConstraint_);if(r&goog.positioning.OverflowStatus.FAILED){var g=this.adjustCorner(r,this.corner),s=this.adjustCorner(r,i);(r=goog.positioning.positionAtAnchor(this.element,g,o,s,null,t,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,n,this.overflowConstraint_))&goog.positioning.OverflowStatus.FAILED&&(g=this.adjustCorner(r,g),s=this.adjustCorner(r,s),goog.positioning.positionAtAnchor(this.element,g,o,s,null,t,this.getLastResortOverflow(),n,this.overflowConstraint_))}},goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(o,i){return o&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(i=goog.positioning.flipCornerHorizontal(i)),o&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(i=goog.positioning.flipCornerVertical(i)),i};