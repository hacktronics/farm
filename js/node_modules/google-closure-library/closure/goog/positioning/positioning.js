goog.provide("goog.positioning"),goog.provide("goog.positioning.Corner"),goog.provide("goog.positioning.CornerBit"),goog.provide("goog.positioning.Overflow"),goog.provide("goog.positioning.OverflowStatus"),goog.require("goog.asserts"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.math.Coordinate"),goog.require("goog.math.Rect"),goog.require("goog.math.Size"),goog.require("goog.style"),goog.require("goog.style.bidi"),goog.positioning.CornerBit={BOTTOM:1,CENTER:2,RIGHT:4,FLIP_RTL:8},goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:goog.positioning.CornerBit.RIGHT,BOTTOM_LEFT:goog.positioning.CornerBit.BOTTOM,BOTTOM_RIGHT:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT,TOP_START:goog.positioning.CornerBit.FLIP_RTL,TOP_END:goog.positioning.CornerBit.FLIP_RTL|goog.positioning.CornerBit.RIGHT,BOTTOM_START:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.FLIP_RTL,BOTTOM_END:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT|goog.positioning.CornerBit.FLIP_RTL,TOP_CENTER:goog.positioning.CornerBit.CENTER,BOTTOM_CENTER:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.CENTER},goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132},goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256},goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT,goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM,goog.positioning.positionAtAnchor=function(o,i,g,t,n,e,r,s,T){goog.asserts.assert(g);var p=goog.positioning.getOffsetParentPageOffset(g),O=goog.positioning.getVisiblePart_(o);goog.style.translateRectForAnotherFrame(O,goog.dom.getDomHelper(o),goog.dom.getDomHelper(g));var a=goog.positioning.getEffectiveCorner(o,i),E=O.left;a&goog.positioning.CornerBit.RIGHT?E+=O.width:a&goog.positioning.CornerBit.CENTER&&(E+=O.width/2);var f,l=new goog.math.Coordinate(E,O.top+(a&goog.positioning.CornerBit.BOTTOM?O.height:0));return l=goog.math.Coordinate.difference(l,p),n&&(l.x+=(a&goog.positioning.CornerBit.RIGHT?-1:1)*n.x,l.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*n.y),r&&(T?f=T:(f=goog.style.getVisibleRectForElement(g))&&(f.top-=p.y,f.right-=p.x,f.bottom-=p.y,f.left-=p.x)),goog.positioning.positionAtCoordinate(l,g,t,e,f,r,s)},goog.positioning.getOffsetParentPageOffset=function(o){var i,g=o.offsetParent;if(g){var t=g.tagName==goog.dom.TagName.HTML||g.tagName==goog.dom.TagName.BODY;t&&"static"==goog.style.getComputedPosition(g)||(i=goog.style.getPageOffset(g),t||(i=goog.math.Coordinate.difference(i,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(g),g.scrollTop))))}return i||new goog.math.Coordinate},goog.positioning.getVisiblePart_=function(o){var i=goog.style.getBounds(o),g=goog.style.getVisibleRectForElement(o);return g&&i.intersection(goog.math.Rect.createFromBox(g)),i},goog.positioning.positionAtCoordinate=function(o,i,g,t,n,e,r){o=o.clone();var s=goog.positioning.getEffectiveCorner(i,g),T=goog.style.getSize(i),p=r?r.clone():T.clone(),O=goog.positioning.getPositionAtCoordinate(o,p,s,t,n,e);return O.status&goog.positioning.OverflowStatus.FAILED||(goog.style.setPosition(i,O.rect.getTopLeft()),p=O.rect.getSize(),goog.math.Size.equals(T,p)||goog.style.setBorderBoxSize(i,p)),O.status},goog.positioning.getPositionAtCoordinate=function(o,i,g,t,n,e){o=o.clone(),i=i.clone();var r=goog.positioning.OverflowStatus.NONE;(t||g!=goog.positioning.Corner.TOP_LEFT)&&(g&goog.positioning.CornerBit.RIGHT?o.x-=i.width+(t?t.right:0):g&goog.positioning.CornerBit.CENTER?o.x-=i.width/2:t&&(o.x+=t.left),g&goog.positioning.CornerBit.BOTTOM?o.y-=i.height+(t?t.bottom:0):t&&(o.y+=t.top)),e&&(r=n?goog.positioning.adjustForViewport_(o,i,n,e):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT);var s=new goog.math.Rect(0,0,0,0);return s.left=o.x,s.top=o.y,s.width=i.width,s.height=i.height,{rect:s,status:r}},goog.positioning.adjustForViewport_=function(o,i,g,t){var n=goog.positioning.OverflowStatus.NONE,e=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,r=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;if((t&e)==e&&(o.x<g.left||o.x>=g.right)&&(t&=~goog.positioning.Overflow.ADJUST_X),(t&r)==r&&(o.y<g.top||o.y>=g.bottom)&&(t&=~goog.positioning.Overflow.ADJUST_Y),o.x<g.left&&t&goog.positioning.Overflow.ADJUST_X&&(o.x=g.left,n|=goog.positioning.OverflowStatus.ADJUSTED_X),t&goog.positioning.Overflow.RESIZE_WIDTH){var s=o.x;o.x<g.left&&(o.x=g.left,n|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED),o.x+i.width>g.right&&(i.width=Math.min(g.right-o.x,s+i.width-g.left),i.width=Math.max(i.width,0),n|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED)}if(o.x+i.width>g.right&&t&goog.positioning.Overflow.ADJUST_X&&(o.x=Math.max(g.right-i.width,g.left),n|=goog.positioning.OverflowStatus.ADJUSTED_X),t&goog.positioning.Overflow.FAIL_X&&(n|=(o.x<g.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(o.x+i.width>g.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0)),o.y<g.top&&t&goog.positioning.Overflow.ADJUST_Y&&(o.y=g.top,n|=goog.positioning.OverflowStatus.ADJUSTED_Y),t&goog.positioning.Overflow.RESIZE_HEIGHT){var T=o.y;o.y<g.top&&(o.y=g.top,n|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),o.y+i.height>g.bottom&&(i.height=Math.min(g.bottom-o.y,T+i.height-g.top),i.height=Math.max(i.height,0),n|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED)}return o.y+i.height>g.bottom&&t&goog.positioning.Overflow.ADJUST_Y&&(o.y=Math.max(g.bottom-i.height,g.top),n|=goog.positioning.OverflowStatus.ADJUSTED_Y),t&goog.positioning.Overflow.FAIL_Y&&(n|=(o.y<g.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(o.y+i.height>g.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0)),n},goog.positioning.getEffectiveCorner=function(o,i){return(i&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(o)?i^goog.positioning.CornerBit.RIGHT:i)&~goog.positioning.CornerBit.FLIP_RTL},goog.positioning.flipCornerHorizontal=function(o){return o^goog.positioning.CornerBit.RIGHT},goog.positioning.flipCornerVertical=function(o){return o^goog.positioning.CornerBit.BOTTOM},goog.positioning.flipCorner=function(o){return o^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};