goog.provide("goog.dom.pattern.ChildMatches"),goog.require("goog.dom.pattern.AllChildren"),goog.require("goog.dom.pattern.MatchType"),goog.dom.pattern.ChildMatches=function(t,e){this.childPattern_=t,this.matches=[],this.minimumMatches_=e||0,this.needsReset_=!1,goog.dom.pattern.ChildMatches.base(this,"constructor")},goog.inherits(goog.dom.pattern.ChildMatches,goog.dom.pattern.AllChildren),goog.dom.pattern.ChildMatches.prototype.matchToken=function(t,e){this.needsReset_&&this.reset();var o=goog.dom.pattern.AllChildren.prototype.matchToken.apply(this,arguments);switch(o){case goog.dom.pattern.MatchType.MATCHING:var h=!1;switch(this.childPattern_.matchToken(t,e)){case goog.dom.pattern.MatchType.BACKTRACK_MATCH:h=!0;case goog.dom.pattern.MatchType.MATCH:this.matches.push(this.childPattern_.matchedNode)}return h&&this.childPattern_.matchToken(t,e)==goog.dom.pattern.MatchType.MATCH&&this.matches.push(this.childPattern_.matchedNode),goog.dom.pattern.MatchType.MATCHING;case goog.dom.pattern.MatchType.BACKTRACK_MATCH:return this.needsReset_=!0,this.matches.length>=this.minimumMatches_?goog.dom.pattern.MatchType.BACKTRACK_MATCH:goog.dom.pattern.MatchType.NO_MATCH;default:return this.needsReset_=!0,o}},goog.dom.pattern.ChildMatches.prototype.reset=function(){this.needsReset_=!1,this.matches.length=0,this.childPattern_.reset(),goog.dom.pattern.AllChildren.prototype.reset.call(this)};