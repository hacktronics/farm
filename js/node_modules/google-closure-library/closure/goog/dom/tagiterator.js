goog.provide("goog.dom.TagIterator"),goog.provide("goog.dom.TagWalkType"),goog.require("goog.dom"),goog.require("goog.dom.NodeType"),goog.require("goog.iter.Iterator"),goog.require("goog.iter.StopIteration"),goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1},goog.dom.TagIterator=function(o,t,e,g,r){this.reversed=!!t,this.node=null,this.tagType=goog.dom.TagWalkType.OTHER,this.depth,this.started_=!1,this.constrained=!e,o&&this.setPosition(o,g),this.depth=null!=r?r:this.tagType||0,this.reversed&&(this.depth*=-1)},goog.inherits(goog.dom.TagIterator,goog.iter.Iterator),goog.dom.TagIterator.prototype.setPosition=function(o,t,e){this.node=o,o&&(this.tagType="number"==typeof t?t:this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG),"number"==typeof e&&(this.depth=e)},goog.dom.TagIterator.prototype.copyFrom=function(o){this.node=o.node,this.tagType=o.tagType,this.depth=o.depth,this.reversed=o.reversed,this.constrained=o.constrained},goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)},goog.dom.TagIterator.prototype.skipTag=function(){var o=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==o&&(this.tagType=-1*o,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.restartTag=function(){var o=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==o&&(this.tagType=-1*o,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.next=function(){var o;if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;o=this.node;var t=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==t){var e=this.reversed?o.lastChild:o.firstChild;e?this.setPosition(e):this.setPosition(o,-1*t)}else{var g=this.reversed?o.previousSibling:o.nextSibling;g?this.setPosition(g):this.setPosition(o.parentNode,-1*t)}this.depth+=this.tagType*(this.reversed?-1:1)}else this.started_=!0;if(o=this.node,!this.node)throw goog.iter.StopIteration;return o},goog.dom.TagIterator.prototype.isStarted=function(){return this.started_},goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG},goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG},goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER},goog.dom.TagIterator.prototype.equals=function(o){return o.node==this.node&&(!this.node||o.tagType==this.tagType)},goog.dom.TagIterator.prototype.splice=function(o){var t=this.node;this.restartTag(),this.reversed=!this.reversed,goog.dom.TagIterator.prototype.next.call(this),this.reversed=!this.reversed;for(var e=goog.isArrayLike(arguments[0])?arguments[0]:arguments,g=e.length-1;g>=0;g--)goog.dom.insertSiblingAfter(e[g],t);goog.dom.removeNode(t)};