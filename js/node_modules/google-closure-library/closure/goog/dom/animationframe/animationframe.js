goog.provide("goog.dom.animationFrame"),goog.provide("goog.dom.animationFrame.Spec"),goog.provide("goog.dom.animationFrame.State"),goog.require("goog.dom.animationFrame.polyfill"),goog.dom.animationFrame.polyfill.install(),goog.dom.animationFrame.Task_,goog.dom.animationFrame.TaskSet_,goog.dom.animationFrame.Spec,goog.dom.animationFrame.State=function(){},goog.dom.animationFrame.tasks_=[[],[]],goog.dom.animationFrame.doubleBufferIndex_=0,goog.dom.animationFrame.requestedFrame_=!1,goog.dom.animationFrame.taskId_=0,goog.dom.animationFrame.running_=!1,goog.dom.animationFrame.createTask=function(o,a){var n=goog.dom.animationFrame.taskId_++,e={measureTask:{id:n,fn:o.measure,context:a},mutateTask:{id:n,fn:o.mutate,context:a},state:{},args:void 0,isScheduled:!1};return function(){(arguments.length>0?(e.args||(e.args=[]),e.args.length=0,e.args.push.apply(e.args,arguments),e.args.push(e.state)):e.args&&0!=e.args.length?(e.args[0]=e.state,e.args.length=1):e.args=[e.state],e.isScheduled)||(e.isScheduled=!0,goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_].push(e));goog.dom.animationFrame.requestAnimationFrame_()}},goog.dom.animationFrame.runTasks_=function(){goog.dom.animationFrame.running_=!0,goog.dom.animationFrame.requestedFrame_=!1;var o,a=goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_],n=a.length;goog.dom.animationFrame.doubleBufferIndex_=(goog.dom.animationFrame.doubleBufferIndex_+1)%2;for(var e=0;e<n;++e){var m=(o=a[e]).measureTask;o.isScheduled=!1,m.fn&&m.fn.apply(m.context,o.args)}for(e=0;e<n;++e){var i=(o=a[e]).mutateTask;o.isScheduled=!1,i.fn&&i.fn.apply(i.context,o.args),o.state={}}a.length=0,goog.dom.animationFrame.running_=!1},goog.dom.animationFrame.isRunning=function(){return goog.dom.animationFrame.running_},goog.dom.animationFrame.requestAnimationFrame_=function(){goog.dom.animationFrame.requestedFrame_||(goog.dom.animationFrame.requestedFrame_=!0,window.requestAnimationFrame(goog.dom.animationFrame.runTasks_))};