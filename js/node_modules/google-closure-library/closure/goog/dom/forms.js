goog.provide("goog.dom.forms"),goog.require("goog.dom.InputType"),goog.require("goog.dom.TagName"),goog.require("goog.dom.safe"),goog.require("goog.structs.Map"),goog.require("goog.window"),goog.dom.forms.submitFormInNewWindow=function(o,e){var t=goog.dom.forms.getFormDataMap(o),r=o.action,g=o.method;if(e){if(goog.dom.InputType.SUBMIT!=e.type.toLowerCase())throw new Error("opt_submitElement does not have a valid type.");var m=goog.dom.forms.getValue(e);null!=m&&goog.dom.forms.addFormDataToMap_(t,e.name,m),e.getAttribute("formaction")&&(r=e.getAttribute("formaction")),e.getAttribute("formmethod")&&(g=e.getAttribute("formmethod"))}return goog.dom.forms.submitFormDataInNewWindow(r,g,t)},goog.dom.forms.submitFormDataInNewWindow=function(o,e,t){var r=goog.window.openBlank("",{noreferrer:!0});if(!r)return!1;var g=r.document,m=g.createElement("form");return m.method=e,goog.dom.safe.setFormElementAction(m,o),t.forEach(function(o,e){for(var t=0;t<o.length;t++){var r=o[t],n=g.createElement("input");n.name=e,n.value=r,n.type="hidden",HTMLFormElement.prototype.appendChild.call(m,n)}}),HTMLFormElement.prototype.submit.call(m),!0},goog.dom.forms.getFormDataMap=function(o){var e=new goog.structs.Map;return goog.dom.forms.getFormDataHelper_(o,e,goog.dom.forms.addFormDataToMap_),e},goog.dom.forms.getFormDataString=function(o){var e=[];return goog.dom.forms.getFormDataHelper_(o,e,goog.dom.forms.addFormDataToStringBuffer_),e.join("&")},goog.dom.forms.getFormDataHelper_=function(o,e,t){for(var r,g=o.elements,m=0;r=g.item(m);m++)if(r.form==o&&!r.disabled&&r.tagName!=goog.dom.TagName.FIELDSET){var n=r.name;switch(r.type.toLowerCase()){case goog.dom.InputType.FILE:case goog.dom.InputType.SUBMIT:case goog.dom.InputType.RESET:case goog.dom.InputType.BUTTON:break;case goog.dom.InputType.SELECT_MULTIPLE:var a=goog.dom.forms.getValue(r);if(null!=a)for(var u=0;d=a[u];u++)t(e,n,d);break;default:var d;null!=(d=goog.dom.forms.getValue(r))&&t(e,n,d)}}var s,f=o.getElementsByTagName(String(goog.dom.TagName.INPUT));for(m=0;s=f[m];m++)s.form==o&&s.type.toLowerCase()==goog.dom.InputType.IMAGE&&(t(e,n=s.name,s.value),t(e,n+".x","0"),t(e,n+".y","0"))},goog.dom.forms.addFormDataToMap_=function(o,e,t){var r=o.get(e);r||(r=[],o.set(e,r)),r.push(t)},goog.dom.forms.addFormDataToStringBuffer_=function(o,e,t){o.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},goog.dom.forms.hasFileInput=function(o){for(var e,t=o.elements,r=0;e=t[r];r++)if(!e.disabled&&e.type&&e.type.toLowerCase()==goog.dom.InputType.FILE)return!0;return!1},goog.dom.forms.setDisabled=function(o,e){if(o.tagName==goog.dom.TagName.FORM)for(var t=o.elements,r=0;o=t.item(r);r++)goog.dom.forms.setDisabled(o,e);else 1==e&&o.blur(),o.disabled=e},goog.dom.forms.focusAndSelect=function(o){o.focus(),o.select&&o.select()},goog.dom.forms.hasValue=function(o){return!!goog.dom.forms.getValue(o)},goog.dom.forms.hasValueByName=function(o,e){return!!goog.dom.forms.getValueByName(o,e)},goog.dom.forms.getValue=function(o){var e=o.type;if("string"==typeof e){var t=o;switch(e.toLowerCase()){case goog.dom.InputType.CHECKBOX:case goog.dom.InputType.RADIO:return goog.dom.forms.getInputChecked_(t);case goog.dom.InputType.SELECT_ONE:return goog.dom.forms.getSelectSingle_(t);case goog.dom.InputType.SELECT_MULTIPLE:return goog.dom.forms.getSelectMultiple_(t)}}return null!=o.value?o.value:null},goog.dom.forms.getValueByName=function(o,e){var t=o.elements[e];if(t){if(t.type)return goog.dom.forms.getValue(t);for(var r=0;r<t.length;r++){var g=goog.dom.forms.getValue(t[r]);if(g)return g}return null}return null},goog.dom.forms.getInputChecked_=function(o){return o.checked?o.value:null},goog.dom.forms.getSelectSingle_=function(o){var e=o.selectedIndex;return e>=0?o.options[e].value:null},goog.dom.forms.getSelectMultiple_=function(o){for(var e,t=[],r=0;e=o.options[r];r++)e.selected&&t.push(e.value);return t.length?t:null},goog.dom.forms.setValue=function(o,e){var t=o.type;switch("string"==typeof t&&t.toLowerCase()){case goog.dom.InputType.CHECKBOX:case goog.dom.InputType.RADIO:return void goog.dom.forms.setInputChecked_(o,e);case goog.dom.InputType.SELECT_ONE:return void goog.dom.forms.setSelectSingle_(o,e);case goog.dom.InputType.SELECT_MULTIPLE:return void goog.dom.forms.setSelectMultiple_(o,e);default:o.value=null!=e?e:""}},goog.dom.forms.setInputChecked_=function(o,e){o.checked=e},goog.dom.forms.setSelectSingle_=function(o,e){if(o.selectedIndex=-1,"string"==typeof e)for(var t,r=0;t=o.options[r];r++)if(t.value==e){t.selected=!0;break}},goog.dom.forms.setSelectMultiple_=function(o,e){"string"==typeof e&&(e=[e]);for(var t,r=0;t=o.options[r];r++)if(t.selected=!1,e)for(var g,m=0;g=e[m];m++)t.value==g&&(t.selected=!0)};