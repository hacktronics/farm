goog.provide("goog.dom.safe"),goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition"),goog.require("goog.asserts"),goog.require("goog.dom.asserts"),goog.require("goog.functions"),goog.require("goog.html.SafeHtml"),goog.require("goog.html.SafeScript"),goog.require("goog.html.SafeStyle"),goog.require("goog.html.SafeUrl"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.html.uncheckedconversions"),goog.require("goog.string.Const"),goog.require("goog.string.internal"),goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(o,e,t){o.insertAdjacentHTML(e,goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var o=document.createElement("div"),e=document.createElement("div");if(e.appendChild(document.createElement("div")),o.appendChild(e),goog.DEBUG&&!o.firstChild)return!1;var t=o.firstChild.firstChild;return o.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(o,e){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;o.lastChild;)o.removeChild(o.lastChild);o.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setInnerHtml=function(o,e){if(goog.asserts.ENABLE_ASSERTS){var t=o.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[t])throw new Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+o.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(o,e)},goog.dom.safe.setOuterHtml=function(o,e){o.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setFormElementAction=function(o,e){var t;t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLFormElement(o).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(o,e){var t;t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLButtonElement(o).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(o,e){var t;t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLInputElement(o).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(o,e){o.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(o,e){o.write(goog.html.SafeHtml.unwrapTrustedHTML(e))},goog.dom.safe.setAnchorHref=function(o,e){var t;goog.dom.asserts.assertIsHTMLAnchorElement(o),t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),o.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(o,e){var t;if(goog.dom.asserts.assertIsHTMLImageElement(o),e instanceof goog.html.SafeUrl)t=e;else{var r=/^data:image\//i.test(e);t=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}o.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(o,e){var t;if(goog.dom.asserts.assertIsHTMLAudioElement(o),e instanceof goog.html.SafeUrl)t=e;else{var r=/^data:audio\//i.test(e);t=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}o.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(o,e){var t;if(goog.dom.asserts.assertIsHTMLVideoElement(o),e instanceof goog.html.SafeUrl)t=e;else{var r=/^data:video\//i.test(e);t=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}o.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(o,e){goog.dom.asserts.assertIsHTMLEmbedElement(o),o.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setFrameSrc=function(o,e){goog.dom.asserts.assertIsHTMLFrameElement(o),o.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(o,e){goog.dom.asserts.assertIsHTMLIFrameElement(o),o.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(o,e){goog.dom.asserts.assertIsHTMLIFrameElement(o),o.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setLinkHrefAndRel=function(o,e,t){goog.dom.asserts.assertIsHTMLLinkElement(o),o.rel=t,goog.string.internal.caseInsensitiveContains(t,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),o.href=goog.html.TrustedResourceUrl.unwrap(e)):e instanceof goog.html.TrustedResourceUrl?o.href=goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?o.href=goog.html.SafeUrl.unwrap(e):o.href=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(e))},goog.dom.safe.setObjectData=function(o,e){goog.dom.asserts.assertIsHTMLObjectElement(o),o.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setScriptSrc=function(o,e){goog.dom.asserts.assertIsHTMLScriptElement(o),o.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e);var t=goog.getScriptNonce();t&&o.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(o,e){goog.dom.asserts.assertIsHTMLScriptElement(o),o.text=goog.html.SafeScript.unwrapTrustedScript(e);var t=goog.getScriptNonce();t&&o.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(o,e){var t;goog.dom.asserts.assertIsLocation(o),t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),o.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(o,e){var t;goog.dom.asserts.assertIsLocation(o),t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),o.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(o,e){var t;goog.dom.asserts.assertIsLocation(o),t=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),o.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(o,e,t,r,g){var s;return s=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),(e||goog.global).open(goog.html.SafeUrl.unwrap(s),t?goog.string.Const.unwrap(t):"",r,g)},goog.dom.safe.parseFromStringHtml=function(o,e){return goog.dom.safe.parseFromString(o,e,"text/html")},goog.dom.safe.parseFromString=function(o,e,t){return o.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e),t)},goog.dom.safe.createImageFromBlob=function(o){if(!/^image\/.*/g.test(o.type))throw new Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var e=goog.global.URL.createObjectURL(o),t=new goog.global.Image;return t.onload=function(){goog.global.URL.revokeObjectURL(e)},goog.dom.safe.setImageSrc(t,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),e)),t};