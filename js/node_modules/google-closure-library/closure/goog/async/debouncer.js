goog.provide("goog.async.Debouncer"),goog.require("goog.Disposable"),goog.require("goog.Timer"),goog.async.Debouncer=function(o,t,i){goog.async.Debouncer.base(this,"constructor"),this.listener_=null!=i?goog.bind(o,i):o,this.interval_=t,this.callback_=goog.bind(this.onTimer_,this),this.shouldFire_=!1,this.pauseCount_=0,this.timer_=null,this.refireAt_=null,this.args_=[]},goog.inherits(goog.async.Debouncer,goog.Disposable),goog.async.Debouncer.prototype.fire=function(o){this.args_=arguments,this.shouldFire_=!1,this.timer_?this.refireAt_=goog.now()+this.interval_:this.timer_=goog.Timer.callOnce(this.callback_,this.interval_)},goog.async.Debouncer.prototype.stop=function(){this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null),this.refireAt_=null,this.shouldFire_=!1,this.args_=[]},goog.async.Debouncer.prototype.pause=function(){++this.pauseCount_},goog.async.Debouncer.prototype.resume=function(){this.pauseCount_&&(--this.pauseCount_,!this.pauseCount_&&this.shouldFire_&&this.doAction_())},goog.async.Debouncer.prototype.disposeInternal=function(){this.stop(),goog.async.Debouncer.base(this,"disposeInternal")},goog.async.Debouncer.prototype.onTimer_=function(){if(this.refireAt_)return this.timer_=goog.Timer.callOnce(this.callback_,this.refireAt_-goog.now()),void(this.refireAt_=null);this.timer_=null,this.pauseCount_?this.shouldFire_=!0:this.doAction_()},goog.async.Debouncer.prototype.doAction_=function(){this.shouldFire_=!1,this.listener_.apply(null,this.args_)};