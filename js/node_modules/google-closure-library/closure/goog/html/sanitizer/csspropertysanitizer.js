goog.module("goog.html.sanitizer.CssPropertySanitizer"),goog.module.declareLegacyNamespace();var SafeUrl=goog.require("goog.html.SafeUrl"),googAsserts=goog.require("goog.asserts"),googObject=goog.require("goog.object"),googString=goog.require("goog.string"),ALLOWED_FUNCTIONS=googObject.createSet("rgb","rgba","alpha","rect","image","linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","cubic-bezier","matrix","perspective","rotate","rotate3d","rotatex","rotatey","steps","rotatez","scale","scale3d","scalex","scaley","scalez","skew","skewx","skewy","translate","translate3d","translatex","translatey","translatez"),NORM_URL_REGEXP=/[\n\f\r\"\'()*<>]/g,NORM_URL_REPLACEMENTS={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"};function normalizeUrlChar(e){return googAsserts.assert(NORM_URL_REPLACEMENTS[e])}function getSafeUri(e,r,t){if(!t)return null;var a=t(e,r);return a&&SafeUrl.unwrap(a)!=SafeUrl.INNOCUOUS_STRING?'url("'+SafeUrl.unwrap(a).replace(NORM_URL_REGEXP,normalizeUrlChar)+'")':null}exports.sanitizeProperty=function(e,r,t){if(""==(r=googString.trim(r)))return null;if(googString.caseInsensitiveStartsWith(r,"url("))return!r.endsWith(")")||googString.countOf(r,"(")>1||googString.countOf(r,")")>1?null:t?getSafeUri(googString.stripQuotes(r.substring(4,r.length-1),"\"'"),e,t):null;if(r.indexOf("(")>0){if(/"|'/.test(r))return null;for(var a,g=/([\-\w]+)\(/g;a=g.exec(r);)if(!(a[1]in ALLOWED_FUNCTIONS))return null;return r}return r};