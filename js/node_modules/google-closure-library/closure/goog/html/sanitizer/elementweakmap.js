goog.module("goog.html.sanitizer.ElementWeakMap"),goog.module.declareLegacyNamespace();var noclobber=goog.require("goog.html.sanitizer.noclobber"),NATIVE_WEAKMAP_SUPPORTED="undefined"!=typeof WeakMap&&-1!=WeakMap.toString().indexOf("[native code]"),DATA_ATTRIBUTE_NAME_PREFIX="data-elementweakmap-index-",weakMapCount=0,ElementWeakMap=function(){this.keys_=[],this.values_=[],this.dataAttributeName_=DATA_ATTRIBUTE_NAME_PREFIX+weakMapCount++};ElementWeakMap.prototype.set=function(e,t){if(noclobber.hasElementAttribute(e,this.dataAttributeName_)){var a=parseInt(noclobber.getElementAttribute(e,this.dataAttributeName_),10);this.values_[a]=t}else{a=this.values_.push(t)-1;noclobber.setElementAttribute(e,this.dataAttributeName_,a.toString()),this.keys_.push(e)}return this},ElementWeakMap.prototype.get=function(e){if(noclobber.hasElementAttribute(e,this.dataAttributeName_)){var t=parseInt(noclobber.getElementAttribute(e,this.dataAttributeName_),10);return this.values_[t]}},ElementWeakMap.prototype.clear=function(){this.keys_.forEach(function(e){noclobber.removeElementAttribute(e,this.dataAttributeName_)},this),this.keys_=[],this.values_=[]},ElementWeakMap.newWeakMap=function(){return NATIVE_WEAKMAP_SUPPORTED?new WeakMap:new ElementWeakMap},exports=ElementWeakMap;