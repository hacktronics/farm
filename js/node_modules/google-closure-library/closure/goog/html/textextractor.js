goog.provide("goog.html.textExtractor"),goog.require("goog.array"),goog.require("goog.dom.TagName"),goog.require("goog.html.sanitizer.HtmlSanitizer"),goog.require("goog.object"),goog.require("goog.userAgent"),goog.html.textExtractor.extractTextContent=function(o){if(!goog.html.textExtractor.isSupported())return"";var g=(new goog.html.sanitizer.HtmlSanitizer.Builder).onlyAllowAttributes(["style"]).allowCssStyles().build().sanitizeToDomNode(o);return goog.html.textExtractor.extractTextContentFromNode_(g).trim()},goog.html.textExtractor.extractTextContentFromNode_=function(o){switch(o.nodeType){case Node.ELEMENT_NODE:var g=o;if(g.tagName==goog.dom.TagName.BR)return"\n";var t=goog.array.map(o.childNodes,goog.html.textExtractor.extractTextContentFromNode_).join("");return goog.html.textExtractor.isBlockElement_(g)&&(t="\n"+t+"\n"),t;case Node.TEXT_NODE:return o.nodeValue.replace(/\s+/g," ").trim();default:return""}},goog.html.textExtractor.BLOCK_ELEMENTS_=goog.object.createSet(goog.dom.TagName.ADDRESS,goog.dom.TagName.BLOCKQUOTE,goog.dom.TagName.CENTER,goog.dom.TagName.DIV,goog.dom.TagName.DL,goog.dom.TagName.FIELDSET,goog.dom.TagName.FORM,goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6,goog.dom.TagName.HR,goog.dom.TagName.OL,goog.dom.TagName.P,goog.dom.TagName.PRE,goog.dom.TagName.TABLE,goog.dom.TagName.UL),goog.html.textExtractor.isBlockElement_=function(o){return"block"==o.style.display||goog.html.textExtractor.BLOCK_ELEMENTS_.hasOwnProperty(o.tagName)},goog.html.textExtractor.isSupported=function(){return!goog.userAgent.IE||goog.userAgent.isVersionOrHigher(10)};