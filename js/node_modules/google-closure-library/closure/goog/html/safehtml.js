goog.provide("goog.html.SafeHtml"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.dom.TagName"),goog.require("goog.dom.tags"),goog.require("goog.html.SafeScript"),goog.require("goog.html.SafeStyle"),goog.require("goog.html.SafeStyleSheet"),goog.require("goog.html.SafeUrl"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.html.trustedtypes"),goog.require("goog.i18n.bidi.Dir"),goog.require("goog.i18n.bidi.DirectionalString"),goog.require("goog.labs.userAgent.browser"),goog.require("goog.object"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.require("goog.string.internal"),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.define("goog.html.SafeHtml.ENABLE_ERROR_MESSAGES",goog.DEBUG),goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=goog.define("goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE",!0),goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(t){return goog.html.SafeHtml.unwrapTrustedHTML(t).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(t){return t instanceof goog.html.SafeHtml&&t.constructor===goog.html.SafeHtml&&t.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeHtml")},goog.html.SafeHtml.TextOrHtml_,goog.html.SafeHtml.htmlEscape=function(t){if(t instanceof goog.html.SafeHtml)return t;var e,o="object"==typeof t,g=null;return o&&t.implementsGoogI18nBidiDirectionalString&&(g=t.getDirection()),e=o&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),g)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(t){if(t instanceof goog.html.SafeHtml)return t;var e=goog.html.SafeHtml.htmlEscape(t);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection())},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(t){if(t instanceof goog.html.SafeHtml)return t;var e=goog.html.SafeHtml.htmlEscape(t);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection())},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src"),goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.APPLET,goog.dom.TagName.BASE,goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.MATH,goog.dom.TagName.META,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.SVG,goog.dom.TagName.TEMPLATE),goog.html.SafeHtml.AttributeValue,goog.html.SafeHtml.create=function(t,e,o){return goog.html.SafeHtml.verifyTagName(String(t)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(t),e,o)},goog.html.SafeHtml.verifyTagName=function(t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(t))throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+t+">.":"");if(t.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+t+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(t,e,o,g){t&&goog.html.TrustedResourceUrl.unwrap(t);var r={};r.src=t||null,r.srcdoc=e&&goog.html.SafeHtml.unwrap(e);var a=goog.html.SafeHtml.combineAttributes(r,{sandbox:""},o);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,g)},goog.html.SafeHtml.createSandboxIframe=function(t,e,o,g){if(!goog.html.SafeHtml.canUseSandboxIframe())throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var r={};r.src=t?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)):null,r.srcdoc=e||null,r.sandbox="";var a=goog.html.SafeHtml.combineAttributes(r,{},o);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,g)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(t,e){goog.html.TrustedResourceUrl.unwrap(t);var o={src:t},g=goog.html.SafeHtml.combineAttributes(o,{},e);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",g)},goog.html.SafeHtml.createScript=function(t,e){for(var o in e){var g=o.toLowerCase();if("language"==g||"src"==g||"text"==g||"type"==g)throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+g+'" attribute':"")}var r="";t=goog.array.concat(t);for(var a=0;a<t.length;a++)r+=goog.html.SafeScript.unwrap(t[a]);var l=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,l)},goog.html.SafeHtml.createStyle=function(t,e){var o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e),g="";t=goog.array.concat(t);for(var r=0;r<t.length;r++)g+=goog.html.SafeStyleSheet.unwrap(t[r]);var a=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(g,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,a)},goog.html.SafeHtml.createMetaRefresh=function(t,e){var o=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t));(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'");var g={"http-equiv":"refresh",content:(e||0)+"; url="+o};return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",g)},goog.html.SafeHtml.getAttrNameAndValue_=function(t,e,o){if(o instanceof goog.string.Const)o=goog.string.Const.unwrap(o);else if("style"==e.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");o=goog.html.SafeHtml.getStyleValue_(o)}else{if(/^on/i.test(e))throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" requires goog.string.Const value, "'+o+'" given.':"");if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(o instanceof goog.html.TrustedResourceUrl)o=goog.html.TrustedResourceUrl.unwrap(o);else if(o instanceof goog.html.SafeUrl)o=goog.html.SafeUrl.unwrap(o);else{if("string"!=typeof o)throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" on tag "'+t+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+o+'" given.':"");o=goog.html.SafeUrl.sanitize(o).getTypedStringValue()}}return o.implementsGoogStringTypedString&&(o=o.getTypedStringValue()),goog.asserts.assert("string"==typeof o||"number"==typeof o,"String or number value expected, got "+typeof o+" with value: "+o),e+'="'+goog.string.internal.htmlEscape(String(o))+'"'},goog.html.SafeHtml.getStyleValue_=function(t){if(!goog.isObject(t))throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof t+" given: "+t:"");return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),goog.html.SafeStyle.unwrap(t)},goog.html.SafeHtml.createWithDir=function(t,e,o,g){var r=goog.html.SafeHtml.create(e,o,g);return r.dir_=t,r},goog.html.SafeHtml.join=function(t,e){var o=goog.html.SafeHtml.htmlEscape(t),g=o.getDirection(),r=[],a=function(t){if(goog.isArray(t))goog.array.forEach(t,a);else{var e=goog.html.SafeHtml.htmlEscape(t);r.push(goog.html.SafeHtml.unwrap(e));var o=e.getDirection();g==goog.i18n.bidi.Dir.NEUTRAL?g=o:o!=goog.i18n.bidi.Dir.NEUTRAL&&g!=o&&(g=null)}};return goog.array.forEach(e,a),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r.join(goog.html.SafeHtml.unwrap(o)),g)},goog.html.SafeHtml.concat=function(t){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(t,e){var o=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return o.dir_=t,o},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(t,e){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(t,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(t):t,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(t,e,o){var g=null,r="<"+t;r+=goog.html.SafeHtml.stringifyAttributes(t,e);var a=o;if(null==a?a=[]:goog.isArray(a)||(a=[a]),goog.dom.tags.isVoidTag(t.toLowerCase()))goog.asserts.assert(!a.length,"Void tag <"+t+"> does not allow content."),r+=">";else{var l=goog.html.SafeHtml.concat(a);r+=">"+goog.html.SafeHtml.unwrap(l)+"</"+t+">",g=l.getDirection()}var m=e&&e.dir;return m&&(g=/^(ltr|rtl|auto)$/i.test(m)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,g)},goog.html.SafeHtml.stringifyAttributes=function(t,e){var o="";if(e)for(var g in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(g))throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+g+'".':"");var r=e[g];null!=r&&(o+=" "+goog.html.SafeHtml.getAttrNameAndValue_(t,g,r))}return o},goog.html.SafeHtml.combineAttributes=function(t,e,o){var g,r={};for(g in t)goog.asserts.assert(g.toLowerCase()==g,"Must be lower case"),r[g]=t[g];for(g in e)goog.asserts.assert(g.toLowerCase()==g,"Must be lower case"),r[g]=e[g];if(o)for(g in o){var a=g.toLowerCase();if(a in t)throw new Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+a+'" attribute, got "'+g+'" with value "'+o[g]+'"':"");a in e&&delete r[a],r[g]=o[g]}return r},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL);