goog.provide("goog.storage.RichStorage"),goog.provide("goog.storage.RichStorage.Wrapper"),goog.forwardDeclare("goog.storage.mechanism.Mechanism"),goog.require("goog.storage.ErrorCode"),goog.require("goog.storage.Storage"),goog.storage.RichStorage=function(o){goog.storage.RichStorage.base(this,"constructor",o)},goog.inherits(goog.storage.RichStorage,goog.storage.Storage),goog.storage.RichStorage.DATA_KEY="data",goog.storage.RichStorage.Wrapper=function(o){this[goog.storage.RichStorage.DATA_KEY]=o},goog.storage.RichStorage.Wrapper.wrapIfNecessary=function(o){return void 0===o||o instanceof goog.storage.RichStorage.Wrapper?o:new goog.storage.RichStorage.Wrapper(o)},goog.storage.RichStorage.Wrapper.unwrap=function(o){var g=o[goog.storage.RichStorage.DATA_KEY];if(void 0===g)throw goog.storage.ErrorCode.INVALID_VALUE;return g},goog.storage.RichStorage.Wrapper.unwrapIfPossible=function(o){if(o)return goog.storage.RichStorage.Wrapper.unwrap(o)},goog.storage.RichStorage.prototype.set=function(o,g){goog.storage.RichStorage.base(this,"set",o,goog.storage.RichStorage.Wrapper.wrapIfNecessary(g))},goog.storage.RichStorage.prototype.getWrapper=function(o){var g=goog.storage.RichStorage.superClass_.get.call(this,o);if(void 0===g||g instanceof Object)return g;throw goog.storage.ErrorCode.INVALID_VALUE},goog.storage.RichStorage.prototype.get=function(o){return goog.storage.RichStorage.Wrapper.unwrapIfPossible(this.getWrapper(o))};