goog.provide("goog.storage.ExpiringStorage"),goog.forwardDeclare("goog.storage.mechanism.Mechanism"),goog.require("goog.storage.RichStorage"),goog.storage.ExpiringStorage=function(o){goog.storage.ExpiringStorage.base(this,"constructor",o)},goog.inherits(goog.storage.ExpiringStorage,goog.storage.RichStorage),goog.storage.ExpiringStorage.EXPIRATION_TIME_KEY="expiration",goog.storage.ExpiringStorage.CREATION_TIME_KEY="creation",goog.storage.ExpiringStorage.getCreationTime=function(o){return o[goog.storage.ExpiringStorage.CREATION_TIME_KEY]},goog.storage.ExpiringStorage.getExpirationTime=function(o){return o[goog.storage.ExpiringStorage.EXPIRATION_TIME_KEY]},goog.storage.ExpiringStorage.isExpired=function(o){var g=goog.storage.ExpiringStorage.getCreationTime(o),r=goog.storage.ExpiringStorage.getExpirationTime(o);return!!r&&r<goog.now()||!!g&&g>goog.now()},goog.storage.ExpiringStorage.prototype.set=function(o,g,r){var e=goog.storage.RichStorage.Wrapper.wrapIfNecessary(g);if(e){if(r){if(r<goog.now())return void goog.storage.ExpiringStorage.prototype.remove.call(this,o);e[goog.storage.ExpiringStorage.EXPIRATION_TIME_KEY]=r}e[goog.storage.ExpiringStorage.CREATION_TIME_KEY]=goog.now()}goog.storage.ExpiringStorage.base(this,"set",o,e)},goog.storage.ExpiringStorage.prototype.getWrapper=function(o,g){var r=goog.storage.ExpiringStorage.base(this,"getWrapper",o);if(r){if(g||!goog.storage.ExpiringStorage.isExpired(r))return r;goog.storage.ExpiringStorage.prototype.remove.call(this,o)}};