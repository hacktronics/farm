goog.provide("goog.storage.mechanism.HTML5WebStorage"),goog.require("goog.asserts"),goog.require("goog.iter.Iterator"),goog.require("goog.iter.StopIteration"),goog.require("goog.storage.mechanism.ErrorCode"),goog.require("goog.storage.mechanism.IterableMechanism"),goog.storage.mechanism.HTML5WebStorage=function(o){goog.storage.mechanism.HTML5WebStorage.base(this,"constructor"),this.storage_=o},goog.inherits(goog.storage.mechanism.HTML5WebStorage,goog.storage.mechanism.IterableMechanism),goog.storage.mechanism.HTML5WebStorage.STORAGE_AVAILABLE_KEY_="__sak",goog.storage.mechanism.HTML5WebStorage.prototype.isAvailable=function(){if(!this.storage_)return!1;try{return this.storage_.setItem(goog.storage.mechanism.HTML5WebStorage.STORAGE_AVAILABLE_KEY_,"1"),this.storage_.removeItem(goog.storage.mechanism.HTML5WebStorage.STORAGE_AVAILABLE_KEY_),!0}catch(o){return!1}},goog.storage.mechanism.HTML5WebStorage.prototype.set=function(o,e){try{this.storage_.setItem(o,e)}catch(o){throw 0==this.storage_.length?goog.storage.mechanism.ErrorCode.STORAGE_DISABLED:goog.storage.mechanism.ErrorCode.QUOTA_EXCEEDED}},goog.storage.mechanism.HTML5WebStorage.prototype.get=function(o){var e=this.storage_.getItem(o);if("string"!=typeof e&&null!==e)throw goog.storage.mechanism.ErrorCode.INVALID_VALUE;return e},goog.storage.mechanism.HTML5WebStorage.prototype.remove=function(o){this.storage_.removeItem(o)},goog.storage.mechanism.HTML5WebStorage.prototype.getCount=function(){return this.storage_.length},goog.storage.mechanism.HTML5WebStorage.prototype.__iterator__=function(o){var e=0,t=this.storage_,r=new goog.iter.Iterator;return r.next=function(){if(e>=t.length)throw goog.iter.StopIteration;var r=goog.asserts.assertString(t.key(e++));if(o)return r;var g=t.getItem(r);if("string"!=typeof g)throw goog.storage.mechanism.ErrorCode.INVALID_VALUE;return g},r},goog.storage.mechanism.HTML5WebStorage.prototype.clear=function(){this.storage_.clear()},goog.storage.mechanism.HTML5WebStorage.prototype.key=function(o){return this.storage_.key(o)};