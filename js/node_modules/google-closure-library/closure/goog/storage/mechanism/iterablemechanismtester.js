goog.provide("goog.storage.mechanism.iterableMechanismTester"),goog.require("goog.iter"),goog.require("goog.iter.StopIteration"),goog.require("goog.testing.asserts"),goog.setTestOnly("iterableMechanismTester");var mechanism=null;function testCount(){mechanism&&(assertEquals(0,mechanism.getCount()),mechanism.set("first","one"),assertEquals(1,mechanism.getCount()),mechanism.set("second","two"),assertEquals(2,mechanism.getCount()),mechanism.set("first","three"),assertEquals(2,mechanism.getCount()))}function testIteratorBasics(){if(mechanism){mechanism.set("first","one"),assertEquals("first",mechanism.__iterator__(!0).next()),assertEquals("one",mechanism.__iterator__(!1).next());var e=mechanism.__iterator__();assertEquals("one",e.next()),assertEquals(goog.iter.StopIteration,assertThrows(e.next))}}function testIteratorWithTwoValues(){mechanism&&(mechanism.set("first","one"),mechanism.set("second","two"),assertSameElements(["one","two"],goog.iter.toArray(mechanism)),assertSameElements(["first","second"],goog.iter.toArray(mechanism.__iterator__(!0))))}function testClear(){mechanism&&(mechanism.set("first","one"),mechanism.set("second","two"),mechanism.clear(),assertNull(mechanism.get("first")),assertNull(mechanism.get("second")),assertEquals(0,mechanism.getCount()),assertEquals(goog.iter.StopIteration,assertThrows(mechanism.__iterator__(!0).next)),assertEquals(goog.iter.StopIteration,assertThrows(mechanism.__iterator__(!1).next)))}function testClearClear(){mechanism&&(mechanism.clear(),mechanism.clear(),assertEquals(0,mechanism.getCount()))}function testIteratorWithWeirdKeys(){mechanism&&(mechanism.set(" ","space"),mechanism.set("=+!@#$%^&*()-_\\|;:'\",./<>?[]{}~`","control"),mechanism.set("一二三四五六七八九十","ten"),assertEquals(3,mechanism.getCount()),assertSameElements([" ","=+!@#$%^&*()-_\\|;:'\",./<>?[]{}~`","一二三四五六七八九十"],goog.iter.toArray(mechanism.__iterator__(!0))),mechanism.clear(),assertEquals(0,mechanism.getCount()))}