goog.provide("goog.vec.Quaternion"),goog.provide("goog.vec.Quaternion.AnyType"),goog.require("goog.vec"),goog.require("goog.vec.Vec3"),goog.require("goog.vec.Vec4"),goog.vec.Quaternion.Float32,goog.vec.Quaternion.Float64,goog.vec.Quaternion.Number,goog.vec.Quaternion.AnyType,goog.vec.Quaternion.createFloat32=goog.vec.Vec4.createFloat32,goog.vec.Quaternion.createFloat64=goog.vec.Vec4.createFloat64,goog.vec.Quaternion.createNumber=goog.vec.Vec4.createNumber,goog.vec.Quaternion.createFloat32FromArray=goog.vec.Vec4.createFloat32FromArray,goog.vec.Quaternion.createFloat64FromArray=goog.vec.Vec4.createFloat64FromArray,goog.vec.Quaternion.createFloat32FromValues=goog.vec.Vec4.createFloat32FromValues,goog.vec.Quaternion.createFloat64FromValues=goog.vec.Vec4.createFloat64FromValues,goog.vec.Quaternion.cloneFloat32=goog.vec.Vec4.cloneFloat32,goog.vec.Quaternion.cloneFloat64=goog.vec.Vec4.cloneFloat64,goog.vec.Quaternion.createIdentityFloat32=function(){var o=goog.vec.Quaternion.createFloat32();return goog.vec.Quaternion.makeIdentity(o),o},goog.vec.Quaternion.createIdentityFloat64=function(){var o=goog.vec.Quaternion.createFloat64();return goog.vec.Quaternion.makeIdentity(o),o},goog.vec.Quaternion.setFromValues=goog.vec.Vec4.setFromValues,goog.vec.Quaternion.setFromArray=goog.vec.Vec4.setFromArray,goog.vec.Quaternion.add=goog.vec.Vec4.add,goog.vec.Quaternion.negate=goog.vec.Vec4.negate,goog.vec.Quaternion.scale=goog.vec.Vec4.scale,goog.vec.Quaternion.magnitudeSquared=goog.vec.Vec4.magnitudeSquared,goog.vec.Quaternion.magnitude=goog.vec.Vec4.magnitude,goog.vec.Quaternion.normalize=goog.vec.Vec4.normalize,goog.vec.Quaternion.dot=goog.vec.Vec4.dot,goog.vec.Quaternion.invert=function(o,e){var t=o[0],r=o[1],n=o[2],a=o[3],g=t*t+r*r+n*n+a*a,c=g?1/g:0;return e[0]=-t*c,e[1]=-r*c,e[2]=-n*c,e[3]=a*c,e},goog.vec.Quaternion.conjugate=function(o,e){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=o[3],e},goog.vec.Quaternion.concat=function(o,e,t){var r=o[0],n=o[1],a=o[2],g=o[3],c=e[0],i=e[1],u=e[2],v=e[3];return t[0]=g*c+r*v+n*u-a*i,t[1]=g*i-r*u+n*v+a*c,t[2]=g*u+r*i-n*c+a*v,t[3]=g*v-r*c-n*i-a*u,t},goog.vec.Quaternion.makeIdentity=function(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o},goog.vec.Quaternion.fromAngleAxis=function(o,e,t){goog.vec.Vec3.normalize(e,e);var r=.5*o,n=Math.sin(r);return goog.vec.Quaternion.setFromValues(t,n*e[0],n*e[1],n*e[2],Math.cos(r)),goog.vec.Quaternion.normalize(t,t),t},goog.vec.Quaternion.toAngleAxis=function(o,e){var t=2*Math.acos(o[3]);return Math.min(Math.max(1-o[3]*o[3],0),1)<goog.vec.EPSILON?goog.vec.Vec3.setFromValues(e,1,0,0):(goog.vec.Vec3.setFromValues(e,o[0],o[1],o[2]),goog.vec.Vec3.normalize(e,e)),t>Math.PI&&(t-=2*Math.PI),t},goog.vec.Quaternion.fromRotationMatrix3=function(o,e){var t,r=o[0]+o[4]+o[8];if(r>0)t=Math.sqrt(r+1),e[3]=.5*t,t=.5/t,e[0]=(o[5]-o[7])*t,e[1]=(o[6]-o[2])*t,e[2]=(o[1]-o[3])*t;else{var n=0;o[4]>o[0]&&(n=1),o[8]>o[3*n+n]&&(n=2);var a=(n+1)%3,g=(n+2)%3;t=Math.sqrt(o[3*n+n]-o[3*a+a]-o[3*g+g]+1),e[n]=.5*t,t=.5/t,e[3]=(o[3*a+g]-o[3*g+a])*t,e[a]=(o[3*a+n]+o[3*n+a])*t,e[g]=(o[3*g+n]+o[3*n+g])*t,e[3]<0&&(e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e[3]=-e[3])}return e},goog.vec.Quaternion.fromRotationMatrix4=function(o,e){var t,r=o[0]+o[5]+o[10];if(r>0)t=Math.sqrt(r+1),e[3]=.5*t,t=.5/t,e[0]=(o[6]-o[9])*t,e[1]=(o[8]-o[2])*t,e[2]=(o[1]-o[4])*t;else{var n=0;o[5]>o[0]&&(n=1),o[10]>o[4*n+n]&&(n=2);var a=(n+1)%3,g=(n+2)%3;t=Math.sqrt(o[4*n+n]-o[4*a+a]-o[4*g+g]+1),e[n]=.5*t,t=.5/t,e[3]=(o[4*a+g]-o[4*g+a])*t,e[a]=(o[4*a+n]+o[4*n+a])*t,e[g]=(o[4*g+n]+o[4*n+g])*t,e[3]<0&&(e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e[3]=-e[3])}return e},goog.vec.Quaternion.toRotationMatrix3=function(o,e){var t=o[0],r=o[1],n=o[2],a=o[3],g=2*t,c=2*r,i=2*n,u=g*a,v=c*a,l=i*a,Q=g*t,s=c*t,F=i*t,m=c*r,V=i*r,f=i*n;return e[0]=1-(m+f),e[1]=s+l,e[2]=F-v,e[3]=s-l,e[4]=1-(Q+f),e[5]=V+u,e[6]=F+v,e[7]=V-u,e[8]=1-(Q+m),e},goog.vec.Quaternion.toRotationMatrix4=function(o,e){var t=o[0],r=o[1],n=o[2],a=o[3],g=2*t,c=2*r,i=2*n,u=g*a,v=c*a,l=i*a,Q=g*t,s=c*t,F=i*t,m=c*r,V=i*r,f=i*n;return e[0]=1-(m+f),e[1]=s+l,e[2]=F-v,e[3]=0,e[4]=s-l,e[5]=1-(Q+f),e[6]=V+u,e[7]=0,e[8]=F+v,e[9]=V-u,e[10]=1-(Q+m),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},goog.vec.Quaternion.rotateX=function(o,e,t){e*=.5;var r=o[0],n=o[1],a=o[2],g=o[3],c=Math.sin(e),i=Math.cos(e);return t[0]=r*i+g*c,t[1]=n*i+a*c,t[2]=a*i-n*c,t[3]=g*i-r*c,t},goog.vec.Quaternion.rotateY=function(o,e,t){e*=.5;var r=o[0],n=o[1],a=o[2],g=o[3],c=Math.sin(e),i=Math.cos(e);return t[0]=r*i-a*c,t[1]=n*i+g*c,t[2]=a*i+r*c,t[3]=g*i-n*c,t},goog.vec.Quaternion.rotateZ=function(o,e,t){e*=.5;var r=o[0],n=o[1],a=o[2],g=o[3],c=Math.sin(e),i=Math.cos(e);return t[0]=r*i+n*c,t[1]=n*i-r*c,t[2]=a*i+g*c,t[3]=g*i-a*c,t},goog.vec.Quaternion.transformVec=function(o,e,t){var r=o[0],n=o[1],a=o[2],g=e[0],c=e[1],i=e[2],u=e[3],v=u*r+c*a-i*n,l=u*n+i*r-g*a,Q=u*a+g*n-c*r,s=-g*r-c*n-i*a;return t[0]=v*u+s*-g+l*-i-Q*-c,t[1]=l*u+s*-c+Q*-g-v*-i,t[2]=Q*u+s*-i+v*-c-l*-g,t},goog.vec.Quaternion.slerp=function(o,e,t,r){var n=goog.vec.Quaternion.dot(o,e);if(n>1||n<-1)return goog.vec.Vec4.setFromArray(r,e),r;var a=1;n<0&&(a=-1,n=-n);var g=Math.acos(n);if(g<=goog.vec.EPSILON)return goog.vec.Vec4.setFromArray(r,e),r;var c=1/Math.sin(g),i=Math.sin((1-t)*g)*c,u=a*Math.sin(t*g)*c;return r[0]=o[0]*i+e[0]*u,r[1]=o[1]*i+e[1]*u,r[2]=o[2]*i+e[2]*u,r[3]=o[3]*i+e[3]*u,r},goog.vec.Quaternion.nlerp=goog.vec.Vec4.lerp;