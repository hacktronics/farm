goog.provide("goog.debug.Formatter"),goog.provide("goog.debug.HtmlFormatter"),goog.provide("goog.debug.TextFormatter"),goog.require("goog.debug"),goog.require("goog.debug.Logger"),goog.require("goog.debug.RelativeTimeProvider"),goog.require("goog.html.SafeHtml"),goog.require("goog.html.SafeUrl"),goog.require("goog.html.uncheckedconversions"),goog.require("goog.string.Const"),goog.debug.Formatter=function(e){this.prefix_=e||"",this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()},goog.debug.Formatter.prototype.appendNewline=!0,goog.debug.Formatter.prototype.showAbsoluteTime=!0,goog.debug.Formatter.prototype.showRelativeTime=!0,goog.debug.Formatter.prototype.showLoggerName=!0,goog.debug.Formatter.prototype.showExceptionText=!1,goog.debug.Formatter.prototype.showSeverityLevel=!1,goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod,goog.debug.Formatter.prototype.formatRecordAsHtml=goog.abstractMethod,goog.debug.Formatter.prototype.setStartTimeProvider=function(e){this.startTimeProvider_=e},goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_},goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()},goog.debug.Formatter.getDateTimeStamp_=function(e){var t=new Date(e.getMillis());return goog.debug.Formatter.getTwoDigitString_(t.getFullYear()-2e3)+goog.debug.Formatter.getTwoDigitString_(t.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(t.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(t.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(t.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(t.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(t.getMilliseconds()/10))},goog.debug.Formatter.getTwoDigitString_=function(e){return e<10?"0"+e:String(e)},goog.debug.Formatter.getRelativeTime_=function(e,t){var o=(e.getMillis()-t)/1e3,g=o.toFixed(3),r=0;if(o<1)r=2;else for(;o<100;)r++,o*=10;for(;r-- >0;)g=" "+g;return g},goog.debug.HtmlFormatter=function(e){goog.debug.Formatter.call(this,e)},goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter),goog.debug.HtmlFormatter.exposeException=function(e,t){var o=goog.debug.HtmlFormatter.exposeExceptionAsHtml(e,t);return goog.html.SafeHtml.unwrap(o)},goog.debug.HtmlFormatter.exposeExceptionAsHtml=function(e,t){try{var o=goog.debug.normalizeErrorObject(e),g=goog.debug.HtmlFormatter.createViewSourceUrl_(o.fileName);return goog.html.SafeHtml.concat(goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Message: "+o.message+"\nUrl: "),goog.html.SafeHtml.create("a",{href:g,target:"_new"},o.fileName),goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("\nLine: "+o.lineNumber+"\n\nBrowser stack:\n"+o.stack+"-> [end]\n\nJS stack traversal:\n"+goog.debug.getStacktrace(t)+"-> "))}catch(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces("Exception trying to expose exception! You win, we lose. "+e)}},goog.debug.HtmlFormatter.createViewSourceUrl_=function(e){if(null==e&&(e=""),!/^https?:\/\//i.test(e))return goog.html.SafeUrl.fromConstant(goog.string.Const.from("sanitizedviewsrc"));var t=goog.html.SafeUrl.sanitize(e);return goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("view-source scheme plus HTTP/HTTPS URL"),"view-source:"+goog.html.SafeUrl.unwrap(t))},goog.debug.HtmlFormatter.prototype.showExceptionText=!0,goog.debug.HtmlFormatter.prototype.formatRecord=function(e){return e?this.formatRecordAsHtml(e).getTypedStringValue():""},goog.debug.HtmlFormatter.prototype.formatRecordAsHtml=function(e){if(!e)return goog.html.SafeHtml.EMPTY;var t;switch(e.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:t="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:t="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:t="dbg-w";break;case goog.debug.Logger.Level.INFO.value:t="dbg-i";break;case goog.debug.Logger.Level.FINE.value:default:t="dbg-f"}var o=[];o.push(this.prefix_," "),this.showAbsoluteTime&&o.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] "),this.showRelativeTime&&o.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] "),this.showLoggerName&&o.push("[",e.getLoggerName(),"] "),this.showSeverityLevel&&o.push("[",e.getLevel().name,"] ");var g=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(o.join("")),r=goog.html.SafeHtml.EMPTY;this.showExceptionText&&e.getException()&&(r=goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,goog.debug.HtmlFormatter.exposeExceptionAsHtml(e.getException())));var a=goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(e.getMessage()),i=goog.html.SafeHtml.create("span",{class:t},goog.html.SafeHtml.concat(a,r));return this.appendNewline?goog.html.SafeHtml.concat(g,i,goog.html.SafeHtml.BR):goog.html.SafeHtml.concat(g,i)},goog.debug.TextFormatter=function(e){goog.debug.Formatter.call(this,e)},goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter),goog.debug.TextFormatter.prototype.formatRecord=function(e){var t=[];if(t.push(this.prefix_," "),this.showAbsoluteTime&&t.push("[",goog.debug.Formatter.getDateTimeStamp_(e),"] "),this.showRelativeTime&&t.push("[",goog.debug.Formatter.getRelativeTime_(e,this.startTimeProvider_.get()),"s] "),this.showLoggerName&&t.push("[",e.getLoggerName(),"] "),this.showSeverityLevel&&t.push("[",e.getLevel().name,"] "),t.push(e.getMessage()),this.showExceptionText){var o=e.getException();if(o){var g=o instanceof Error?o.message:o.toString();t.push("\n",g)}}return this.appendNewline&&t.push("\n"),t.join("")},goog.debug.TextFormatter.prototype.formatRecordAsHtml=function(e){return goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces(goog.debug.TextFormatter.prototype.formatRecord(e))};