goog.module("goog.i18n.RelativeDateTimeFormat");var LocaleFeature=goog.require("goog.i18n.LocaleFeature"),MessageFormat=goog.require("goog.i18n.MessageFormat"),asserts=goog.require("goog.asserts"),relativeDateTimeSymbols=goog.require("goog.i18n.relativeDateTimeSymbols"),RelativeDateTimeFormat=function(e,t,a){this.nativeMode_=!1,LocaleFeature.USE_ECMASCRIPT_I18N_RDTF||(asserts.assert(a||relativeDateTimeSymbols.getRelativeDateTimeSymbols(),"goog.i18n.RelativeDateTimeSymbols requires symbols ECMAScript mode"),this.rdtfSymbols_=LocaleFeature.USE_ECMASCRIPT_I18N_RDTF?null:a||relativeDateTimeSymbols.getRelativeDateTimeSymbols()),this.rdtfSymbols_||(this.nativeMode_=!0),this.alwaysNumeric_=!0,e&&(asserts.assert(e==RelativeDateTimeFormat.NumericOption.ALWAYS||e==RelativeDateTimeFormat.NumericOption.AUTO,"Invalid opt_numeric value"),e==RelativeDateTimeFormat.NumericOption.ALWAYS?this.alwaysNumeric_=!0:e==RelativeDateTimeFormat.NumericOption.AUTO&&(this.alwaysNumeric_=!1)),this.style_=RelativeDateTimeFormat.Style.LONG,t&&(asserts.assert(t>=RelativeDateTimeFormat.Style.LONG&&t<=RelativeDateTimeFormat.Style.NARROW,"Style must be LONG, SHORT, or NARROW"),this.style_=t)};RelativeDateTimeFormat.NumericOption={ALWAYS:"always",AUTO:"auto"},RelativeDateTimeFormat.Style={LONG:0,SHORT:1,NARROW:2},RelativeDateTimeFormat.Unit={YEAR:0,QUARTER:1,MONTH:2,WEEK:3,DAY:4,HOUR:5,MINUTE:6,SECOND:7},RelativeDateTimeFormat.prototype.format=function(e,t){return asserts.assertNumber(e,"Quantity must be a number"),asserts.assert(t>=RelativeDateTimeFormat.Unit.YEAR&&t<=RelativeDateTimeFormat.Unit.SECOND,"Unit must be one of the supported values"),LocaleFeature.USE_ECMASCRIPT_I18N_RDTF?this.formatNative_(e,t,this.alwaysNumeric_):this.formatPolyfill_(e,t,this.alwaysNumeric_)},RelativeDateTimeFormat.prototype.formatPolyfill_=function(e,t,a){var i=this.getUnitStylePattern_(t);return!a&&i&&i.R&&i.R[e]?i.R[e]:this.formatNumericInternal_(e,i)},RelativeDateTimeFormat.prototype.formatNative_=function(e,t,a){var i={numeric:a?"always":"auto"};switch(this.style_){case RelativeDateTimeFormat.Style.NARROW:i.style="narrow";break;case RelativeDateTimeFormat.Style.SHORT:i.style="short";break;case RelativeDateTimeFormat.Style.LONG:i.style="long"}var r=goog.global.Intl;try{var o=new r.RelativeTimeFormat(goog.LOCALE.replace(/_/g,"-"),i)}catch(e){return""}var m="year";switch(t){case RelativeDateTimeFormat.Unit.YEAR:m="year";break;case RelativeDateTimeFormat.Unit.QUARTER:m="quarter";break;case RelativeDateTimeFormat.Unit.MONTH:m="month";break;case RelativeDateTimeFormat.Unit.WEEK:m="week";break;case RelativeDateTimeFormat.Unit.DAY:m="day";break;case RelativeDateTimeFormat.Unit.HOUR:m="hour";break;case RelativeDateTimeFormat.Unit.MINUTE:m="minute";break;case RelativeDateTimeFormat.Unit.SECOND:m="second"}return o.format(e,m)},RelativeDateTimeFormat.prototype.formatNumericInternal_=function(e,t){if(!t)return"";var a,i=Math.abs(e);return a=e>0||0==e&&1/e==1/0?t.F:t.P,new MessageFormat("{N,plural,"+a+"}").format({N:i})},RelativeDateTimeFormat.prototype.getUnitStylePattern_=function(e){var t=this.getUnitPattern_(e);return asserts.assertObject(t),this.getStylePattern_(t)},RelativeDateTimeFormat.prototype.getStylePattern_=function(e){switch(this.style_){case RelativeDateTimeFormat.Style.NARROW:if(null!=e.NARROW)return e.NARROW;case RelativeDateTimeFormat.Style.SHORT:if(null!=e.SHORT)return e.SHORT;case RelativeDateTimeFormat.Style.LONG:default:return e.LONG}},RelativeDateTimeFormat.prototype.getFormatStyle=function(){return this.style_},RelativeDateTimeFormat.prototype.getNumericMode=function(){return this.alwaysNumeric_?RelativeDateTimeFormat.NumericOption.ALWAYS:RelativeDateTimeFormat.NumericOption.AUTO},RelativeDateTimeFormat.prototype.getUnitPattern_=function(e){switch(e){default:case RelativeDateTimeFormat.Unit.YEAR:return this.rdtfSymbols_.YEAR;case RelativeDateTimeFormat.Unit.QUARTER:return this.rdtfSymbols_.QUARTER;case RelativeDateTimeFormat.Unit.MONTH:return this.rdtfSymbols_.MONTH;case RelativeDateTimeFormat.Unit.WEEK:return this.rdtfSymbols_.WEEK;case RelativeDateTimeFormat.Unit.DAY:return this.rdtfSymbols_.DAY;case RelativeDateTimeFormat.Unit.HOUR:return this.rdtfSymbols_.HOUR;case RelativeDateTimeFormat.Unit.MINUTE:return this.rdtfSymbols_.MINUTE;case RelativeDateTimeFormat.Unit.SECOND:return this.rdtfSymbols_.SECOND}},RelativeDateTimeFormat.prototype.isOffsetDefinedForUnit=function(e,t){if(null!=this.rdtfSymbols_){var a=this.getUnitStylePattern_(e);return"string"==typeof t&&(t=Number(t)),a&&a.R&&a.R[t]?a.R[t]:void 0}},RelativeDateTimeFormat.prototype.isNativeMode=function(){return this.nativeMode_},RelativeDateTimeFormat.prototype.hasNativeRdtf=function(){var e=goog.global.Intl;return Boolean(e&&e.RelativeTimeFormat)},exports=RelativeDateTimeFormat;