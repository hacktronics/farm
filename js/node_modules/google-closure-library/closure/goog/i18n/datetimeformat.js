goog.provide("goog.i18n.DateTimeFormat"),goog.provide("goog.i18n.DateTimeFormat.Format"),goog.require("goog.asserts"),goog.require("goog.date"),goog.require("goog.i18n.DateTimeSymbols"),goog.require("goog.i18n.TimeZone"),goog.require("goog.string"),goog.i18n.DateTimeFormat=function(e,t){goog.asserts.assert(void 0!==e,"Pattern must be defined"),goog.asserts.assert(void 0!==t||void 0!==goog.i18n.DateTimeSymbols,"goog.i18n.DateTimeSymbols or explicit symbols must be defined"),this.patternParts_=[],this.dateTimeSymbols_=t||goog.i18n.DateTimeSymbols,"number"==typeof e?this.applyStandardPattern_(e):this.applyPattern_(e)},goog.i18n.DateTimeFormat.Format={FULL_DATE:0,LONG_DATE:1,MEDIUM_DATE:2,SHORT_DATE:3,FULL_TIME:4,LONG_TIME:5,MEDIUM_TIME:6,SHORT_TIME:7,FULL_DATETIME:8,LONG_DATETIME:9,MEDIUM_DATETIME:10,SHORT_DATETIME:11},goog.i18n.DateTimeFormat.TOKENS_=[/^\'(?:[^\']|\'\')*(\'|$)/,/^(?:G+|y+|Y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|V+|w+|z+|Z+)/,/^[^\'GyYMkSEahKHcLQdmsvVwzZ]+/],goog.i18n.DateTimeFormat.PartTypes_={QUOTED_STRING:0,FIELD:1,LITERAL:2},goog.i18n.DateTimeFormat.getHours_=function(e){return e.getHours?e.getHours():0},goog.i18n.DateTimeFormat.prototype.applyPattern_=function(e){for(goog.i18n.DateTimeFormat.removeRlmInPatterns_&&(e=e.replace(/\u200f/g,""));e;){for(var t=e,o=0;o<goog.i18n.DateTimeFormat.TOKENS_.length;++o){var r=e.match(goog.i18n.DateTimeFormat.TOKENS_[o]);if(r){var a=r[0];e=e.substring(a.length),o==goog.i18n.DateTimeFormat.PartTypes_.QUOTED_STRING&&(a="''"==a?"'":(a=a.substring(1,"'"==r[1]?a.length-1:a.length)).replace(/\'\'/g,"'")),this.patternParts_.push({text:a,type:o});break}}if(t===e)throw new Error("Malformed pattern part: "+e)}},goog.i18n.DateTimeFormat.prototype.format=function(e,t){if(!e)throw new Error("The date to format must be non-null.");var o=t?6e4*(e.getTimezoneOffset()-t.getOffset(e)):0,r=o?new Date(e.getTime()+o):e,a=r;if(t&&r.getTimezoneOffset()!=e.getTimezoneOffset()){var i=6e4*(r.getTimezoneOffset()-e.getTimezoneOffset());r=new Date(r.getTime()+i),o+=o>0?-goog.date.MS_PER_DAY:goog.date.MS_PER_DAY,a=new Date(e.getTime()+o)}for(var m=[],n=0;n<this.patternParts_.length;++n){var g=this.patternParts_[n].text;goog.i18n.DateTimeFormat.PartTypes_.FIELD==this.patternParts_[n].type?m.push(this.formatField_(g,e,r,a,t)):m.push(g)}return m.join("")},goog.i18n.DateTimeFormat.prototype.applyStandardPattern_=function(e){var t;if(e<4)t=this.dateTimeSymbols_.DATEFORMATS[e];else if(e<8)t=this.dateTimeSymbols_.TIMEFORMATS[e-4];else{if(!(e<12))return void this.applyStandardPattern_(goog.i18n.DateTimeFormat.Format.MEDIUM_DATETIME);t=(t=(t=this.dateTimeSymbols_.DATETIMEFORMATS[e-8]).replace("{1}",this.dateTimeSymbols_.DATEFORMATS[e-8])).replace("{0}",this.dateTimeSymbols_.TIMEFORMATS[e-8])}this.applyPattern_(t)},goog.i18n.DateTimeFormat.prototype.localizeNumbers_=function(e){return goog.i18n.DateTimeFormat.localizeNumbers(e,this.dateTimeSymbols_)},goog.i18n.DateTimeFormat.enforceAsciiDigits_=!1,goog.i18n.DateTimeFormat.removeRlmInPatterns_=!1,goog.i18n.DateTimeFormat.setEnforceAsciiDigits=function(e){goog.i18n.DateTimeFormat.enforceAsciiDigits_=e,goog.i18n.DateTimeFormat.removeRlmInPatterns_=e},goog.i18n.DateTimeFormat.isEnforceAsciiDigits=function(){return goog.i18n.DateTimeFormat.enforceAsciiDigits_},goog.i18n.DateTimeFormat.localizeNumbers=function(e,t){e=String(e);var o=t||goog.i18n.DateTimeSymbols;if(void 0===o.ZERODIGIT||goog.i18n.DateTimeFormat.enforceAsciiDigits_)return e;for(var r=[],a=0;a<e.length;a++){var i=e.charCodeAt(a);r.push(48<=i&&i<=57?String.fromCharCode(o.ZERODIGIT+i-48):e.charAt(a))}return r.join("")},goog.i18n.DateTimeFormat.prototype.formatEra_=function(e,t){var o=t.getFullYear()>0?1:0;return e>=4?this.dateTimeSymbols_.ERANAMES[o]:this.dateTimeSymbols_.ERAS[o]},goog.i18n.DateTimeFormat.prototype.formatYear_=function(e,t){var o=t.getFullYear();return o<0&&(o=-o),2==e&&(o%=100),this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.formatYearOfWeek_=function(e,t){var o=goog.date.getYearOfWeek(t.getFullYear(),t.getMonth(),t.getDate(),this.dateTimeSymbols_.FIRSTWEEKCUTOFFDAY,this.dateTimeSymbols_.FIRSTDAYOFWEEK);return o<0&&(o=-o),2==e&&(o%=100),this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.formatMonth_=function(e,t){var o=t.getMonth();switch(e){case 5:return this.dateTimeSymbols_.NARROWMONTHS[o];case 4:return this.dateTimeSymbols_.MONTHS[o];case 3:return this.dateTimeSymbols_.SHORTMONTHS[o];default:return this.localizeNumbers_(goog.string.padNumber(o+1,e))}},goog.i18n.DateTimeFormat.validateDateHasTime_=function(e){if(!(e.getHours&&e.getSeconds&&e.getMinutes))throw new Error("The date to format has no time (probably a goog.date.Date). Use Date or goog.date.DateTime, or use a pattern without time fields.")},goog.i18n.DateTimeFormat.prototype.format24Hours_=function(e,t){goog.i18n.DateTimeFormat.validateDateHasTime_(t);var o=goog.i18n.DateTimeFormat.getHours_(t)||24;return this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.formatFractionalSeconds_=function(e,t){var o=t.getMilliseconds()/1e3;return this.localizeNumbers_(o.toFixed(Math.min(3,e)).substr(2)+(e>3?goog.string.padNumber(0,e-3):""))},goog.i18n.DateTimeFormat.prototype.formatDayOfWeek_=function(e,t){var o=t.getDay();return e>=4?this.dateTimeSymbols_.WEEKDAYS[o]:this.dateTimeSymbols_.SHORTWEEKDAYS[o]},goog.i18n.DateTimeFormat.prototype.formatAmPm_=function(e,t){goog.i18n.DateTimeFormat.validateDateHasTime_(t);var o=goog.i18n.DateTimeFormat.getHours_(t);return this.dateTimeSymbols_.AMPMS[o>=12&&o<24?1:0]},goog.i18n.DateTimeFormat.prototype.format1To12Hours_=function(e,t){goog.i18n.DateTimeFormat.validateDateHasTime_(t);var o=goog.i18n.DateTimeFormat.getHours_(t)%12||12;return this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.format0To11Hours_=function(e,t){goog.i18n.DateTimeFormat.validateDateHasTime_(t);var o=goog.i18n.DateTimeFormat.getHours_(t)%12;return this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.format0To23Hours_=function(e,t){goog.i18n.DateTimeFormat.validateDateHasTime_(t);var o=goog.i18n.DateTimeFormat.getHours_(t);return this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.formatStandaloneDay_=function(e,t){var o=t.getDay();switch(e){case 5:return this.dateTimeSymbols_.STANDALONENARROWWEEKDAYS[o];case 4:return this.dateTimeSymbols_.STANDALONEWEEKDAYS[o];case 3:return this.dateTimeSymbols_.STANDALONESHORTWEEKDAYS[o];default:return this.localizeNumbers_(goog.string.padNumber(o,1))}},goog.i18n.DateTimeFormat.prototype.formatStandaloneMonth_=function(e,t){var o=t.getMonth();switch(e){case 5:return this.dateTimeSymbols_.STANDALONENARROWMONTHS[o];case 4:return this.dateTimeSymbols_.STANDALONEMONTHS[o];case 3:return this.dateTimeSymbols_.STANDALONESHORTMONTHS[o];default:return this.localizeNumbers_(goog.string.padNumber(o+1,e))}},goog.i18n.DateTimeFormat.prototype.formatQuarter_=function(e,t){var o=Math.floor(t.getMonth()/3);return e<4?this.dateTimeSymbols_.SHORTQUARTERS[o]:this.dateTimeSymbols_.QUARTERS[o]},goog.i18n.DateTimeFormat.prototype.formatDate_=function(e,t){return this.localizeNumbers_(goog.string.padNumber(t.getDate(),e))},goog.i18n.DateTimeFormat.prototype.formatMinutes_=function(e,t){return goog.i18n.DateTimeFormat.validateDateHasTime_(t),this.localizeNumbers_(goog.string.padNumber(t.getMinutes(),e))},goog.i18n.DateTimeFormat.prototype.formatSeconds_=function(e,t){return goog.i18n.DateTimeFormat.validateDateHasTime_(t),this.localizeNumbers_(goog.string.padNumber(t.getSeconds(),e))},goog.i18n.DateTimeFormat.prototype.formatWeekOfYear_=function(e,t){var o=goog.date.getWeekNumber(t.getFullYear(),t.getMonth(),t.getDate(),this.dateTimeSymbols_.FIRSTWEEKCUTOFFDAY,this.dateTimeSymbols_.FIRSTDAYOFWEEK);return this.localizeNumbers_(goog.string.padNumber(o,e))},goog.i18n.DateTimeFormat.prototype.formatTimeZoneRFC_=function(e,t,o){return o=o||goog.i18n.TimeZone.createTimeZone(t.getTimezoneOffset()),e<4?o.getRFCTimeZoneString(t):this.localizeNumbers_(o.getGMTString(t))},goog.i18n.DateTimeFormat.prototype.formatTimeZone_=function(e,t,o){return o=o||goog.i18n.TimeZone.createTimeZone(t.getTimezoneOffset()),e<4?o.getShortName(t):o.getLongName(t)},goog.i18n.DateTimeFormat.prototype.formatTimeZoneId_=function(e,t){return(t=t||goog.i18n.TimeZone.createTimeZone(e.getTimezoneOffset())).getTimeZoneId()},goog.i18n.DateTimeFormat.prototype.formatTimeZoneLocationId_=function(e,t,o){return o=o||goog.i18n.TimeZone.createTimeZone(t.getTimezoneOffset()),e<=2?o.getTimeZoneId():o.getGenericLocation(t)},goog.i18n.DateTimeFormat.prototype.formatField_=function(e,t,o,r,a){var i=e.length;switch(e.charAt(0)){case"G":return this.formatEra_(i,o);case"y":return this.formatYear_(i,o);case"Y":return this.formatYearOfWeek_(i,o);case"M":return this.formatMonth_(i,o);case"k":return this.format24Hours_(i,r);case"S":return this.formatFractionalSeconds_(i,r);case"E":return this.formatDayOfWeek_(i,o);case"a":return this.formatAmPm_(i,r);case"h":return this.format1To12Hours_(i,r);case"K":return this.format0To11Hours_(i,r);case"H":return this.format0To23Hours_(i,r);case"c":return this.formatStandaloneDay_(i,o);case"L":return this.formatStandaloneMonth_(i,o);case"Q":return this.formatQuarter_(i,o);case"d":return this.formatDate_(i,o);case"m":return this.formatMinutes_(i,r);case"s":return this.formatSeconds_(i,r);case"v":return this.formatTimeZoneId_(t,a);case"V":return this.formatTimeZoneLocationId_(i,t,a);case"w":return this.formatWeekOfYear_(i,r);case"z":return this.formatTimeZone_(i,t,a);case"Z":return this.formatTimeZoneRFC_(i,t,a);default:return""}};