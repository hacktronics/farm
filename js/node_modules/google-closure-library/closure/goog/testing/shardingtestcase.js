goog.setTestOnly("goog.testing.ShardingTestCase"),goog.provide("goog.testing.ShardingTestCase"),goog.require("goog.asserts"),goog.require("goog.testing.TestCase"),goog.testing.ShardingTestCase=function(s,t,e){goog.testing.ShardingTestCase.base(this,"constructor",e),goog.asserts.assert(s>0,"Shard index should be positive"),goog.asserts.assert(t>0,"Number of shards should be positive"),goog.asserts.assert(s<=t,"Shard index out of bounds"),this.shardIndex_=s,this.numShards_=t},goog.inherits(goog.testing.ShardingTestCase,goog.testing.TestCase),goog.testing.ShardingTestCase.prototype.sharded_=!1,goog.testing.ShardingTestCase.prototype.runTests=function(){if(!this.sharded_){var s=this.getCount();goog.asserts.assert(s>=this.numShards_,"Must have at least as many tests as shards!");var t=Math.ceil(s/this.numShards_),e=(this.shardIndex_-1)*t,o=e+t;goog.asserts.assert(this.order==goog.testing.TestCase.Order.SORTED,"Only SORTED order is allowed for sharded tests"),this.setTests(this.getTests().slice(e,o)),this.sharded_=!0}goog.testing.ShardingTestCase.base(this,"runTests")},goog.testing.ShardingTestCase.shardByFileName=function(s){var t=window.location.pathname.match(/_(\d+)of(\d+)_test\.(js|html)/);goog.asserts.assert(t,'Filename must be of the form "foo_1of5_test.{js,html}"');var e=parseInt(t[1],10),o=parseInt(t[2],10),g=new goog.testing.ShardingTestCase(e,o,s);goog.testing.TestCase.initializeTestRunner(g)};