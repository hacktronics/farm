goog.provide("goog.testing.net.MockIFrameIo"),goog.require("goog.events.EventTarget"),goog.require("goog.net.ErrorCode"),goog.require("goog.net.EventType"),goog.require("goog.net.IframeIo"),goog.require("goog.testing.TestQueue"),goog.testing.net.MockIFrameIo=function(t){goog.events.EventTarget.call(this),this.testQueue_=t},goog.inherits(goog.testing.net.MockIFrameIo,goog.events.EventTarget),goog.testing.net.MockIFrameIo.prototype.active_=!1,goog.testing.net.MockIFrameIo.prototype.lastContent_="",goog.testing.net.MockIFrameIo.prototype.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,goog.testing.net.MockIFrameIo.prototype.lastError_="",goog.testing.net.MockIFrameIo.prototype.lastCustomError_=null,goog.testing.net.MockIFrameIo.prototype.lastUri_=null,goog.testing.net.MockIFrameIo.prototype.errorChecker_,goog.testing.net.MockIFrameIo.prototype.success_,goog.testing.net.MockIFrameIo.prototype.complete_,goog.testing.net.MockIFrameIo.prototype.send=function(t,e,o,r){if(this.active_)throw new Error("[goog.net.IframeIo] Unable to send, already active.");this.testQueue_.enqueue(["s",t,e,o,r]),this.complete_=!1,this.active_=!0},goog.testing.net.MockIFrameIo.prototype.sendFromForm=function(t,e,o){if(this.active_)throw new Error("[goog.net.IframeIo] Unable to send, already active.");this.testQueue_.enqueue(["s",t,e,o]),this.complete_=!1,this.active_=!0},goog.testing.net.MockIFrameIo.prototype.abort=function(t){this.active_&&(this.testQueue_.enqueue(["a",t]),this.complete_=!1,this.active_=!1,this.success_=!1,this.lastErrorCode_=t||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.ABORT),this.simulateReady())},goog.testing.net.MockIFrameIo.prototype.simulateIncrementalData=function(t){this.dispatchEvent(new goog.net.IframeIo.IncrementalDataEvent(t))},goog.testing.net.MockIFrameIo.prototype.simulateDone=function(t){t?(this.success_=!1,this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getLastError(),this.dispatchEvent(goog.net.EventType.ERROR)):(this.success_=!0,this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,this.dispatchEvent(goog.net.EventType.SUCCESS)),this.complete_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE)},goog.testing.net.MockIFrameIo.prototype.simulateReady=function(){this.dispatchEvent(goog.net.EventType.READY)},goog.testing.net.MockIFrameIo.prototype.isComplete=function(){return this.complete_},goog.testing.net.MockIFrameIo.prototype.isSuccess=function(){return this.success_},goog.testing.net.MockIFrameIo.prototype.isActive=function(){return this.active_},goog.testing.net.MockIFrameIo.prototype.getResponseText=function(){return this.lastContent_},goog.testing.net.MockIFrameIo.prototype.getResponseJson=function(){return JSON.parse(this.lastContent_)},goog.testing.net.MockIFrameIo.prototype.getLastUri=function(){return this.lastUri_},goog.testing.net.MockIFrameIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_},goog.testing.net.MockIFrameIo.prototype.getLastError=function(){return goog.net.ErrorCode.getDebugMessage(this.lastErrorCode_)},goog.testing.net.MockIFrameIo.prototype.getLastCustomError=function(){return this.lastCustomError_},goog.testing.net.MockIFrameIo.prototype.setErrorChecker=function(t){this.errorChecker_=t},goog.testing.net.MockIFrameIo.prototype.getErrorChecker=function(){return this.errorChecker_};