goog.setTestOnly("goog.testing.proto2"),goog.provide("goog.testing.proto2"),goog.require("goog.proto2.Message"),goog.require("goog.proto2.ObjectSerializer"),goog.require("goog.testing.asserts"),goog.testing.proto2.findDifferences_=function(e,o,t){for(var r=e.getDescriptor().getFields(),s=0;s<r.length;s++){var g=r[s],i=(t?t+"/":"")+g.getName();if(e.has(g)&&!o.has(g))return i+" should be present";if(!e.has(g)&&o.has(g))return i+" should not be present";if(e.has(g)){var n=g.isCompositeType();if(g.isRepeated()){var a=e.countOf(g),f=o.countOf(g);if(a!=f)return i+" should have "+a+" items, but has "+f;for(var u=0;u<a;u++){var p=e.get(g,u),c=o.get(g,u);if(n){var l=goog.testing.proto2.findDifferences_(p,c,i+"["+u+"]");if(l)return l}else if(p!=c)return i+"["+u+"] should be "+p+", but was "+c}}else{var d=e.get(g),h=o.get(g);if(n){var v=goog.testing.proto2.findDifferences_(d,h,i);if(v)return v}else if(d!=h)return i+" should be "+d+", but was "+h}}}return""},goog.testing.proto2.assertEquals=function(e,o,t){var r=t||"";e instanceof goog.proto2.Message&&o instanceof goog.proto2.Message||goog.testing.asserts.raiseException(r,"Bad arguments were passed to goog.testing.proto2.assertEquals"),e.constructor!=o.constructor&&goog.testing.asserts.raiseException(r,"Message type mismatch: "+e.getDescriptor().getFullName()+" != "+o.getDescriptor().getFullName());var s=goog.testing.proto2.findDifferences_(e,o,"");s&&goog.testing.asserts.raiseException(r,s)},goog.testing.proto2.fromObject=function(e,o){var t=new goog.proto2.ObjectSerializer(goog.proto2.ObjectSerializer.KeyOption.NAME),r=new e;return t.deserializeTo(r,o),r};