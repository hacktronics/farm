goog.setTestOnly("goog.testing.fs"),goog.provide("goog.testing.fs"),goog.require("goog.Timer"),goog.require("goog.array"),goog.require("goog.async.Deferred"),goog.require("goog.fs"),goog.require("goog.testing.PropertyReplacer"),goog.require("goog.testing.fs.Blob"),goog.require("goog.testing.fs.FileSystem"),goog.testing.fs.getTemporary=function(e){var g=new goog.async.Deferred;return goog.Timer.callOnce(goog.bind(g.callback,g,new goog.testing.fs.FileSystem)),g},goog.testing.fs.getPersistent=function(e){return goog.testing.fs.getTemporary(e)},goog.testing.fs.objectUrls_={},goog.testing.fs.createObjectUrl=function(e){var g=e.toDataUrl();return goog.testing.fs.objectUrls_[g]=!0,g},goog.testing.fs.revokeObjectUrl=function(e){delete goog.testing.fs.objectUrls_[e]},goog.testing.fs.isObjectUrlGranted=function(e){return e.toDataUrl()in goog.testing.fs.objectUrls_},goog.testing.fs.getBlob=function(e){return new goog.testing.fs.Blob(goog.array.map(arguments,String).join(""))},goog.testing.fs.getBlobWithProperties=function(e,g,o){return new goog.testing.fs.Blob(goog.array.map(e,String).join(""),g)},goog.testing.fs.blobToString=function(e,g){var o=new goog.async.Deferred;return goog.Timer.callOnce(goog.bind(o.callback,o,e.toString())),o},goog.testing.fs.sliceBlob=function(e,g,o){return e.slice(g,o)},goog.testing.fs.install=function(e){var g=goog.getObjectByName("goog.fs");e.replace(g,"getTemporary",goog.testing.fs.getTemporary),e.replace(g,"getPersistent",goog.testing.fs.getPersistent),e.replace(g,"createObjectUrl",goog.testing.fs.createObjectUrl),e.replace(g,"revokeObjectUrl",goog.testing.fs.revokeObjectUrl),e.replace(g,"getBlob",goog.testing.fs.getBlob),e.replace(g,"getBlobWithProperties",goog.testing.fs.getBlobWithProperties),e.replace(g,"blobToString",goog.testing.fs.blobToString),e.replace(g,"browserSupportsObjectUrls",function(){return!0})};