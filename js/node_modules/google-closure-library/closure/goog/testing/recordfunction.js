goog.setTestOnly("goog.testing.FunctionCall"),goog.provide("goog.testing.FunctionCall"),goog.provide("goog.testing.recordConstructor"),goog.provide("goog.testing.recordFunction"),goog.require("goog.Promise"),goog.require("goog.promise.Resolver"),goog.require("goog.testing.asserts"),goog.testing.recordedFunction_=function(t){},goog.testing.recordedFunction_.getCallCount=function(){},goog.testing.recordedFunction_.assertCallCount=function(t,o){},goog.testing.recordedFunction_.getCalls=function(){},goog.testing.recordedFunction_.getLastCall=function(){},goog.testing.recordedFunction_.popLastCall=function(){},goog.testing.recordedFunction_.waitForCalls=function(t){},goog.testing.recordedFunction_.reset=function(){},goog.testing.recordFunction=function(t){var o=t||goog.nullFunction,n=[],e=null,g=0;function r(){e&&n.length>=g&&(e.resolve(),e=null,g=0)}function i(){var t=this;try{var e=o.apply(t,arguments);return n.push(new goog.testing.FunctionCall(o,t,arguments,e,null)),r(),e}catch(e){throw n.push(new goog.testing.FunctionCall(o,t,arguments,void 0,e)),r(),e}}return i.getCallCount=function(){return n.length},i.assertCallCount=function(t,o){var e=n.length,g=1==arguments.length?t:o;assertEquals("Expected "+g+" call(s), but was "+e+"."+(1==arguments.length?"":" "+t),g,e)},i.getCalls=function(){return n},i.getLastCall=function(){return n[n.length-1]||null},i.popLastCall=function(){return n.pop()||null},i.waitForCalls=function(t){g=t;var o=(e=goog.Promise.withResolver()).promise;return r(),o},i.reset=function(){n.length=0,e=null,g=0},i},goog.testing.recordFunction.Type,goog.testing.recordConstructor=function(t){var o=goog.testing.recordFunction(t);return o.prototype=t.prototype,goog.mixin(o,t),o},goog.testing.FunctionCall=function(t,o,n,e,g){this.function_=t,this.thisContext_=o,this.arguments_=Array.prototype.slice.call(n),this.returnValue_=e,this.error_=g},goog.testing.FunctionCall.prototype.getFunction=function(){return this.function_},goog.testing.FunctionCall.prototype.getThis=function(){return this.thisContext_},goog.testing.FunctionCall.prototype.getArguments=function(){return this.arguments_},goog.testing.FunctionCall.prototype.getArgument=function(t){return this.arguments_[t]},goog.testing.FunctionCall.prototype.getReturnValue=function(){return this.returnValue_},goog.testing.FunctionCall.prototype.getError=function(){return this.error_};