goog.provide("goog.stats.BasicStat"),goog.require("goog.asserts"),goog.require("goog.log"),goog.require("goog.string.format"),goog.require("goog.structs.CircularBuffer"),goog.stats.BasicStat=function(t){goog.asserts.assert(t>50),this.interval_=t,this.slotInterval_=Math.floor(t/goog.stats.BasicStat.NUM_SLOTS_),this.slots_=new goog.structs.CircularBuffer(goog.stats.BasicStat.NUM_SLOTS_)},goog.stats.BasicStat.NUM_SLOTS_=50,goog.stats.BasicStat.prototype.logger_=goog.log.getLogger("goog.stats.BasicStat"),goog.stats.BasicStat.prototype.getInterval=function(){return this.interval_},goog.stats.BasicStat.prototype.incBy=function(t,o){var s=o||goog.now();this.checkForTimeTravel_(s);var a=this.slots_.getLast();(!a||s>=a.end)&&(a=new goog.stats.BasicStat.Slot_(this.getSlotBoundary_(s)),this.slots_.add(a)),a.count+=t,a.min=Math.min(t,a.min),a.max=Math.max(t,a.max)},goog.stats.BasicStat.prototype.get=function(t){return this.reduceSlots_(t,function(t,o){return t+o.count},0)},goog.stats.BasicStat.prototype.getMax=function(t){return this.reduceSlots_(t,function(t,o){return Math.max(t,o.max)},Number.MIN_VALUE)},goog.stats.BasicStat.prototype.getMin=function(t){return this.reduceSlots_(t,function(t,o){return Math.min(t,o.min)},Number.MAX_VALUE)},goog.stats.BasicStat.prototype.reduceSlots_=function(t,o,s){t=t||goog.now(),this.checkForTimeTravel_(t);for(var a=s,g=this.getSlotBoundary_(t)-this.interval_,r=this.slots_.getCount()-1;r>=0;--r){var e=this.slots_.get(r);if(e.end<=g)break;a=o(a,e)}return a},goog.stats.BasicStat.prototype.getSlotBoundary_=function(t){return this.slotInterval_*(Math.floor(t/this.slotInterval_)+1)},goog.stats.BasicStat.prototype.checkForTimeTravel_=function(t){var o=this.slots_.getLast();if(o){var s=o.end-this.slotInterval_;t<s&&(goog.log.warning(this.logger_,goog.string.format("Went backwards in time: now=%d, slotStart=%d.  Resetting state.",t,s)),this.reset_())}},goog.stats.BasicStat.prototype.reset_=function(){this.slots_.clear()},goog.stats.BasicStat.Slot_=function(t){this.end=t},goog.stats.BasicStat.Slot_.prototype.count=0,goog.stats.BasicStat.Slot_.prototype.min=Number.MAX_VALUE,goog.stats.BasicStat.Slot_.prototype.max=Number.MIN_VALUE;