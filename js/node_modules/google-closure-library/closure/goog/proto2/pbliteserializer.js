goog.provide("goog.proto2.PbLiteSerializer"),goog.require("goog.asserts"),goog.require("goog.proto2.FieldDescriptor"),goog.require("goog.proto2.LazyDeserializer"),goog.require("goog.proto2.Serializer"),goog.proto2.PbLiteSerializer=function(){},goog.inherits(goog.proto2.PbLiteSerializer,goog.proto2.LazyDeserializer),goog.proto2.PbLiteSerializer.prototype.zeroIndexing_=!1,goog.proto2.PbLiteSerializer.prototype.setZeroIndexed=function(e){this.zeroIndexing_=e},goog.proto2.PbLiteSerializer.prototype.serialize=function(e){for(var o=e.getDescriptor().getFields(),r=[],i=this.zeroIndexing_,t=0;t<o.length;t++){var g=o[t];if(e.has(g)){var a=g.getTag(),l=i?a-1:a;if(g.isRepeated()){r[l]=[];for(var p=0;p<e.countOf(g);p++)r[l][p]=this.getSerializedValue(g,e.get(g,p))}else r[l]=this.getSerializedValue(g,e.get(g))}}return e.forEachUnknown(function(e,o){r[i?e-1:e]=o}),r},goog.proto2.PbLiteSerializer.prototype.deserializeField=function(e,o,r){if(null==r)return r;if(o.isRepeated()){var i=[];goog.asserts.assert(goog.isArray(r),"Value must be array: %s",r);for(var t=0;t<r.length;t++)i[t]=this.getDeserializedValue(o,r[t]);return i}return this.getDeserializedValue(o,r)},goog.proto2.PbLiteSerializer.prototype.getSerializedValue=function(e,o){return e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?o?1:0:goog.proto2.Serializer.prototype.getSerializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.getDeserializedValue=function(e,o){return e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?(goog.asserts.assert("number"==typeof o||"boolean"==typeof o,"Value is expected to be a number or boolean"),!!o):goog.proto2.Serializer.prototype.getDeserializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.deserialize=function(e,o){var r=o;if(this.zeroIndexing_)for(var i in r=[],o)r[parseInt(i,10)+1]=o[i];return goog.proto2.PbLiteSerializer.base(this,"deserialize",e,r)};