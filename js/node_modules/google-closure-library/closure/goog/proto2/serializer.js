goog.provide("goog.proto2.Serializer"),goog.require("goog.asserts"),goog.require("goog.proto2.FieldDescriptor"),goog.require("goog.proto2.Message"),goog.proto2.Serializer=function(){},goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS=goog.define("goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS",!1),goog.proto2.Serializer.prototype.serialize=goog.abstractMethod,goog.proto2.Serializer.prototype.getSerializedValue=function(e,o){return e.isCompositeType()?this.serialize(o):"number"!=typeof o||isFinite(o)?o:o.toString()},goog.proto2.Serializer.prototype.deserialize=function(e,o){var r=e.createMessageInstance();return this.deserializeTo(r,o),goog.asserts.assert(r instanceof goog.proto2.Message),r},goog.proto2.Serializer.prototype.deserializeTo=goog.abstractMethod,goog.proto2.Serializer.prototype.getDeserializedValue=function(e,o){if(e.isCompositeType())return o instanceof goog.proto2.Message?o:this.deserialize(e.getFieldMessageType(),o);if(e.getFieldType()==goog.proto2.FieldDescriptor.FieldType.ENUM){if(goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS&&"string"==typeof o){var r=e.getNativeType();if(r.hasOwnProperty(o))return r[o]}if("string"==typeof o&&goog.proto2.Serializer.INTEGER_REGEX.test(o)){var i=Number(o);if(i>0)return i}return o}if(!e.deserializationConversionPermitted())return o;var t=e.getNativeType();if(t===String){if("number"==typeof o)return String(o)}else if(t===Number&&"string"==typeof o){if("Infinity"===o||"-Infinity"===o||"NaN"===o)return Number(o);if(goog.proto2.Serializer.INTEGER_REGEX.test(o))return Number(o)}return o},goog.proto2.Serializer.INTEGER_REGEX=/^-?[0-9]+$/;