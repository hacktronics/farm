goog.provide("goog.events.EventHandler"),goog.forwardDeclare("goog.events.EventWrapper"),goog.require("goog.Disposable"),goog.require("goog.events"),goog.require("goog.object"),goog.events.EventHandler=function(e){goog.Disposable.call(this),this.handler_=e,this.keys_={}},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(e,t,n,o){return this.listen_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithScope=function(e,t,n,o,r){return this.listen_(e,t,n,o,r)},goog.events.EventHandler.prototype.listen_=function(e,t,n,o,r){var s=this;goog.isArray(t)||(t&&(goog.events.EventHandler.typeArray_[0]=t.toString()),t=goog.events.EventHandler.typeArray_);for(var i=0;i<t.length;i++){var g=goog.events.listen(e,t[i],n||s.handleEvent,o||!1,r||s.handler_||s);if(!g)return s;var l=g.key;s.keys_[l]=g}return s},goog.events.EventHandler.prototype.listenOnce=function(e,t,n,o){return this.listenOnce_(e,t,n,o)},goog.events.EventHandler.prototype.listenOnceWithScope=function(e,t,n,o,r){return this.listenOnce_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenOnce_=function(e,t,n,o,r){var s=this;if(goog.isArray(t))for(var i=0;i<t.length;i++)s.listenOnce_(e,t[i],n,o,r);else{var g=goog.events.listenOnce(e,t,n||s.handleEvent,o,r||s.handler_||s);if(!g)return s;var l=g.key;s.keys_[l]=g}return s},goog.events.EventHandler.prototype.listenWithWrapper=function(e,t,n,o){return this.listenWithWrapper_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(e,t,n,o,r){return this.listenWithWrapper_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenWithWrapper_=function(e,t,n,o,r){var s=this;return t.listen(e,n,o,r||s.handler_||s,s),s},goog.events.EventHandler.prototype.getListenerCount=function(){var e=0;for(var t in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,t)&&e++;return e},goog.events.EventHandler.prototype.unlisten=function(e,t,n,o,r){var s=this;if(goog.isArray(t))for(var i=0;i<t.length;i++)s.unlisten(e,t[i],n,o,r);else{var g=goog.isObject(o)?!!o.capture:!!o,l=goog.events.getListener(e,t,n||s.handleEvent,g,r||s.handler_||s);l&&(goog.events.unlistenByKey(l),delete s.keys_[l.key])}return s},goog.events.EventHandler.prototype.unlistenWithWrapper=function(e,t,n,o,r){var s=this;return t.unlisten(e,n,o,r||s.handler_||s,s),s},goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(e,t){this.keys_.hasOwnProperty(t)&&goog.events.unlistenByKey(e)},this),this.keys_={}},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(e){throw new Error("EventHandler.handleEvent not implemented")};