goog.provide("goog.result"),goog.require("goog.array"),goog.require("goog.result.DependentResult"),goog.require("goog.result.Result"),goog.require("goog.result.SimpleResult"),goog.result.successfulResult=function(e){var t=new goog.result.SimpleResult;return t.setValue(e),t},goog.result.failedResult=function(e){var t=new goog.result.SimpleResult;return t.setError(e),t},goog.result.canceledResult=function(){var e=new goog.result.SimpleResult;return e.cancel(),e},goog.result.wait=function(e,t,o){e.wait(t,o)},goog.result.waitOnSuccess=function(e,t,o){goog.result.wait(e,function(e){e.getState()==goog.result.Result.State.SUCCESS&&t.call(this,e.getValue(),e)},o)},goog.result.waitOnError=function(e,t,o){goog.result.wait(e,function(e){e.getState()==goog.result.Result.State.ERROR&&t.call(this,e.getError(),e)},o)},goog.result.transform=function(e,t){var o=new goog.result.DependentResultImpl_([e]);return goog.result.wait(e,function(e){e.getState()==goog.result.Result.State.SUCCESS?o.setValue(t(e.getValue())):o.setError(e.getError())}),o},goog.result.chain=function(e,t,o){var r=new goog.result.DependentResultImpl_([e]);return goog.result.wait(e,function(e){if(e.getState()==goog.result.Result.State.SUCCESS){var u=t.call(o,e);r.addParentResult(u),goog.result.wait(u,function(e){e.getState()==goog.result.Result.State.SUCCESS?r.setValue(e.getValue()):r.setError(e.getError())})}else r.setError(e.getError())}),r},goog.result.combine=function(e){var t=goog.array.clone(arguments),o=new goog.result.DependentResultImpl_(t),r=function(e){return e.getState()!=goog.result.Result.State.PENDING},u=function(){o.getState()==goog.result.Result.State.PENDING&&goog.array.every(t,r)&&o.setValue(t)};return goog.array.forEach(t,function(e){goog.result.wait(e,u)}),o},goog.result.combineOnSuccess=function(e){var t=goog.array.clone(arguments),o=new goog.result.DependentResultImpl_(t),r=function(e){return e.getState()==goog.result.Result.State.SUCCESS};return goog.result.wait(goog.result.combine.apply(goog.result.combine,t),function(e){var t=e.getValue();goog.array.every(t,r)?o.setValue(t):o.setError(t)}),o},goog.result.cancelParentResults=function(e){for(var t=!1,o=e.getParentResults(),r=0;r<o.length;r++)t|=o[r].cancel();return!!t},goog.result.DependentResultImpl_=function(e){goog.result.DependentResultImpl_.base(this,"constructor"),this.parentResults_=e},goog.inherits(goog.result.DependentResultImpl_,goog.result.SimpleResult),goog.result.DependentResultImpl_.prototype.addParentResult=function(e){this.parentResults_.push(e)},goog.result.DependentResultImpl_.prototype.getParentResults=function(){return this.parentResults_};