goog.provide("goog.result.SimpleResult"),goog.provide("goog.result.SimpleResult.StateError"),goog.require("goog.Promise"),goog.require("goog.Thenable"),goog.require("goog.debug.Error"),goog.require("goog.result.Result"),goog.result.SimpleResult=function(){this.state_=goog.result.Result.State.PENDING,this.handlers_=[],this.value_=void 0,this.error_=void 0},goog.Thenable.addImplementation(goog.result.SimpleResult),goog.result.SimpleResult.HandlerEntry_,goog.result.SimpleResult.StateError=function(){goog.result.SimpleResult.StateError.base(this,"constructor","Multiple attempts to set the state of this Result")},goog.inherits(goog.result.SimpleResult.StateError,goog.debug.Error),goog.result.SimpleResult.prototype.getState=function(){return this.state_},goog.result.SimpleResult.prototype.getValue=function(){return this.value_},goog.result.SimpleResult.prototype.getError=function(){return this.error_},goog.result.SimpleResult.prototype.wait=function(t,e){this.isPending_()?this.handlers_.push({callback:t,scope:e||null}):t.call(e,this)},goog.result.SimpleResult.prototype.setValue=function(t){if(this.isPending_())this.value_=t,this.state_=goog.result.Result.State.SUCCESS,this.callHandlers_();else if(!this.isCanceled())throw new goog.result.SimpleResult.StateError},goog.result.SimpleResult.prototype.setError=function(t){if(this.isPending_())this.error_=t,this.state_=goog.result.Result.State.ERROR,this.callHandlers_();else if(!this.isCanceled())throw new goog.result.SimpleResult.StateError},goog.result.SimpleResult.prototype.callHandlers_=function(){var t=this.handlers_;this.handlers_=[];for(var e=0;e<t.length;e++){var o=t[e];o.callback.call(o.scope,this)}},goog.result.SimpleResult.prototype.isPending_=function(){return this.state_==goog.result.Result.State.PENDING},goog.result.SimpleResult.prototype.cancel=function(){return!!this.isPending_()&&(this.setError(new goog.result.Result.CancelError),!0)},goog.result.SimpleResult.prototype.isCanceled=function(){return this.state_==goog.result.Result.State.ERROR&&this.error_ instanceof goog.result.Result.CancelError},goog.result.SimpleResult.prototype.then=function(t,e,o){var r,s,l=new goog.Promise(function(t,e){r=t,s=e});return this.wait(function(t){t.isCanceled()?l.cancel():t.getState()==goog.result.Result.State.SUCCESS?r(t.getValue()):t.getState()==goog.result.Result.State.ERROR&&s(t.getError())}),l.then(t,e,o)},goog.result.SimpleResult.fromPromise=function(t){var e=new goog.result.SimpleResult;return t.then(e.setValue,e.setError,e),e};