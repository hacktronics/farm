goog.provide("goog.fx.AnimationParallelQueue"),goog.provide("goog.fx.AnimationQueue"),goog.provide("goog.fx.AnimationSerialQueue"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.events"),goog.require("goog.fx.Animation"),goog.require("goog.fx.Transition"),goog.require("goog.fx.TransitionBase"),goog.fx.AnimationQueue=function(){goog.fx.AnimationQueue.base(this,"constructor"),this.queue=[]},goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase),goog.fx.AnimationQueue.prototype.add=function(o){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue."),goog.array.contains(this.queue,o)||(this.queue.push(o),goog.events.listen(o,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))},goog.fx.AnimationQueue.prototype.remove=function(o){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue."),goog.array.remove(this.queue,o)&&goog.events.unlisten(o,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)},goog.fx.AnimationQueue.prototype.onAnimationFinish=goog.abstractMethod,goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,function(o){o.dispose()}),this.queue.length=0,goog.fx.AnimationQueue.base(this,"disposeInternal")},goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationParallelQueue.base(this,"constructor"),this.finishedCounter_=0},goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue),goog.fx.AnimationParallelQueue.prototype.play=function(o){if(0==this.queue.length)return!1;if(o||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay(),this.isPaused()&&this.onResume();var i=this.isPaused()&&!o;return this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),goog.array.forEach(this.queue,function(e){i&&!e.isPaused()||e.play(o)}),!0},goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,function(o){o.isPlaying()&&o.pause()}),this.setStatePaused(),this.onPause())},goog.fx.AnimationParallelQueue.prototype.stop=function(o){goog.array.forEach(this.queue,function(i){i.isStopped()||i.stop(o)}),this.setStateStopped(),this.endTime=goog.now(),this.onStop(),this.onEnd()},goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(o){this.finishedCounter_++,this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())},goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationSerialQueue.base(this,"constructor"),this.current_=0},goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue),goog.fx.AnimationSerialQueue.prototype.play=function(o){if(0==this.queue.length)return!1;if(o||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;return this.onPlay(),this.isPaused()&&this.onResume(),this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),this.queue[this.current_].play(o),!0},goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())},goog.fx.AnimationSerialQueue.prototype.stop=function(o){if(this.setStateStopped(),this.endTime=goog.now(),o)for(var i=this.current_;i<this.queue.length;++i){var e=this.queue[i];e.isStopped()&&e.play(),e.isStopped()||e.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop(),this.onEnd()},goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(o){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))};