goog.provide("goog.editor.node"),goog.require("goog.dom"),goog.require("goog.dom.NodeType"),goog.require("goog.dom.TagName"),goog.require("goog.dom.iter.ChildIterator"),goog.require("goog.dom.iter.SiblingIterator"),goog.require("goog.iter"),goog.require("goog.object"),goog.require("goog.string"),goog.require("goog.string.Unicode"),goog.require("goog.userAgent"),goog.editor.node.BLOCK_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.ADDRESS,goog.dom.TagName.ARTICLE,goog.dom.TagName.ASIDE,goog.dom.TagName.BLOCKQUOTE,goog.dom.TagName.BODY,goog.dom.TagName.CAPTION,goog.dom.TagName.CENTER,goog.dom.TagName.COL,goog.dom.TagName.COLGROUP,goog.dom.TagName.DETAILS,goog.dom.TagName.DIR,goog.dom.TagName.DIV,goog.dom.TagName.DL,goog.dom.TagName.DD,goog.dom.TagName.DT,goog.dom.TagName.FIELDSET,goog.dom.TagName.FIGCAPTION,goog.dom.TagName.FIGURE,goog.dom.TagName.FOOTER,goog.dom.TagName.FORM,goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6,goog.dom.TagName.HEADER,goog.dom.TagName.HGROUP,goog.dom.TagName.HR,goog.dom.TagName.ISINDEX,goog.dom.TagName.OL,goog.dom.TagName.LI,goog.dom.TagName.MAIN,goog.dom.TagName.MAP,goog.dom.TagName.MENU,goog.dom.TagName.NAV,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.P,goog.dom.TagName.PRE,goog.dom.TagName.SECTION,goog.dom.TagName.SUMMARY,goog.dom.TagName.TABLE,goog.dom.TagName.TBODY,goog.dom.TagName.TD,goog.dom.TagName.TFOOT,goog.dom.TagName.TH,goog.dom.TagName.THEAD,goog.dom.TagName.TR,goog.dom.TagName.UL),goog.editor.node.NON_EMPTY_TAGS_=goog.object.createSet(goog.dom.TagName.IMG,goog.dom.TagName.IFRAME,goog.dom.TagName.EMBED),goog.editor.node.isStandardsMode=function(o){return goog.dom.getDomHelper(o).isCss1CompatMode()},goog.editor.node.getRightMostLeaf=function(o){for(var g;g=goog.editor.node.getLastChild(o);)o=g;return o},goog.editor.node.getLeftMostLeaf=function(o){for(var g;g=goog.editor.node.getFirstChild(o);)o=g;return o},goog.editor.node.getFirstChild=function(o){return goog.editor.node.getChildHelper_(o,!1)},goog.editor.node.getLastChild=function(o){return goog.editor.node.getChildHelper_(o,!0)},goog.editor.node.getPreviousSibling=function(o){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(o,!1,!0),goog.editor.node.isImportant))},goog.editor.node.getNextSibling=function(o){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(o),goog.editor.node.isImportant))},goog.editor.node.getChildHelper_=function(o,g){return o&&o.nodeType==goog.dom.NodeType.ELEMENT?goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.ChildIterator(o,g),goog.editor.node.isImportant)):null},goog.editor.node.getFirstValue_=function(o){try{return o.next()}catch(o){return null}},goog.editor.node.isImportant=function(o){return o.nodeType==goog.dom.NodeType.ELEMENT||o.nodeType==goog.dom.NodeType.TEXT&&!goog.editor.node.isAllNonNbspWhiteSpace(o)},goog.editor.node.isAllNonNbspWhiteSpace=function(o){return goog.string.isBreakingWhitespace(o.nodeValue)},goog.editor.node.isEmpty=function(o,g){var e=goog.dom.getRawTextContent(o);if(o.getElementsByTagName)for(var t in goog.editor.node.NON_EMPTY_TAGS_)if(o.tagName==t||o.getElementsByTagName(t).length>0)return!1;return!g&&e==goog.string.Unicode.NBSP||goog.string.isBreakingWhitespace(e)},goog.editor.node.getLength=function(o){return o.length||o.childNodes.length},goog.editor.node.findInChildren=function(o,g){for(var e=0,t=o.childNodes.length;e<t;e++)if(g(o.childNodes[e]))return e;return null},goog.editor.node.findHighestMatchingAncestor=function(o,g){for(var e=o.parentNode,t=null;e&&g(e);)t=e,e=e.parentNode;return t},goog.editor.node.isBlockTag=function(o){return!!goog.editor.node.BLOCK_TAG_NAMES_[o.tagName]},goog.editor.node.skipEmptyTextNodes=function(o){for(;o&&o.nodeType==goog.dom.NodeType.TEXT&&!o.nodeValue;)o=o.nextSibling;return o},goog.editor.node.isEditableContainer=function(o){return o.getAttribute&&"true"==o.getAttribute("g_editable")},goog.editor.node.isEditable=function(o){return!!goog.dom.getAncestor(o,goog.editor.node.isEditableContainer)},goog.editor.node.findTopMostEditableAncestor=function(o,g){for(var e=null;o&&!goog.editor.node.isEditableContainer(o);)g(o)&&(e=o),o=o.parentNode;return e},goog.editor.node.splitDomTreeAt=function(o,g,e){for(var t;o!=e&&(t=o.parentNode);)g=goog.editor.node.getSecondHalfOfNode_(t,o,g),o=t;return g},goog.editor.node.getSecondHalfOfNode_=function(o,g,e){for(var t=o.cloneNode(!1);g.nextSibling;)goog.dom.appendChild(t,g.nextSibling);return e&&t.insertBefore(e,t.firstChild),t},goog.editor.node.transferChildren=function(o,g){goog.dom.append(o,g.childNodes)},goog.editor.node.replaceInnerHtml=function(o,g){goog.userAgent.IE&&goog.dom.removeChildren(o),o.innerHTML=g};