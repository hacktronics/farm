goog.provide("goog.graphics.ext.Element"),goog.forwardDeclare("goog.graphics.AbstractGraphics"),goog.forwardDeclare("goog.graphics.Element"),goog.forwardDeclare("goog.graphics.ext.Graphics"),goog.forwardDeclare("goog.graphics.ext.Group"),goog.require("goog.events.EventTarget"),goog.require("goog.functions"),goog.require("goog.graphics.ext.coordinates"),goog.graphics.ext.Element=function(t,e){goog.events.EventTarget.call(this),this.wrapper_=e,this.graphics_=t?t.getGraphics():this,this.xPosition_=new goog.graphics.ext.Element.Position_(this,!0),this.yPosition_=new goog.graphics.ext.Element.Position_(this,!1),t&&(this.parent_=t,this.parent_.addChild(this))},goog.inherits(goog.graphics.ext.Element,goog.events.EventTarget),goog.graphics.ext.Element.prototype.graphics_,goog.graphics.ext.Element.prototype.wrapper_,goog.graphics.ext.Element.prototype.parent_,goog.graphics.ext.Element.prototype.parentDependent_=!1,goog.graphics.ext.Element.prototype.needsTransform_=!1,goog.graphics.ext.Element.prototype.rotation_=0,goog.graphics.ext.Element.prototype.xPosition_,goog.graphics.ext.Element.prototype.yPosition_,goog.graphics.ext.Element.prototype.getWrapper=function(){return this.wrapper_},goog.graphics.ext.Element.prototype.getGraphics=function(){return this.graphics_},goog.graphics.ext.Element.prototype.getGraphicsImplementation=function(){return this.graphics_.getImplementation()},goog.graphics.ext.Element.prototype.getParent=function(){return this.parent_},goog.graphics.ext.Element.prototype.setPosition_=function(t,e,o,i){t.setPosition(e,o),this.computeIsParentDependent_(t),this.needsTransform_=!0,i||this.transform()},goog.graphics.ext.Element.prototype.setSize_=function(t,e,o){t.setSize(e)?(this.needsTransform_=!0,this.computeIsParentDependent_(t),o||this.reset()):!o&&this.isPendingTransform()&&this.reset()},goog.graphics.ext.Element.prototype.setMinSize_=function(t,e){t.setMinSize(e),this.needsTransform_=!0,this.computeIsParentDependent_(t)},goog.graphics.ext.Element.prototype.getLeft=function(){return this.xPosition_.getStart()},goog.graphics.ext.Element.prototype.setLeft=function(t,e){this.setPosition_(this.xPosition_,t,goog.graphics.ext.Element.PositionType_.START,e)},goog.graphics.ext.Element.prototype.getRight=function(){return this.xPosition_.getEnd()},goog.graphics.ext.Element.prototype.setRight=function(t,e){this.setPosition_(this.xPosition_,t,goog.graphics.ext.Element.PositionType_.END,e)},goog.graphics.ext.Element.prototype.getCenter=function(){return this.xPosition_.getMiddle()},goog.graphics.ext.Element.prototype.setCenter=function(t,e){this.setPosition_(this.xPosition_,t,goog.graphics.ext.Element.PositionType_.MIDDLE,e)},goog.graphics.ext.Element.prototype.getTop=function(){return this.yPosition_.getStart()},goog.graphics.ext.Element.prototype.setTop=function(t,e){this.setPosition_(this.yPosition_,t,goog.graphics.ext.Element.PositionType_.START,e)},goog.graphics.ext.Element.prototype.getBottom=function(){return this.yPosition_.getEnd()},goog.graphics.ext.Element.prototype.setBottom=function(t,e){this.setPosition_(this.yPosition_,t,goog.graphics.ext.Element.PositionType_.END,e)},goog.graphics.ext.Element.prototype.getMiddle=function(){return this.yPosition_.getMiddle()},goog.graphics.ext.Element.prototype.setMiddle=function(t,e){this.setPosition_(this.yPosition_,t,goog.graphics.ext.Element.PositionType_.MIDDLE,e)},goog.graphics.ext.Element.prototype.getWidth=function(){return this.xPosition_.getSize()},goog.graphics.ext.Element.prototype.setWidth=function(t,e){this.setSize_(this.xPosition_,t,e)},goog.graphics.ext.Element.prototype.getMinWidth=function(){return this.xPosition_.getMinSize()},goog.graphics.ext.Element.prototype.setMinWidth=function(t){this.setMinSize_(this.xPosition_,t)},goog.graphics.ext.Element.prototype.getHeight=function(){return this.yPosition_.getSize()},goog.graphics.ext.Element.prototype.setHeight=function(t,e){this.setSize_(this.yPosition_,t,e)},goog.graphics.ext.Element.prototype.getMinHeight=function(){return this.yPosition_.getMinSize()},goog.graphics.ext.Element.prototype.setMinHeight=function(t){this.setMinSize_(this.yPosition_,t)},goog.graphics.ext.Element.prototype.setPosition=function(t,e,o){this.setLeft(t,!0),this.setTop(e,o)},goog.graphics.ext.Element.prototype.setSize=function(t,e,o){this.setWidth(t,!0),this.setHeight(e,o)},goog.graphics.ext.Element.prototype.setBounds=function(t,e,o,i,n){this.setLeft(t,!0),this.setTop(e,!0),this.setWidth(o,!0),this.setHeight(i,n)},goog.graphics.ext.Element.prototype.getMaxX=function(){return this.xPosition_.getMaxPosition()},goog.graphics.ext.Element.prototype.getMaxY=function(){return this.yPosition_.getMaxPosition()},goog.graphics.ext.Element.prototype.reset=function(){this.xPosition_.resetCache(),this.yPosition_.resetCache(),this.redraw(),this.needsTransform_=!0,this.transform()},goog.graphics.ext.Element.prototype.redraw=goog.nullFunction,goog.graphics.ext.Element.prototype.computeIsParentDependent_=function(t){this.parentDependent_=t.isParentDependent()||this.xPosition_.isParentDependent()||this.yPosition_.isParentDependent()||this.checkParentDependent()},goog.graphics.ext.Element.prototype.isParentDependent=function(){return this.parentDependent_},goog.graphics.ext.Element.prototype.checkParentDependent=goog.functions.FALSE,goog.graphics.ext.Element.prototype.setRotation=function(t){this.rotation_!=t&&(this.rotation_=t,this.needsTransform_=!0,this.transform())},goog.graphics.ext.Element.prototype.getRotation=function(){return this.rotation_},goog.graphics.ext.Element.prototype.parentTransform=function(){this.needsTransform_=this.needsTransform_||this.parentDependent_},goog.graphics.ext.Element.prototype.isPendingTransform=function(){return this.needsTransform_},goog.graphics.ext.Element.prototype.transform=function(){this.isPendingTransform()&&(this.needsTransform_=!1,this.wrapper_.setTransformation(this.getLeft(),this.getTop(),this.rotation_,(this.getWidth()||1)/2,(this.getHeight()||1)/2))},goog.graphics.ext.Element.prototype.getPixelScaleX=function(){return this.getGraphics().getPixelScaleX()},goog.graphics.ext.Element.prototype.getPixelScaleY=function(){return this.getGraphics().getPixelScaleY()},goog.graphics.ext.Element.prototype.disposeInternal=function(){goog.graphics.ext.Element.superClass_.disposeInternal.call(this),this.wrapper_.dispose()},goog.graphics.ext.Element.PositionType_={START:0,MIDDLE:1,END:2},goog.graphics.ext.Element.Position_=function(t,e){this.element_=t,this.horizontal_=e},goog.graphics.ext.Element.Position_.prototype.getCoordinateCache_=function(){return this.coordinateCache_||(this.coordinateCache_={})},goog.graphics.ext.Element.Position_.prototype.getParentSize_=function(){var t=this.element_.getParent();return this.horizontal_?t.getCoordinateWidth():t.getCoordinateHeight()},goog.graphics.ext.Element.Position_.prototype.getMinSize=function(){return this.getValue_(this.minSize_)},goog.graphics.ext.Element.Position_.prototype.setMinSize=function(t){this.minSize_=t,this.resetCache()},goog.graphics.ext.Element.Position_.prototype.getSize=function(){return Math.max(this.getValue_(this.size_),this.getMinSize())},goog.graphics.ext.Element.Position_.prototype.setSize=function(t){return t!=this.size_&&(this.size_=t,this.resetCache(),!0)},goog.graphics.ext.Element.Position_.prototype.getValue_=function(t,e){if(!goog.graphics.ext.coordinates.isSpecial(t))return parseFloat(String(t));var o,i=this.getCoordinateCache_(),n=this.horizontal_?this.element_.getPixelScaleX():this.element_.getPixelScaleY();if(e)o=goog.graphics.ext.coordinates.computeValue(this.size_||0,0,n);else{var s=this.element_.getParent();o=this.horizontal_?s.getWidth():s.getHeight()}return goog.graphics.ext.coordinates.getValue(t,e,o,n,i)},goog.graphics.ext.Element.Position_.prototype.getStart=function(){if(null==this.cachedValue_){var t=this.getValue_(this.distance_);this.distanceType_==goog.graphics.ext.Element.PositionType_.START?this.cachedValue_=t:this.distanceType_==goog.graphics.ext.Element.PositionType_.MIDDLE?this.cachedValue_=t+(this.getParentSize_()-this.getSize())/2:this.cachedValue_=this.getParentSize_()-t-this.getSize()}return this.cachedValue_},goog.graphics.ext.Element.Position_.prototype.getMiddle=function(){return this.distanceType_==goog.graphics.ext.Element.PositionType_.MIDDLE?this.getValue_(this.distance_):(this.getParentSize_()-this.getSize())/2-this.getStart()},goog.graphics.ext.Element.Position_.prototype.getEnd=function(){return this.distanceType_==goog.graphics.ext.Element.PositionType_.END?this.getValue_(this.distance_):this.getParentSize_()-this.getStart()-this.getSize()},goog.graphics.ext.Element.Position_.prototype.setPosition=function(t,e){this.distance_=t,this.distanceType_=e,this.cachedValue_=null},goog.graphics.ext.Element.Position_.prototype.getMaxPosition=function(){return this.getValue_(this.distance_||0)+(goog.graphics.ext.coordinates.isSpecial(this.size_)?0:this.getSize())},goog.graphics.ext.Element.Position_.prototype.resetCache=function(){this.coordinateCache_=null,this.cachedValue_=null},goog.graphics.ext.Element.Position_.prototype.isParentDependent=function(){return this.distanceType_!=goog.graphics.ext.Element.PositionType_.START||goog.graphics.ext.coordinates.isSpecial(this.size_)||goog.graphics.ext.coordinates.isSpecial(this.minSize_)||goog.graphics.ext.coordinates.isSpecial(this.distance_)},goog.graphics.ext.Element.Position_.prototype.cachedValue_=null,goog.graphics.ext.Element.Position_.prototype.coordinateCache_=null,goog.graphics.ext.Element.Position_.prototype.minSize_=0,goog.graphics.ext.Element.Position_.prototype.size_=0,goog.graphics.ext.Element.Position_.prototype.distance_=0,goog.graphics.ext.Element.Position_.prototype.distanceType_=goog.graphics.ext.Element.PositionType_.START;