goog.provide("goog.cssom"),goog.provide("goog.cssom.CssRuleType"),goog.require("goog.array"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.cssom.CssRuleType={STYLE:1,IMPORT:3,MEDIA:4,FONT_FACE:5,PAGE:6,NAMESPACE:7},goog.cssom.getAllCssText=function(e){var s=e||document.styleSheets;return goog.cssom.getAllCss_(s,!0)},goog.cssom.getAllCssStyleRules=function(e){var s=e||document.styleSheets;return goog.cssom.getAllCss_(s,!1)},goog.cssom.getCssRulesFromStyleSheet=function(e){var s=null;try{s=e.cssRules||e.rules}catch(s){if(15==s.code)throw s.styleSheet=e,s}return s},goog.cssom.getAllCssStyleSheets=function(e,s){var t=[],o=e||document.styleSheets,r=void 0!==s&&s;if(o.imports&&o.imports.length)for(var l=0,g=o.imports.length;l<g;l++)goog.array.extend(t,goog.cssom.getAllCssStyleSheets(o.imports[l]));else if(o.length)for(l=0,g=o.length;l<g;l++)goog.array.extend(t,goog.cssom.getAllCssStyleSheets(o[l]));else{var n=goog.cssom.getCssRulesFromStyleSheet(o);if(n&&n.length){var u;for(l=0,g=n.length;l<g;l++)(u=n[l]).styleSheet&&goog.array.extend(t,goog.cssom.getAllCssStyleSheets(u.styleSheet))}}return!(o.type||o.rules||o.cssRules)||o.disabled&&!r||t.push(o),t},goog.cssom.getCssTextFromCssRule=function(e){var s="";try{s=e.cssText}catch(e){return""}if(!s&&e.style&&e.style.cssText&&e.selectorText){var t=e.style.cssText.replace(/\s*-closure-parent-stylesheet:\s*\[object\];?\s*/gi,"").replace(/\s*-closure-rule-index:\s*[\d]+;?\s*/gi,"");s=e.selectorText+" { "+t+" }"}return s},goog.cssom.getCssRuleIndexInParentStyleSheet=function(e,s){if(e.style&&e.style["-closure-rule-index"])return e.style["-closure-rule-index"];var t=s||goog.cssom.getParentStyleSheet(e);if(!t)throw new Error("Cannot find a parentStyleSheet.");var o=goog.cssom.getCssRulesFromStyleSheet(t);if(o&&o.length)for(var r=0,l=o.length;r<l;r++)if(o[r]==e)return r;return-1},goog.cssom.getParentStyleSheet=function(e){return e.parentStyleSheet||e.style&&e.style["-closure-parent-stylesheet"]},goog.cssom.replaceCssRule=function(e,s,t,o){var r=t||goog.cssom.getParentStyleSheet(e);if(!r)throw new Error("Cannot proceed without the parentStyleSheet.");var l=Number(o)>=0?Number(o):goog.cssom.getCssRuleIndexInParentStyleSheet(e,r);if(!(l>=0))throw new Error("Cannot proceed without the index of the cssRule.");goog.cssom.removeCssRule(r,l),goog.cssom.addCssRule(r,s,l)},goog.cssom.addCssRule=function(e,s,t){var o=t;(null==o||o<0)&&(o=goog.cssom.getCssRulesFromStyleSheet(e).length);if(e.insertRule)e.insertRule(s,o);else{var r=/^([^\{]+)\{([^\{]+)\}/.exec(s);if(3!=r.length)throw new Error("Your CSSRule appears to be ill-formatted.");var l=r[1],g=r[2];e.addRule(l,g,o)}},goog.cssom.removeCssRule=function(e,s){e.deleteRule?e.deleteRule(s):e.removeRule(s)},goog.cssom.addCssText=function(e,s){var t=s||goog.dom.getDomHelper(),o=t.getDocument(),r=t.createElement(goog.dom.TagName.STYLE);if(r.type="text/css",t.getElementsByTagName(goog.dom.TagName.HEAD)[0].appendChild(r),r.styleSheet)r.styleSheet.cssText=e;else{var l=o.createTextNode(e);r.appendChild(l)}return r},goog.cssom.getFileNameFromStyleSheet=function(e){var s=e.href;return s?/([^\/\?]+)[^\/]*$/.exec(s)[1]:null},goog.cssom.getAllCss_=function(e,s){for(var t=[],o=goog.cssom.getAllCssStyleSheets(e),r=0;e=o[r];r++){var l=goog.cssom.getCssRulesFromStyleSheet(e);if(l&&l.length)for(var g,n=0,u=0,c=l.length;u<c;u++){if(g=l[u],s&&!g.href){var a=goog.cssom.getCssTextFromCssRule(g);t.push(a)}else g.href||(g.style&&(g.parentStyleSheet||(g.style["-closure-parent-stylesheet"]=e),g.style["-closure-rule-index"]=s?void 0:n),t.push(g));s||n++}}return s?t.join(" "):t};