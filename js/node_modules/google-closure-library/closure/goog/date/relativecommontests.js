goog.provide("goog.date.relativeCommonTests"),goog.setTestOnly("goog.date.relativeCommonTests"),goog.require("goog.date.DateTime"),goog.require("goog.date.relative"),goog.require("goog.i18n.DateTimeFormat"),goog.require("goog.i18n.DateTimePatterns_ar"),goog.require("goog.i18n.DateTimePatterns_bn"),goog.require("goog.i18n.DateTimePatterns_es"),goog.require("goog.i18n.DateTimePatterns_fa"),goog.require("goog.i18n.DateTimePatterns_fr"),goog.require("goog.i18n.DateTimePatterns_no"),goog.require("goog.i18n.DateTimeSymbols_ar"),goog.require("goog.i18n.DateTimeSymbols_bn"),goog.require("goog.i18n.DateTimeSymbols_es"),goog.require("goog.i18n.DateTimeSymbols_fa"),goog.require("goog.i18n.DateTimeSymbols_fr"),goog.require("goog.i18n.DateTimeSymbols_no"),goog.require("goog.i18n.NumberFormatSymbols_bn"),goog.require("goog.i18n.NumberFormatSymbols_en"),goog.require("goog.i18n.NumberFormatSymbols_fa"),goog.require("goog.i18n.NumberFormatSymbols_no"),goog.require("goog.i18n.relativeDateTimeSymbols"),goog.require("goog.testing.PropertyReplacer"),goog.require("goog.testing.jsunit");var RelativeDateTimeSymbols,stubs=new goog.testing.PropertyReplacer,baseTime=new Date(2009,2,23,14,31,6).getTime(),propertyReplacer=new goog.testing.PropertyReplacer;function setUpPage(){propertyReplacer.replace(goog,"now",function(){return baseTime}),propertyReplacer.replace(goog,"LOCALE","en-US"),RelativeDateTimeSymbols=goog.module.get("goog.i18n.relativeDateTimeSymbols")}function setUp(){propertyReplacer.replace(goog,"LOCALE","en-US"),goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_en}function tearDown(){stubs.reset(),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_en)}function testFormatRelativeForPastDates(){var e=goog.date.relative.format;assertEquals("Should round seconds to the minute below","0 minutes ago",e(timestamp("23 March 2009 14:30:10"))),assertEquals("Should round seconds to the minute below","1 minute ago",e(timestamp("23 March 2009 14:29:56"))),assertEquals("Should round seconds to the minute below","2 minutes ago",e(timestamp("23 March 2009 14:29:00"))),assertEquals("10 minutes ago",e(timestamp("23 March 2009 14:20:10"))),assertEquals("59 minutes ago",e(timestamp("23 March 2009 13:31:42"))),assertEquals("2 hours ago",e(timestamp("23 March 2009 12:20:56"))),assertEquals("23 hours ago",e(timestamp("22 March 2009 15:30:56"))),assertEquals("1 day ago",e(timestamp("22 March 2009 12:11:04"))),assertEquals("1 day ago",e(timestamp("22 March 2009 00:00:00"))),assertEquals("2 days ago",e(timestamp("21 March 2009 23:59:59"))),assertEquals("2 days ago",e(timestamp("21 March 2009 10:30:56"))),assertEquals("2 days ago",e(timestamp("21 March 2009 00:00:00"))),assertEquals("3 days ago",e(timestamp("20 March 2009 23:59:59")))}function testFormatRelativeForFutureDates(){var e=goog.date.relative.format;assertEquals("Should round seconds to the minute below","in 1 minute",e(timestamp("23 March 2009 14:32:05"))),assertEquals("Should round seconds to the minute below","in 2 minutes",e(timestamp("23 March 2009 14:33:00"))),assertEquals("in 1 minute",e(timestamp("23 March 2009 14:32:00"))),assertEquals("in 10 minutes",e(timestamp("23 March 2009 14:40:10"))),assertEquals("in 59 minutes",e(timestamp("23 March 2009 15:29:15"))),assertEquals("in 2 hours",e(timestamp("23 March 2009 17:20:56"))),assertEquals("in 23 hours",e(timestamp("24 March 2009 13:30:56"))),assertEquals("in 1 day",e(timestamp("24 March 2009 14:31:07"))),assertEquals("in 1 day",e(timestamp("24 March 2009 16:11:04"))),assertEquals("in 1 day",e(timestamp("24 March 2009 23:59:59"))),assertEquals("in 2 days",e(timestamp("25 March 2009 00:00:00"))),assertEquals("in 2 days",e(timestamp("25 March 2009 10:30:56"))),assertEquals("in 2 days",e(timestamp("25 March 2009 23:59:59"))),assertEquals("in 3 days",e(timestamp("26 March 2009 00:00:00")))}function testFormatPast(){var e=goog.date.relative.formatPast;assertEquals("59 minutes ago",e(timestamp("23 March 2009 13:31:42"))),assertEquals("0 minutes ago",e(timestamp("23 March 2009 14:32:05"))),assertEquals("0 minutes ago",e(timestamp("23 March 2009 14:33:00"))),assertEquals("0 minutes ago",e(timestamp("25 March 2009 10:30:56")))}function testFormatDayNotShort(){stubs.set(goog.date.relative,"monthDateFormatter_",null);var e=goog.date.relative.formatDay;assertEquals("Sep 25",e(timestamp("25 September 2009 10:31:06"))),assertEquals("Mar 25",e(timestamp("25 March 2009 00:12:19")))}function testFormatDay(){stubs.set(goog.date.relative,"monthDateFormatter_",null);var e=goog.date.relative.formatDay,a=new goog.i18n.DateTimeFormat(goog.i18n.DateTimeFormat.Format.SHORT_DATE),t=goog.bind(a.format,a);assertEquals("Sep 25",e(timestamp("25 September 2009 10:31:06"))),assertEquals("Mar 25",e(timestamp("25 March 2009 00:12:19"))),goog.date.relative.setCasingMode(!1),assertEquals("tomorrow",e(timestamp("24 March 2009 10:31:06"))),assertEquals("tomorrow",e(timestamp("24 March 2009 00:12:19"))),assertEquals("today",e(timestamp("23 March 2009 10:31:06"))),assertEquals("today",e(timestamp("23 March 2009 00:12:19"))),assertEquals("yesterday",e(timestamp("22 March 2009 23:48:12"))),assertEquals("yesterday",e(timestamp("22 March 2009 04:11:23"))),assertEquals("Mar 21",e(timestamp("21 March 2009 15:54:45"))),assertEquals("Mar 19",e(timestamp("19 March 2009 01:22:11"))),goog.date.relative.setCasingMode(!0),assertEquals("Tomorrow",e(timestamp("24 March 2009 10:31:06"))),assertEquals("Tomorrow",e(timestamp("24 March 2009 00:12:19"))),assertEquals("Today",e(timestamp("23 March 2009 10:31:06"),t)),assertEquals("Today",e(timestamp("23 March 2009 00:12:19"),t)),assertEquals("Yesterday",e(timestamp("22 March 2009 23:48:12"),t)),assertEquals("Yesterday",e(timestamp("22 March 2009 04:11:23"),t)),goog.date.relative.setCasingMode(!1),assertEquals("today",e(timestamp("23 March 2009 10:31:06"),t)),assertEquals("today",e(timestamp("23 March 2009 00:12:19"),t)),assertEquals("yesterday",e(timestamp("22 March 2009 23:48:12"),t)),assertEquals("yesterday",e(timestamp("22 March 2009 04:11:23"),t));var s=t(gdatetime(timestamp("21 March 2009 15:54:45")));assertEquals(s,e(timestamp("21 March 2009 15:54:45"),t)),s=t(gdatetime(timestamp("19 March 2009 01:22:11"))),assertEquals(s,e(timestamp("19 March 2009 01:22:11"),t)),s=t(gdatetime(timestamp("1 January 2010 01:22:11"))),assertEquals(s,e(timestamp("1 January 2010 01:22:11"),t))}function testGetDateString(){var e=goog.date.relative.getDateString;assertEquals("2:21 PM (10 minutes ago)",e(new Date(baseTime-6e5))),assertEquals("4:31 AM (10 hours ago)",e(new Date(baseTime-36e6))),assertEquals("Friday, March 13, 2009 (10 days ago)",e(new Date(baseTime-864e6))),assertEquals("Tuesday, March 3, 2009",e(new Date(baseTime-1728e6))),assertEquals("2:21 PM (10 minutes ago)",e(gdatetime(baseTime-6e5))),assertEquals("4:31 AM (10 hours ago)",e(gdatetime(baseTime-36e6))),assertEquals("Friday, March 13, 2009 (10 days ago)",e(gdatetime(baseTime-864e6))),assertEquals("Tuesday, March 3, 2009",e(gdatetime(baseTime-1728e6)))}function testGetPastDateString(){var e=goog.date.relative.getPastDateString;assertEquals("2:21 PM (10 minutes ago)",e(new Date(baseTime-6e5))),assertEquals("2:30 PM (1 minute ago)",e(new Date(baseTime-6e4))),assertEquals("2:41 PM (0 minutes ago)",e(new Date(baseTime+6e5))),assertEquals("2:21 PM (10 minutes ago)",e(gdatetime(baseTime-6e5))),assertEquals("2:31 PM (0 minutes ago)",e(gdatetime(baseTime))),assertEquals("2:30 PM (1 minute ago)",e(gdatetime(baseTime-6e4))),assertEquals("2:41 PM (0 minutes ago)",e(gdatetime(baseTime+6e5)))}function testFormatSpanish(){var e=goog.date.relative.formatDay;propertyReplacer.replace(goog,"LOCALE","es"),stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_es),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_es),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_es),goog.date.relative.setCasingMode(!0),assertEquals("Pasado ma√±ana",e(timestamp("25 March 2009 20:59:59"))),assertEquals("Anteayer",e(timestamp("21 March 2009 19:00:02"))),assertEquals("Ayer",e(timestamp("22 March 2009 04:11:23"))),assertEquals("Hoy",e(timestamp("23 March 2009 14:11:23"))),assertEquals("Ma√±ana",e(timestamp("24 March 2009 12:10:23"))),goog.date.relative.setCasingMode(!1),assertEquals("pasado ma√±ana",e(timestamp("25 March 2009 20:59:59"))),assertEquals("anteayer",e(timestamp("21 March 2009 19:00:02"))),assertEquals("ayer",e(timestamp("22 March 2009 04:11:23"))),assertEquals("hoy",e(timestamp("23 March 2009 14:11:23"))),assertEquals("ma√±ana",e(timestamp("24 March 2009 12:10:23"))),assertEquals("26 mar.",e(timestamp("26 March 2009 12:10:23"))),assertEquals("28 feb.",e(timestamp("28 February 2009 12:10:23"))),e=goog.date.relative.format,assertEquals("Should round seconds to the minute below","dentro de 1 minuto",e(timestamp("23 March 2009 14:32:05"))),assertEquals("Should round seconds to the minute below","dentro de 9 minutos",e(timestamp("23 March 2009 14:39:07"))),assertEquals("Should round days to the day below","dentro de 1 d√≠a",e(timestamp("24 March 2009 14:32:05"))),assertEquals("Should round days to the day below","dentro de 8 d√≠as",e(timestamp("31 March 2009 14:39:07"))),assertEquals("Should round hours to the hour below","hace 1 hora",e(timestamp("23 March 2009 13:31:05"))),assertEquals("Should round hour to the hour below","hace 8 horas",e(timestamp("23 March 2009 06:31:04")))}function testFormatFrench(){var e=goog.date.relative.formatDay;propertyReplacer.replace(goog,"LOCALE","fr"),stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_fr),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_fr),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_fr),goog.date.relative.setCasingMode(!0),assertEquals("Apr√®s-demain",e(timestamp("25 March 2009 20:59:59"))),assertEquals("Avant-hier",e(timestamp("21 March 2009 19:00:02"))),assertEquals("Hier",e(timestamp("22 March 2009 04:11:23"))),assertEquals("Aujourd‚Äôhui",e(timestamp("23 March 2009 14:11:23"))),assertEquals("Demain",e(timestamp("24 March 2009 12:10:23"))),goog.date.relative.setCasingMode(!1),assertEquals("apr√®s-demain",e(timestamp("25 March 2009 20:59:59"))),assertEquals("avant-hier",e(timestamp("21 March 2009 19:00:02"))),assertEquals("hier",e(timestamp("22 March 2009 04:11:23"))),assertEquals("aujourd‚Äôhui",e(timestamp("23 March 2009 14:11:23"))),assertEquals("demain",e(timestamp("24 March 2009 12:10:23"))),assertEquals("26 mars",e(timestamp("26 March 2009 12:10:23"))),assertEquals("28 f√©vr.",e(timestamp("28 February 2009 12:10:23"))),e=goog.date.relative.format,assertEquals("Should round seconds to the minute below","dans 1 minute",e(timestamp("23 March 2009 14:32:05"))),assertEquals("Should round seconds to the minute below","dans 9 minutes",e(timestamp("23 March 2009 14:39:07"))),assertEquals("Should round days to the day below","dans 1 jour",e(timestamp("24 March 2009 14:32:05"))),assertEquals("Should round days to the day below","dans 8 jours",e(timestamp("31 March 2009 14:39:07"))),assertEquals("Should round hours to the hour below","il y a 1 heure",e(timestamp("23 March 2009 13:31:05"))),assertEquals("Should round hour to the hour below","il y a 8 heures",e(timestamp("23 March 2009 06:31:04")))}function testFormatArabic(){var e=goog.date.relative.formatDay;propertyReplacer.replace(goog,"LOCALE","ar"),stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_ar),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_ar),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_ar),assertEquals("ÿ®ÿπÿØ ÿßŸÑÿ∫ÿØ",e(timestamp("25 March 2009 20:59:59"))),assertEquals("ÿ£ŸàŸÑ ÿ£ŸÖÿ≥",e(timestamp("21 March 2009 19:00:02"))),assertEquals("ÿ£ŸÖÿ≥",e(timestamp("22 March 2009 04:11:23"))),assertEquals("ÿßŸÑŸäŸàŸÖ",e(timestamp("23 March 2009 14:11:23"))),assertEquals("ÿ∫ÿØŸãÿß",e(timestamp("24 March 2009 12:10:23"))),assertEquals("26 ŸÖÿßÿ±ÿ≥",e(timestamp("26 March 2009 12:10:23"))),assertEquals("28 ŸÅÿ®ÿ±ÿßŸäÿ±",e(timestamp("28 February 2009 12:10:23")))}function testFormatRelativeForPastDatesPersianDigits(){stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_fa),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_fa),stubs.set(goog.i18n,"NumberFormatSymbols",goog.i18n.NumberFormatSymbols_fa);var e=goog.date.relative.format;propertyReplacer.replace(goog,"LOCALE","en-u-nu-arabext"),assertEquals("Should round seconds to the minute below",localizeNumber(0)+" minutes ago",e(timestamp("23 March 2009 14:30:10"))),assertEquals("Should round seconds to the minute below",localizeNumber(1)+" minute ago",e(timestamp("23 March 2009 14:29:56"))),assertEquals("Should round seconds to the minute below",localizeNumber(2)+" minutes ago",e(timestamp("23 March 2009 14:29:00"))),assertEquals(localizeNumber(10)+" minutes ago",e(timestamp("23 March 2009 14:20:10"))),assertEquals(localizeNumber(59)+" minutes ago",e(timestamp("23 March 2009 13:31:42"))),assertEquals(localizeNumber(2)+" hours ago",e(timestamp("23 March 2009 12:20:56"))),assertEquals(localizeNumber(23)+" hours ago",e(timestamp("22 March 2009 15:30:56"))),assertEquals(localizeNumber(1)+" day ago",e(timestamp("22 March 2009 12:11:04"))),assertEquals(localizeNumber(1)+" day ago",e(timestamp("22 March 2009 00:00:00"))),assertEquals(localizeNumber(2)+" days ago",e(timestamp("21 March 2009 23:59:59"))),assertEquals(localizeNumber(2)+" days ago",e(timestamp("21 March 2009 10:30:56"))),assertEquals(localizeNumber(2)+" days ago",e(timestamp("21 March 2009 00:00:00"))),assertEquals(localizeNumber(3)+" days ago",e(timestamp("20 March 2009 23:59:59"))),propertyReplacer.replace(goog,"LOCALE","fa"),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_fa);const a=e(timestamp("21 March 2009 10:30:56"));assertEquals("€≤ ÿ±Ÿàÿ≤ Ÿæ€åÿ¥",a)}function testFormatRelativeForFutureDatesBengaliDigits(){stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_bn),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_bn),stubs.set(goog.i18n,"NumberFormatSymbols",goog.i18n.NumberFormatSymbols_bn),propertyReplacer.replace(goog,"LOCALE","en-u-nu-beng");var e=goog.date.relative.format;assertEquals("Should round seconds to the minute below","in "+localizeNumber(1)+" minute",e(timestamp("23 March 2009 14:32:05"))),assertEquals("Should round seconds to the minute below","in "+localizeNumber(2)+" minutes",e(timestamp("23 March 2009 14:33:00"))),assertEquals("in "+localizeNumber(10)+" minutes",e(timestamp("23 March 2009 14:40:10"))),assertEquals("in "+localizeNumber(59)+" minutes",e(timestamp("23 March 2009 15:29:15"))),assertEquals("in "+localizeNumber(2)+" hours",e(timestamp("23 March 2009 17:20:56"))),assertEquals("in "+localizeNumber(23)+" hours",e(timestamp("24 March 2009 13:30:56"))),assertEquals("in "+localizeNumber(1)+" day",e(timestamp("24 March 2009 14:31:07"))),assertEquals("in "+localizeNumber(1)+" day",e(timestamp("24 March 2009 16:11:04"))),assertEquals("in "+localizeNumber(1)+" day",e(timestamp("24 March 2009 23:59:59"))),assertEquals("in "+localizeNumber(2)+" days",e(timestamp("25 March 2009 00:00:00"))),assertEquals("in "+localizeNumber(2)+" days",e(timestamp("25 March 2009 10:30:56"))),assertEquals("in "+localizeNumber(2)+" days",e(timestamp("25 March 2009 23:59:59"))),assertEquals("in "+localizeNumber(3)+" days",e(timestamp("26 March 2009 00:00:00"))),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_bn),propertyReplacer.replace(goog,"LOCALE","bn");const a=e(timestamp("23 March 2009 14:32:05"));assertEquals("Should round seconds to the minute below","‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá",a);const t=e(timestamp("26 March 2009 00:00:00"));assertEquals("Should be Bengali text with Bengali digit.","‡ß© ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá",t)}function testFormatRelativeForFutureDatesNorwegian(){stubs.set(goog.date.relative,"monthDateFormatter_",null),stubs.set(goog.i18n,"DateTimeSymbols",goog.i18n.DateTimeSymbols_no),stubs.set(goog.i18n,"DateTimePatterns",goog.i18n.DateTimePatterns_no),stubs.set(goog.i18n,"NumberFormatSymbols",goog.i18n.NumberFormatSymbols_no),RelativeDateTimeSymbols.setRelativeDateTimeSymbols(RelativeDateTimeSymbols.RelativeDateTimeSymbols_no),propertyReplacer.replace(goog,"LOCALE","no");var e=goog.date.relative.format;assertEquals("om 1 minutt",e(timestamp("23 March 2009 14:32:05")))}function localizeNumber(e){return"number"==typeof e&&(e=e.toString()),goog.i18n.DateTimeFormat.localizeNumbers(e)}function gdatetime(e){return new goog.date.DateTime(new Date(e))}function timestamp(e){return new Date(e).getTime()}function testUpcasing(){var e=goog.date.relative.upcase;assertEquals("today","Today",e("today")),assertEquals("Today","Today",e("Today")),assertEquals("TODAY","TODAY",e("TODAY")),assertEquals("tODAY","TODAY",e("tODAY")),assertEquals("","ƒÄbc",e("ƒÅbc")),assertEquals("","ƒÄbc",e("ƒÄbc")),assertEquals("Greek 1","ŒëŒ≤Œ≥",e("ŒëŒ≤Œ≥")),assertEquals("Greek 2","ŒëŒ≤Œ≥",e("Œ±Œ≤Œ≥")),assertEquals("Cyrillic","–ê—í—ë",e("–∞—í—ë")),assertEquals("Adlam","‚ÄÆû§Äû§¶û§∑",e("‚ÄÆû§Äû§¶û§∑")),assertEquals("Chakma","ëÑÉëÑ¨ëÑåëÑ¥ëÑ•ëÑ≥ëÑ†",e("ëÑÉëÑ¨ëÑåëÑ¥ëÑ•ëÑ≥ëÑ†"))}