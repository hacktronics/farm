goog.provide("goog.uri.utils"),goog.provide("goog.uri.utils.ComponentIndex"),goog.provide("goog.uri.utils.QueryArray"),goog.provide("goog.uri.utils.QueryValue"),goog.provide("goog.uri.utils.StandardQueryParam"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.string"),goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63},goog.uri.utils.buildFromEncodedParts=function(o,u,r,i,t,g,n){var e="";return o&&(e+=o+":"),r&&(e+="//",u&&(e+=u+"@"),e+=r,i&&(e+=":"+i)),t&&(e+=t),g&&(e+="?"+g),n&&(e+="#"+n),e},goog.uri.utils.splitRe_=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$"),goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},goog.uri.utils.split=function(o){return o.match(goog.uri.utils.splitRe_)},goog.uri.utils.decodeIfPossible_=function(o,u){return o?u?decodeURI(o):decodeURIComponent(o):o},goog.uri.utils.getComponentByIndex_=function(o,u){return goog.uri.utils.split(u)[o]||null},goog.uri.utils.getScheme=function(o){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,o)},goog.uri.utils.getEffectiveScheme=function(o){var u=goog.uri.utils.getScheme(o);if(!u&&goog.global.self&&goog.global.self.location){var r=goog.global.self.location.protocol;u=r.substr(0,r.length-1)}return u?u.toLowerCase():""},goog.uri.utils.getUserInfoEncoded=function(o){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,o)},goog.uri.utils.getUserInfo=function(o){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(o))},goog.uri.utils.getDomainEncoded=function(o){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,o)},goog.uri.utils.getDomain=function(o){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(o),!0)},goog.uri.utils.getPort=function(o){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,o))||null},goog.uri.utils.getPathEncoded=function(o){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,o)},goog.uri.utils.getPath=function(o){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(o),!0)},goog.uri.utils.getQueryData=function(o){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,o)},goog.uri.utils.getFragmentEncoded=function(o){var u=o.indexOf("#");return u<0?null:o.substr(u+1)},goog.uri.utils.setFragmentEncoded=function(o,u){return goog.uri.utils.removeFragment(o)+(u?"#"+u:"")},goog.uri.utils.getFragment=function(o){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(o))},goog.uri.utils.getHost=function(o){var u=goog.uri.utils.split(o);return goog.uri.utils.buildFromEncodedParts(u[goog.uri.utils.ComponentIndex.SCHEME],u[goog.uri.utils.ComponentIndex.USER_INFO],u[goog.uri.utils.ComponentIndex.DOMAIN],u[goog.uri.utils.ComponentIndex.PORT])},goog.uri.utils.getOrigin=function(o){var u=goog.uri.utils.split(o);return goog.uri.utils.buildFromEncodedParts(u[goog.uri.utils.ComponentIndex.SCHEME],null,u[goog.uri.utils.ComponentIndex.DOMAIN],u[goog.uri.utils.ComponentIndex.PORT])},goog.uri.utils.getPathAndAfter=function(o){var u=goog.uri.utils.split(o);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,u[goog.uri.utils.ComponentIndex.PATH],u[goog.uri.utils.ComponentIndex.QUERY_DATA],u[goog.uri.utils.ComponentIndex.FRAGMENT])},goog.uri.utils.removeFragment=function(o){var u=o.indexOf("#");return u<0?o:o.substr(0,u)},goog.uri.utils.haveSameDomain=function(o,u){var r=goog.uri.utils.split(o),i=goog.uri.utils.split(u);return r[goog.uri.utils.ComponentIndex.DOMAIN]==i[goog.uri.utils.ComponentIndex.DOMAIN]&&r[goog.uri.utils.ComponentIndex.SCHEME]==i[goog.uri.utils.ComponentIndex.SCHEME]&&r[goog.uri.utils.ComponentIndex.PORT]==i[goog.uri.utils.ComponentIndex.PORT]},goog.uri.utils.assertNoFragmentsOrQueries_=function(o){goog.asserts.assert(o.indexOf("#")<0&&o.indexOf("?")<0,"goog.uri.utils: Fragment or query identifiers are not supported: [%s]",o)},goog.uri.utils.QueryValue,goog.uri.utils.QueryArray,goog.uri.utils.parseQueryData=function(o,u){if(o)for(var r=o.split("&"),i=0;i<r.length;i++){var t=r[i].indexOf("="),g=null,n=null;t>=0?(g=r[i].substring(0,t),n=r[i].substring(t+1)):g=r[i],u(g,n?goog.string.urlDecode(n):"")}},goog.uri.utils.splitQueryData_=function(o){var u=o.indexOf("#");u<0&&(u=o.length);var r,i=o.indexOf("?");return i<0||i>u?(i=u,r=""):r=o.substring(i+1,u),[o.substr(0,i),r,o.substr(u)]},goog.uri.utils.joinQueryData_=function(o){return o[0]+(o[1]?"?"+o[1]:"")+o[2]},goog.uri.utils.appendQueryData_=function(o,u){return u?o?o+"&"+u:u:o},goog.uri.utils.appendQueryDataToUri_=function(o,u){if(!u)return o;var r=goog.uri.utils.splitQueryData_(o);return r[1]=goog.uri.utils.appendQueryData_(r[1],u),goog.uri.utils.joinQueryData_(r)},goog.uri.utils.appendKeyValuePairs_=function(o,u,r){if(goog.asserts.assertString(o),goog.isArray(u)){goog.asserts.assertArray(u);for(var i=0;i<u.length;i++)goog.uri.utils.appendKeyValuePairs_(o,String(u[i]),r)}else null!=u&&r.push(o+(""===u?"":"="+goog.string.urlEncode(u)))},goog.uri.utils.buildQueryData=function(o,u){goog.asserts.assert(Math.max(o.length-(u||0),0)%2==0,"goog.uri.utils: Key/value lists must be even in length.");for(var r=[],i=u||0;i<o.length;i+=2){var t=o[i];goog.uri.utils.appendKeyValuePairs_(t,o[i+1],r)}return r.join("&")},goog.uri.utils.buildQueryDataFromMap=function(o){var u=[];for(var r in o)goog.uri.utils.appendKeyValuePairs_(r,o[r],u);return u.join("&")},goog.uri.utils.appendParams=function(o,u){var r=2==arguments.length?goog.uri.utils.buildQueryData(arguments[1],0):goog.uri.utils.buildQueryData(arguments,1);return goog.uri.utils.appendQueryDataToUri_(o,r)},goog.uri.utils.appendParamsFromMap=function(o,u){var r=goog.uri.utils.buildQueryDataFromMap(u);return goog.uri.utils.appendQueryDataToUri_(o,r)},goog.uri.utils.appendParam=function(o,u,r){var i=null!=r?"="+goog.string.urlEncode(r):"";return goog.uri.utils.appendQueryDataToUri_(o,u+i)},goog.uri.utils.findParam_=function(o,u,r,i){for(var t=u,g=r.length;(t=o.indexOf(r,t))>=0&&t<i;){var n=o.charCodeAt(t-1);if(n==goog.uri.utils.CharCode_.AMPERSAND||n==goog.uri.utils.CharCode_.QUESTION){var e=o.charCodeAt(t+g);if(!e||e==goog.uri.utils.CharCode_.EQUAL||e==goog.uri.utils.CharCode_.AMPERSAND||e==goog.uri.utils.CharCode_.HASH)return t}t+=g+1}return-1},goog.uri.utils.hashOrEndRe_=/#|$/,goog.uri.utils.hasParam=function(o,u){return goog.uri.utils.findParam_(o,0,u,o.search(goog.uri.utils.hashOrEndRe_))>=0},goog.uri.utils.getParamValue=function(o,u){var r=o.search(goog.uri.utils.hashOrEndRe_),i=goog.uri.utils.findParam_(o,0,u,r);if(i<0)return null;var t=o.indexOf("&",i);return(t<0||t>r)&&(t=r),i+=u.length+1,goog.string.urlDecode(o.substr(i,t-i))},goog.uri.utils.getParamValues=function(o,u){for(var r,i=o.search(goog.uri.utils.hashOrEndRe_),t=0,g=[];(r=goog.uri.utils.findParam_(o,t,u,i))>=0;)((t=o.indexOf("&",r))<0||t>i)&&(t=i),r+=u.length+1,g.push(goog.string.urlDecode(o.substr(r,t-r)));return g},goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/,goog.uri.utils.removeParam=function(o,u){for(var r,i=o.search(goog.uri.utils.hashOrEndRe_),t=0,g=[];(r=goog.uri.utils.findParam_(o,t,u,i))>=0;)g.push(o.substring(t,r)),t=Math.min(o.indexOf("&",r)+1||i,i);return g.push(o.substr(t)),g.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")},goog.uri.utils.setParam=function(o,u,r){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(o,u),u,r)},goog.uri.utils.setParamsFromMap=function(o,u){var r=goog.uri.utils.splitQueryData_(o),i=r[1],t=[];return i&&goog.array.forEach(i.split("&"),function(o){var r=o.indexOf("="),i=r>=0?o.substr(0,r):o;u.hasOwnProperty(i)||t.push(o)}),r[1]=goog.uri.utils.appendQueryData_(t.join("&"),goog.uri.utils.buildQueryDataFromMap(u)),goog.uri.utils.joinQueryData_(r)},goog.uri.utils.appendPath=function(o,u){return goog.uri.utils.assertNoFragmentsOrQueries_(o),goog.string.endsWith(o,"/")&&(o=o.substr(0,o.length-1)),goog.string.startsWith(u,"/")&&(u=u.substr(1)),goog.string.buildString(o,"/",u)},goog.uri.utils.setPath=function(o,u){goog.string.startsWith(u,"/")||(u="/"+u);var r=goog.uri.utils.split(o);return goog.uri.utils.buildFromEncodedParts(r[goog.uri.utils.ComponentIndex.SCHEME],r[goog.uri.utils.ComponentIndex.USER_INFO],r[goog.uri.utils.ComponentIndex.DOMAIN],r[goog.uri.utils.ComponentIndex.PORT],u,r[goog.uri.utils.ComponentIndex.QUERY_DATA],r[goog.uri.utils.ComponentIndex.FRAGMENT])},goog.uri.utils.StandardQueryParam={RANDOM:"zx"},goog.uri.utils.makeUnique=function(o){return goog.uri.utils.setParam(o,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};