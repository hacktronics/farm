goog.provide("goog.crypt.Sha2"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.crypt.Hash"),goog.crypt.Sha2=function(h,t){goog.crypt.Sha2.base(this,"constructor"),this.blockSize=goog.crypt.Sha2.BLOCKSIZE_,this.chunk_=goog.global.Uint8Array?new Uint8Array(this.blockSize):new Array(this.blockSize),this.inChunk_=0,this.total_=0,this.hash_=[],this.numHashBlocks_=h,this.initHashBlocks_=t,this.w_=goog.global.Int32Array?new Int32Array(64):new Array(64),void 0===goog.crypt.Sha2.Kx_&&(goog.global.Int32Array?goog.crypt.Sha2.Kx_=new Int32Array(goog.crypt.Sha2.K_):goog.crypt.Sha2.Kx_=goog.crypt.Sha2.K_),this.reset()},goog.inherits(goog.crypt.Sha2,goog.crypt.Hash),goog.crypt.Sha2.BLOCKSIZE_=64,goog.crypt.Sha2.PADDING_=goog.array.concat(128,goog.array.repeat(0,goog.crypt.Sha2.BLOCKSIZE_-1)),goog.crypt.Sha2.prototype.reset=function(){this.inChunk_=0,this.total_=0,this.hash_=goog.global.Int32Array?new Int32Array(this.initHashBlocks_):goog.array.clone(this.initHashBlocks_)},goog.crypt.Sha2.prototype.computeChunk_=function(){var h=this.chunk_;goog.asserts.assert(h.length==this.blockSize);for(var t=this.w_,o=0,s=0;s<h.length;)t[o++]=h[s]<<24|h[s+1]<<16|h[s+2]<<8|h[s+3],s=4*o;for(var r=16;r<64;r++){var a=0|t[r-15],i=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,g=0|t[r-2],_=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10,n=(0|t[r-16])+i|0,e=(0|t[r-7])+_|0;t[r]=n+e|0}var c=0|this.hash_[0],y=0|this.hash_[1],p=0|this.hash_[2],u=0|this.hash_[3],S=0|this.hash_[4],k=0|this.hash_[5],l=0|this.hash_[6],f=0|this.hash_[7];for(r=0;r<64;r++){var b=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&y^c&p^y&p)|0,v=(n=f+((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))|0)+((e=(S&k^~S&l)+(0|goog.crypt.Sha2.Kx_[r])|0)+(0|t[r])|0)|0;f=l,l=k,k=S,S=u+v|0,u=p,p=y,y=c,c=v+b|0}this.hash_[0]=this.hash_[0]+c|0,this.hash_[1]=this.hash_[1]+y|0,this.hash_[2]=this.hash_[2]+p|0,this.hash_[3]=this.hash_[3]+u|0,this.hash_[4]=this.hash_[4]+S|0,this.hash_[5]=this.hash_[5]+k|0,this.hash_[6]=this.hash_[6]+l|0,this.hash_[7]=this.hash_[7]+f|0},goog.crypt.Sha2.prototype.update=function(h,t){void 0===t&&(t=h.length);var o=0,s=this.inChunk_;if("string"==typeof h)for(;o<t;)this.chunk_[s++]=h.charCodeAt(o++),s==this.blockSize&&(this.computeChunk_(),s=0);else{if(!goog.isArrayLike(h))throw new Error("message must be string or array");for(;o<t;){var r=h[o++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw new Error("message must be a byte array");this.chunk_[s++]=r,s==this.blockSize&&(this.computeChunk_(),s=0)}}this.inChunk_=s,this.total_+=t},goog.crypt.Sha2.prototype.digest=function(){var h=[],t=8*this.total_;this.inChunk_<56?this.update(goog.crypt.Sha2.PADDING_,56-this.inChunk_):this.update(goog.crypt.Sha2.PADDING_,this.blockSize-(this.inChunk_-56));for(var o=63;o>=56;o--)this.chunk_[o]=255&t,t/=256;this.computeChunk_();var s=0;for(o=0;o<this.numHashBlocks_;o++)for(var r=24;r>=0;r-=8)h[s++]=this.hash_[o]>>r&255;return h},goog.crypt.Sha2.K_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],goog.crypt.Sha2.Kx_;