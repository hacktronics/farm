goog.provide("goog.crypt.Sha2_64bit"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.crypt.Hash"),goog.require("goog.math.Long"),goog.crypt.Sha2_64bit=function(t,o){goog.crypt.Sha2_64bit.base(this,"constructor"),this.blockSize=goog.crypt.Sha2_64bit.BLOCK_SIZE_,this.chunk_=goog.global.Uint8Array?new Uint8Array(this.blockSize):new Array(this.blockSize),this.chunkBytes_=0,this.total_=0,this.hash_=[],this.numHashBlocks_=t,this.w_=[],this.initHashBlocks_=goog.crypt.Sha2_64bit.toLongArray_(o),this.needsReset_=!1,this.reset()},goog.inherits(goog.crypt.Sha2_64bit,goog.crypt.Hash),goog.crypt.Sha2_64bit.BLOCK_SIZE_=128,goog.crypt.Sha2_64bit.PADDING_=goog.array.concat([128],goog.array.repeat(0,goog.crypt.Sha2_64bit.BLOCK_SIZE_-1)),goog.crypt.Sha2_64bit.prototype.reset=function(){this.chunkBytes_=0,this.total_=0,this.hash_=goog.array.clone(this.initHashBlocks_),this.needsReset_=!1},goog.crypt.Sha2_64bit.prototype.update=function(t,o){var h=void 0!==o?o:t.length;if(this.needsReset_)throw new Error("this hasher needs to be reset");var i=this.chunkBytes_;if("string"==typeof t)for(var s=0;s<h;s++){if((g=t.charCodeAt(s))>255)throw new Error("Characters must be in range [0,255]");this.chunk_[i++]=g,i==this.blockSize&&(this.computeChunk_(),i=0)}else{if(!goog.isArrayLike(t))throw new Error("message must be string or array");for(s=0;s<h;s++){var g;if("number"!=typeof(g=t[s])||g<0||g>255||g!=(0|g))throw new Error("message must be a byte array");this.chunk_[i++]=g,i==this.blockSize&&(this.computeChunk_(),i=0)}}this.chunkBytes_=i,this.total_+=h},goog.crypt.Sha2_64bit.prototype.digest=function(){if(this.needsReset_)throw new Error("this hasher needs to be reset");var t=8*this.total_;this.chunkBytes_<112?this.update(goog.crypt.Sha2_64bit.PADDING_,112-this.chunkBytes_):this.update(goog.crypt.Sha2_64bit.PADDING_,this.blockSize-this.chunkBytes_+112);for(var o=127;o>=112;o--)this.chunk_[o]=255&t,t/=256;this.computeChunk_();var h=0,i=new Array(8*this.numHashBlocks_);for(o=0;o<this.numHashBlocks_;o++){for(var s=this.hash_[o],g=s.getHighBits(),e=s.getLowBits(),r=24;r>=0;r-=8)i[h++]=g>>r&255;for(r=24;r>=0;r-=8)i[h++]=e>>r&255}return this.needsReset_=!0,i},goog.crypt.Sha2_64bit.prototype.computeChunk_=function(){for(var t=this.chunk_,o=goog.crypt.Sha2_64bit.K_,h=this.w_,i=0;i<16;i++){var s=8*i;h[i]=new goog.math.Long(t[s+4]<<24|t[s+5]<<16|t[s+6]<<8|t[s+7],t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])}for(i=16;i<80;i++){var g=this.sigma0_(h[i-15]),e=this.sigma1_(h[i-2]);h[i]=this.sum_(h[i-16],h[i-7],g,e)}var r=this.hash_[0],a=this.hash_[1],_=this.hash_[2],n=this.hash_[3],c=this.hash_[4],y=this.hash_[5],p=this.hash_[6],u=this.hash_[7];for(i=0;i<80;i++){var B=this.Sigma0_(r),b=this.majority_(r,a,_),w=B.add(b),S=this.Sigma1_(c),d=this.choose_(c,y,p),m=this.sum_(u,S,d,o[i],h[i]);u=p,p=y,y=c,c=n.add(m),n=_,_=a,a=r,r=m.add(w)}this.hash_[0]=this.hash_[0].add(r),this.hash_[1]=this.hash_[1].add(a),this.hash_[2]=this.hash_[2].add(_),this.hash_[3]=this.hash_[3].add(n),this.hash_[4]=this.hash_[4].add(c),this.hash_[5]=this.hash_[5].add(y),this.hash_[6]=this.hash_[6].add(p),this.hash_[7]=this.hash_[7].add(u)},goog.crypt.Sha2_64bit.prototype.sigma0_=function(t){var o=t.getLowBits(),h=t.getHighBits(),i=o>>>1^h<<31^o>>>8^h<<24^o>>>7^h<<25,s=h>>>1^o<<31^h>>>8^o<<24^h>>>7;return new goog.math.Long(i,s)},goog.crypt.Sha2_64bit.prototype.sigma1_=function(t){var o=t.getLowBits(),h=t.getHighBits(),i=o>>>19^h<<13^h>>>29^o<<3^o>>>6^h<<26,s=h>>>19^o<<13^o>>>29^h<<3^h>>>6;return new goog.math.Long(i,s)},goog.crypt.Sha2_64bit.prototype.Sigma0_=function(t){var o=t.getLowBits(),h=t.getHighBits(),i=o>>>28^h<<4^h>>>2^o<<30^h>>>7^o<<25,s=h>>>28^o<<4^o>>>2^h<<30^o>>>7^h<<25;return new goog.math.Long(i,s)},goog.crypt.Sha2_64bit.prototype.Sigma1_=function(t){var o=t.getLowBits(),h=t.getHighBits(),i=o>>>14^h<<18^o>>>18^h<<14^h>>>9^o<<23,s=h>>>14^o<<18^h>>>18^o<<14^o>>>9^h<<23;return new goog.math.Long(i,s)},goog.crypt.Sha2_64bit.prototype.choose_=function(t,o,h){var i=t.getLowBits(),s=t.getHighBits();return new goog.math.Long(i&o.getLowBits()|~i&h.getLowBits(),s&o.getHighBits()|~s&h.getHighBits())},goog.crypt.Sha2_64bit.prototype.majority_=function(t,o,h){return new goog.math.Long(t.getLowBits()&o.getLowBits()|o.getLowBits()&h.getLowBits()|t.getLowBits()&h.getLowBits(),t.getHighBits()&o.getHighBits()|o.getHighBits()&h.getHighBits()|t.getHighBits()&h.getHighBits())},goog.crypt.Sha2_64bit.prototype.sum_=function(t,o,h){for(var i=(2147483648^t.getLowBits())+(2147483648^o.getLowBits()),s=t.getHighBits()+o.getHighBits(),g=arguments.length-1;g>=2;--g)i+=2147483648^arguments[g].getLowBits(),s+=arguments[g].getHighBits();return 1&arguments.length&&(i+=2147483648),s+=arguments.length>>1,s+=Math.floor(i/4294967296),new goog.math.Long(i,s)},goog.crypt.Sha2_64bit.toLongArray_=function(t){goog.asserts.assert(t.length%2==0);for(var o=[],h=0;h<t.length;h+=2)o.push(new goog.math.Long(t[h+1],t[h]));return o},goog.crypt.Sha2_64bit.K_=goog.crypt.Sha2_64bit.toLongArray_([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);