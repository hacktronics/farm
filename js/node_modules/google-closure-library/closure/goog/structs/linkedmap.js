goog.provide("goog.structs.LinkedMap"),goog.require("goog.structs.Map"),goog.structs.LinkedMap=function(t,e,o){this.maxCount_=t||null,this.cache_=!!e,this.evictionCallback_=o,this.map_=new goog.structs.Map,this.head_=new goog.structs.LinkedMap.Node_("",void 0),this.head_.next=this.head_.prev=this.head_},goog.structs.LinkedMap.prototype.findAndMoveToTop_=function(t){var e=this.map_.get(t);return e&&this.cache_&&(e.remove(),this.insert_(e)),e},goog.structs.LinkedMap.prototype.get=function(t,e){var o=this.findAndMoveToTop_(t);return o?o.value:e},goog.structs.LinkedMap.prototype.peekValue=function(t,e){var o=this.map_.get(t);return o?o.value:e},goog.structs.LinkedMap.prototype.set=function(t,e){var o=this.findAndMoveToTop_(t);o?o.value=e:(o=new goog.structs.LinkedMap.Node_(t,e),this.map_.set(t,o),this.insert_(o))},goog.structs.LinkedMap.prototype.peek=function(){return this.head_.next.value},goog.structs.LinkedMap.prototype.peekLast=function(){return this.head_.prev.value},goog.structs.LinkedMap.prototype.shift=function(){return this.popNode_(this.head_.next)},goog.structs.LinkedMap.prototype.pop=function(){return this.popNode_(this.head_.prev)},goog.structs.LinkedMap.prototype.remove=function(t){var e=this.map_.get(t);return!!e&&(this.removeNode(e),!0)},goog.structs.LinkedMap.prototype.removeNode=function(t){t.remove(),this.map_.remove(t.key)},goog.structs.LinkedMap.prototype.getCount=function(){return this.map_.getCount()},goog.structs.LinkedMap.prototype.isEmpty=function(){return this.map_.isEmpty()},goog.structs.LinkedMap.prototype.setEvictionCallback=function(t){this.evictionCallback_=t},goog.structs.LinkedMap.prototype.setMaxCount=function(t){this.maxCount_=t||null,null!=this.maxCount_&&this.truncate_(this.maxCount_)},goog.structs.LinkedMap.prototype.getKeys=function(){return this.map(function(t,e){return e})},goog.structs.LinkedMap.prototype.getValues=function(){return this.map(function(t,e){return t})},goog.structs.LinkedMap.prototype.contains=function(t){return this.some(function(e){return e==t})},goog.structs.LinkedMap.prototype.containsKey=function(t){return this.map_.containsKey(t)},goog.structs.LinkedMap.prototype.clear=function(){this.truncate_(0)},goog.structs.LinkedMap.prototype.forEach=function(t,e){for(var o=this.head_.next;o!=this.head_;o=o.next)t.call(e,o.value,o.key,this)},goog.structs.LinkedMap.prototype.map=function(t,e){for(var o=[],n=this.head_.next;n!=this.head_;n=n.next)o.push(t.call(e,n.value,n.key,this));return o},goog.structs.LinkedMap.prototype.some=function(t,e){for(var o=this.head_.next;o!=this.head_;o=o.next)if(t.call(e,o.value,o.key,this))return!0;return!1},goog.structs.LinkedMap.prototype.every=function(t,e){for(var o=this.head_.next;o!=this.head_;o=o.next)if(!t.call(e,o.value,o.key,this))return!1;return!0},goog.structs.LinkedMap.prototype.insert_=function(t){this.cache_?(t.next=this.head_.next,t.prev=this.head_,this.head_.next=t,t.next.prev=t):(t.prev=this.head_.prev,t.next=this.head_,this.head_.prev=t,t.prev.next=t),null!=this.maxCount_&&this.truncate_(this.maxCount_)},goog.structs.LinkedMap.prototype.truncate_=function(t){for(;this.getCount()>t;){var e=this.cache_?this.head_.prev:this.head_.next;this.removeNode(e),this.evictionCallback_&&this.evictionCallback_(e.key,e.value)}},goog.structs.LinkedMap.prototype.popNode_=function(t){return this.head_!=t&&this.removeNode(t),t.value},goog.structs.LinkedMap.Node_=function(t,e){this.key=t,this.value=e},goog.structs.LinkedMap.Node_.prototype.next,goog.structs.LinkedMap.Node_.prototype.prev,goog.structs.LinkedMap.Node_.prototype.remove=function(){this.prev.next=this.next,this.next.prev=this.prev,delete this.prev,delete this.next};