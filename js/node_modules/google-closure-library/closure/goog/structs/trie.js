goog.provide("goog.structs.Trie"),goog.require("goog.object"),goog.require("goog.structs"),goog.structs.Trie=function(t){this.value_=void 0,this.childNodes_={},t&&this.setAll(t)},goog.structs.Trie.prototype.set=function(t,e){this.setOrAdd_(t,e,!1)},goog.structs.Trie.prototype.add=function(t,e){this.setOrAdd_(t,e,!0)},goog.structs.Trie.prototype.setOrAdd_=function(t,e,o){for(var r=this,s=0;s<t.length;s++){var i=t.charAt(s);r.childNodes_[i]||(r.childNodes_[i]=new goog.structs.Trie),r=r.childNodes_[i]}if(o&&void 0!==r.value_)throw new Error('The collection already contains the key "'+t+'"');r.value_=e},goog.structs.Trie.prototype.setAll=function(t){for(var e=goog.structs.getKeys(t),o=goog.structs.getValues(t),r=0;r<e.length;r++)this.set(e[r],o[r])},goog.structs.Trie.prototype.getChildNode_=function(t){for(var e=this,o=0;o<t.length;o++){var r=t.charAt(o);if(!(e=e.childNodes_[r]))return}return e},goog.structs.Trie.prototype.get=function(t){var e=this.getChildNode_(t);return e?e.value_:void 0},goog.structs.Trie.prototype.getKeyAndPrefixes=function(t,e){var o=this,r={},s=e||0;for(void 0!==o.value_&&(r[s]=o.value_);s<t.length;s++){var i=t.charAt(s);if(!(i in o.childNodes_))break;void 0!==(o=o.childNodes_[i]).value_&&(r[s]=o.value_)}return r},goog.structs.Trie.prototype.getValues=function(){var t=[];return this.getValuesInternal_(t),t},goog.structs.Trie.prototype.getValuesInternal_=function(t){for(var e in void 0!==this.value_&&t.push(this.value_),this.childNodes_)this.childNodes_[e].getValuesInternal_(t)},goog.structs.Trie.prototype.getKeys=function(t){var e=[];if(t){for(var o=this,r=0;r<t.length;r++){var s=t.charAt(r);if(!o.childNodes_[s])return[];o=o.childNodes_[s]}o.getKeysInternal_(t,e)}else this.getKeysInternal_("",e);return e},goog.structs.Trie.prototype.getKeysInternal_=function(t,e){for(var o in void 0!==this.value_&&e.push(t),this.childNodes_)this.childNodes_[o].getKeysInternal_(t+o,e)},goog.structs.Trie.prototype.containsKey=function(t){return void 0!==this.get(t)},goog.structs.Trie.prototype.containsPrefix=function(t){return 0==t.length?!this.isEmpty():!!this.getChildNode_(t)},goog.structs.Trie.prototype.containsValue=function(t){if(this.value_===t)return!0;for(var e in this.childNodes_)if(this.childNodes_[e].containsValue(t))return!0;return!1},goog.structs.Trie.prototype.clear=function(){this.childNodes_={},this.value_=void 0},goog.structs.Trie.prototype.remove=function(t){for(var e=this,o=[],r=0;r<t.length;r++){var s=t.charAt(r);if(!e.childNodes_[s])throw new Error('The collection does not have the key "'+t+'"');o.push([e,s]),e=e.childNodes_[s]}var i=e.value_;for(delete e.value_;o.length>0;){var n=o.pop(),u=n[0];s=n[1];if(!u.childNodes_[s].isEmpty())break;delete u.childNodes_[s]}return i},goog.structs.Trie.prototype.clone=function(){return new goog.structs.Trie(this)},goog.structs.Trie.prototype.getCount=function(){return goog.structs.getCount(this.getValues())},goog.structs.Trie.prototype.isEmpty=function(){return void 0===this.value_&&goog.object.isEmpty(this.childNodes_)};