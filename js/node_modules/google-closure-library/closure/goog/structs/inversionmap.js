goog.provide("goog.structs.InversionMap"),goog.require("goog.array"),goog.require("goog.asserts"),goog.structs.InversionMap=function(r,t,e){this.rangeArray=null,goog.asserts.assert(r.length==t.length,"rangeArray and valueArray must have the same length."),this.storeInversion_(r,e),this.values=t},goog.structs.InversionMap.prototype.storeInversion_=function(r,t){this.rangeArray=r;for(var e=1;e<r.length;e++)null==r[e]?r[e]=r[e-1]+1:t&&(r[e]+=r[e-1])},goog.structs.InversionMap.prototype.spliceInversion=function(r,t,e){var s=new goog.structs.InversionMap(r,t,e),a=s.rangeArray[0],o=goog.array.peek(s.rangeArray),n=this.getLeast(a),g=this.getLeast(o);a!=this.rangeArray[n]&&n++,this.rangeArray=this.rangeArray.slice(0,n).concat(s.rangeArray).concat(this.rangeArray.slice(g+1)),this.values=this.values.slice(0,n).concat(s.values).concat(this.values.slice(g+1))},goog.structs.InversionMap.prototype.at=function(r){var t=this.getLeast(r);return t<0?null:this.values[t]},goog.structs.InversionMap.prototype.getLeast=function(r){for(var t=this.rangeArray,e=0,s=t.length;s-e>8;){var a=s+e>>1;t[a]<=r?e=a:s=a}for(;e<s&&!(r<t[e]);++e);return e-1};