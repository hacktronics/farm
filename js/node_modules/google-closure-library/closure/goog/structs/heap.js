goog.provide("goog.structs.Heap"),goog.require("goog.array"),goog.require("goog.object"),goog.require("goog.structs.Node"),goog.structs.Heap=function(t){this.nodes_=[],t&&this.insertAll(t)},goog.structs.Heap.prototype.insert=function(t,e){var o=new goog.structs.Node(t,e),r=this.nodes_;r.push(o),this.moveUp_(r.length-1)},goog.structs.Heap.prototype.insertAll=function(t){var e,o;if(t instanceof goog.structs.Heap){if(e=t.getKeys(),o=t.getValues(),this.getCount()<=0){for(var r=this.nodes_,g=0;g<e.length;g++)r.push(new goog.structs.Node(e[g],o[g]));return}}else e=goog.object.getKeys(t),o=goog.object.getValues(t);for(g=0;g<e.length;g++)this.insert(e[g],o[g])},goog.structs.Heap.prototype.remove=function(){var t=this.nodes_,e=t.length,o=t[0];if(!(e<=0))return 1==e?goog.array.clear(t):(t[0]=t.pop(),this.moveDown_(0)),o.getValue()},goog.structs.Heap.prototype.peek=function(){var t=this.nodes_;if(0!=t.length)return t[0].getValue()},goog.structs.Heap.prototype.peekKey=function(){return this.nodes_[0]&&this.nodes_[0].getKey()},goog.structs.Heap.prototype.moveDown_=function(t){for(var e=this.nodes_,o=e.length,r=e[t];t<o>>1;){var g=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),n=s<o&&e[s].getKey()<e[g].getKey()?s:g;if(e[n].getKey()>r.getKey())break;e[t]=e[n],t=n}e[t]=r},goog.structs.Heap.prototype.moveUp_=function(t){for(var e=this.nodes_,o=e[t];t>0;){var r=this.getParentIndex_(t);if(!(e[r].getKey()>o.getKey()))break;e[t]=e[r],t=r}e[t]=o},goog.structs.Heap.prototype.getLeftChildIndex_=function(t){return 2*t+1},goog.structs.Heap.prototype.getRightChildIndex_=function(t){return 2*t+2},goog.structs.Heap.prototype.getParentIndex_=function(t){return t-1>>1},goog.structs.Heap.prototype.getValues=function(){for(var t=this.nodes_,e=[],o=t.length,r=0;r<o;r++)e.push(t[r].getValue());return e},goog.structs.Heap.prototype.getKeys=function(){for(var t=this.nodes_,e=[],o=t.length,r=0;r<o;r++)e.push(t[r].getKey());return e},goog.structs.Heap.prototype.containsValue=function(t){return goog.array.some(this.nodes_,function(e){return e.getValue()==t})},goog.structs.Heap.prototype.containsKey=function(t){return goog.array.some(this.nodes_,function(e){return e.getKey()==t})},goog.structs.Heap.prototype.clone=function(){return new goog.structs.Heap(this)},goog.structs.Heap.prototype.getCount=function(){return this.nodes_.length},goog.structs.Heap.prototype.isEmpty=function(){return goog.array.isEmpty(this.nodes_)},goog.structs.Heap.prototype.clear=function(){goog.array.clear(this.nodes_)};