goog.provide("goog.structs.PriorityPool"),goog.require("goog.structs.Pool"),goog.require("goog.structs.PriorityQueue"),goog.structs.PriorityPool=function(o,t){this.delayTimeout_=void 0,this.requestQueue_=new goog.structs.PriorityQueue,goog.structs.Pool.call(this,o,t)},goog.inherits(goog.structs.PriorityPool,goog.structs.Pool),goog.structs.PriorityPool.DEFAULT_PRIORITY_=100,goog.structs.PriorityPool.prototype.setDelay=function(o){goog.structs.PriorityPool.base(this,"setDelay",o),null!=this.lastAccess&&(goog.global.clearTimeout(this.delayTimeout_),this.delayTimeout_=goog.global.setTimeout(goog.bind(this.handleQueueRequests_,this),this.delay+this.lastAccess-goog.now()),this.handleQueueRequests_())},goog.structs.PriorityPool.prototype.getObject=function(o,t){if(!o){var e=goog.structs.PriorityPool.base(this,"getObject");return e&&this.delay&&(this.delayTimeout_=goog.global.setTimeout(goog.bind(this.handleQueueRequests_,this),this.delay)),e}var s=void 0!==t?t:goog.structs.PriorityPool.DEFAULT_PRIORITY_;this.requestQueue_.enqueue(s,o),this.handleQueueRequests_()},goog.structs.PriorityPool.prototype.handleQueueRequests_=function(){for(var o=this.requestQueue_;o.getCount()>0;){var t=this.getObject();if(!t)return;o.dequeue().apply(this,[t])}},goog.structs.PriorityPool.prototype.addFreeObject=function(o){goog.structs.PriorityPool.superClass_.addFreeObject.call(this,o),this.handleQueueRequests_()},goog.structs.PriorityPool.prototype.adjustForMinMax=function(){goog.structs.PriorityPool.superClass_.adjustForMinMax.call(this),this.handleQueueRequests_()},goog.structs.PriorityPool.prototype.disposeInternal=function(){goog.structs.PriorityPool.superClass_.disposeInternal.call(this),goog.global.clearTimeout(this.delayTimeout_),this.requestQueue_.clear(),this.requestQueue_=null};