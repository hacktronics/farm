goog.provide("goog.structs.TreeNode"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.structs.Node"),goog.structs.TreeNode=function(e,t){goog.structs.Node.call(this,e,t),this.parent_=null,this.children_=null},goog.inherits(goog.structs.TreeNode,goog.structs.Node),goog.structs.TreeNode.EMPTY_ARRAY_=[],goog.structs.TreeNode.prototype.clone=function(){return new goog.structs.TreeNode(this.getKey(),this.getValue())},goog.structs.TreeNode.prototype.deepClone=function(){var e=this.clone();return this.forEachChild(function(t){e.addChild(t.deepClone())}),e},goog.structs.TreeNode.prototype.getParent=function(){return this.parent_},goog.structs.TreeNode.prototype.isLeaf=function(){return!this.getChildCount()},goog.structs.TreeNode.prototype.isLastChild=function(){var e=this.getParent();return Boolean(e&&this==goog.array.peek(e.getChildren()))},goog.structs.TreeNode.prototype.getChildren=function(){return this.children_||goog.structs.TreeNode.EMPTY_ARRAY_},goog.structs.TreeNode.prototype.getChildAt=function(e){return this.getChildren()[e]||null},goog.structs.TreeNode.prototype.getChildCount=function(){return this.getChildren().length},goog.structs.TreeNode.prototype.getDepth=function(){for(var e=0,t=this;t.getParent();)e++,t=t.getParent();return e},goog.structs.TreeNode.prototype.getAncestors=function(){for(var e=[],t=this.getParent();t;)e.push(t),t=t.getParent();return e},goog.structs.TreeNode.prototype.getRoot=function(){for(var e=this;e.getParent();)e=e.getParent();return e},goog.structs.TreeNode.prototype.getSubtreeKeys=function(){var e=[];return this.forEachChild(function(t){e.push(t.getKey()),t.isLeaf()||e.push(t.getSubtreeKeys())}),e},goog.structs.TreeNode.prototype.contains=function(e){var t=e;do{t=t.getParent()}while(t&&t!=this);return Boolean(t)},goog.structs.TreeNode.findCommonAncestor=function(e){var t=arguments[0];if(!t)return null;for(var r=t.getDepth(),o=1;o<arguments.length;o++)for(var n=arguments[o],s=n.getDepth();n!=t;)s<=r&&(t=t.getParent(),r--),s>r&&(n=n.getParent(),s--);return t},goog.structs.TreeNode.prototype.getNodeByKey=function(e){if(this.getKey()==e)return this;for(var t=this.getChildren(),r=0;r<t.length;r++){var o=t[r].getNodeByKey(e);if(o)return o}return null},goog.structs.TreeNode.prototype.forEachChild=function(e,t){goog.array.forEach(this.getChildren(),e,t)},goog.structs.TreeNode.prototype.forEachDescendant=function(e,t){for(var r=this.getChildren(),o=0;o<r.length;o++)e.call(t,r[o]),r[o].forEachDescendant(e,t)},goog.structs.TreeNode.prototype.traverse=function(e,t){if(!1!==e.call(t,this))for(var r=this.getChildren(),o=0;o<r.length;o++)r[o].traverse(e,t)},goog.structs.TreeNode.prototype.setParent=function(e){this.parent_=e},goog.structs.TreeNode.prototype.addChild=function(e){this.addChildAt(e,this.children_?this.children_.length:0)},goog.structs.TreeNode.prototype.addChildAt=function(e,t){goog.asserts.assert(!e.getParent()),e.setParent(this),this.children_=this.children_||[],goog.asserts.assert(t>=0&&t<=this.children_.length),goog.array.insertAt(this.children_,e,t)},goog.structs.TreeNode.prototype.replaceChildAt=function(e,t){goog.asserts.assert(!e.getParent(),"newChild must not have parent node");var r=this.getChildren(),o=r[t];return goog.asserts.assert(o,"Invalid child or child index is given."),o.setParent(null),r[t]=e,e.setParent(this),o},goog.structs.TreeNode.prototype.replaceChild=function(e,t){return this.replaceChildAt(e,goog.array.indexOf(this.getChildren(),t))},goog.structs.TreeNode.prototype.removeChildAt=function(e){var t=this.children_&&this.children_[e];return t?(t.setParent(null),goog.array.removeAt(this.children_,e),0==this.children_.length&&(this.children_=null),t):null},goog.structs.TreeNode.prototype.removeChild=function(e){return e&&this.removeChildAt(goog.array.indexOf(this.getChildren(),e))},goog.structs.TreeNode.prototype.removeChildren=function(){if(this.children_){for(var e=0;e<this.children_.length;e++)this.children_[e].setParent(null);this.children_=null}};