goog.provide("goog.ui.MenuItem"),goog.forwardDeclare("goog.ui.Menu"),goog.require("goog.a11y.aria.Role"),goog.require("goog.array"),goog.require("goog.dom"),goog.require("goog.dom.classlist"),goog.require("goog.math.Coordinate"),goog.require("goog.string"),goog.require("goog.ui.Component"),goog.require("goog.ui.Control"),goog.require("goog.ui.MenuItemRenderer"),goog.require("goog.ui.registry"),goog.ui.MenuItem=function(e,o,t,g){goog.ui.Control.call(this,e,g||goog.ui.MenuItemRenderer.getInstance(),t),this.setValue(o)},goog.inherits(goog.ui.MenuItem,goog.ui.Control),goog.tagUnsealableClass(goog.ui.MenuItem),goog.ui.MenuItem.prototype.mnemonicKey_,goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_=goog.getCssName("goog-menuitem-mnemonic-separator"),goog.ui.MenuItem.ACCELERATOR_CLASS=goog.getCssName("goog-menuitem-accel"),goog.ui.MenuItem.prototype.getValue=function(){var e=this.getModel();return null!=e?e:this.getCaption()},goog.ui.MenuItem.prototype.setValue=function(e){this.setModel(e)},goog.ui.MenuItem.prototype.setSupportedState=function(e,o){switch(goog.ui.MenuItem.base(this,"setSupportedState",e,o),e){case goog.ui.Component.State.SELECTED:this.setSelectableInternal_(o);break;case goog.ui.Component.State.CHECKED:this.setCheckableInternal_(o)}},goog.ui.MenuItem.prototype.setSelectable=function(e){this.setSupportedState(goog.ui.Component.State.SELECTED,e)},goog.ui.MenuItem.prototype.setSelectableInternal_=function(e){this.isChecked()&&!e&&this.setChecked(!1);var o=this.getElement();o&&this.getRenderer().setSelectable(this,o,e)},goog.ui.MenuItem.prototype.setCheckable=function(e){this.setSupportedState(goog.ui.Component.State.CHECKED,e)},goog.ui.MenuItem.prototype.setCheckableInternal_=function(e){var o=this.getElement();o&&this.getRenderer().setCheckable(this,o,e)},goog.ui.MenuItem.prototype.getCaption=function(){var e=this.getContent();if(goog.isArray(e)){var o=goog.ui.MenuItem.ACCELERATOR_CLASS,t=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,g=goog.array.map(e,function(e){return goog.dom.isElement(e)&&(goog.dom.classlist.contains(e,o)||goog.dom.classlist.contains(e,t))?"":goog.dom.getRawTextContent(e)}).join("");return goog.string.collapseBreakingSpaces(g)}return goog.ui.MenuItem.superClass_.getCaption.call(this)},goog.ui.MenuItem.prototype.getAccelerator=function(){var e=this.getDomHelper(),o=this.getContent();if(goog.isArray(o)){var t=goog.array.find(o,function(e){return goog.dom.classlist.contains(e,goog.ui.MenuItem.ACCELERATOR_CLASS)});if(t)return e.getTextContent(t)}return null},goog.ui.MenuItem.prototype.handleMouseUp=function(e){var o=this.getParent();if(o){var t=o.openingCoords;if(o.openingCoords=null,t&&"number"==typeof e.clientX){var g=new goog.math.Coordinate(e.clientX,e.clientY);if(goog.math.Coordinate.equals(t,g))return}}goog.ui.MenuItem.base(this,"handleMouseUp",e)},goog.ui.MenuItem.prototype.handleKeyEventInternal=function(e){return!(e.keyCode!=this.getMnemonic()||!this.performActionInternal(e))||goog.ui.MenuItem.base(this,"handleKeyEventInternal",e)},goog.ui.MenuItem.prototype.setMnemonic=function(e){this.mnemonicKey_=e},goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)}),goog.ui.MenuItem.prototype.getPreferredAriaRole=function(){return this.isSupportedState(goog.ui.Component.State.CHECKED)?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.isSupportedState(goog.ui.Component.State.SELECTED)?goog.a11y.aria.Role.MENU_ITEM_RADIO:goog.ui.MenuItem.base(this,"getPreferredAriaRole")},goog.ui.MenuItem.prototype.getParent=function(){return goog.ui.Control.prototype.getParent.call(this)},goog.ui.MenuItem.prototype.getParentEventTarget=function(){return goog.ui.Control.prototype.getParentEventTarget.call(this)};