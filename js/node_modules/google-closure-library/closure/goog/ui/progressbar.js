goog.provide("goog.ui.ProgressBar"),goog.provide("goog.ui.ProgressBar.Orientation"),goog.require("goog.a11y.aria"),goog.require("goog.asserts"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.dom.classlist"),goog.require("goog.events"),goog.require("goog.events.EventType"),goog.require("goog.ui.Component"),goog.require("goog.ui.RangeModel"),goog.require("goog.userAgent"),goog.ui.ProgressBar=function(e){goog.ui.Component.call(this,e),this.thumbElement_,this.rangeModel_=new goog.ui.RangeModel,goog.events.listen(this.rangeModel_,goog.ui.Component.EventType.CHANGE,this.handleChange_,!1,this)},goog.inherits(goog.ui.ProgressBar,goog.ui.Component),goog.tagUnsealableClass(goog.ui.ProgressBar),goog.ui.ProgressBar.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_={},goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.VERTICAL]=goog.getCssName("progress-bar-vertical"),goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[goog.ui.ProgressBar.Orientation.HORIZONTAL]=goog.getCssName("progress-bar-horizontal"),goog.ui.ProgressBar.prototype.createDom=function(){this.thumbElement_=this.createThumb_(),this.setElementInternal(this.getDomHelper().createDom(goog.dom.TagName.DIV,goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_],this.thumbElement_)),this.setValueState_(),this.setMinimumState_(),this.setMaximumState_()},goog.ui.ProgressBar.prototype.enterDocument=function(){goog.ui.ProgressBar.superClass_.enterDocument.call(this),this.attachEvents_(),this.updateUi_();var e=this.getElement();goog.asserts.assert(e,"The progress bar DOM element cannot be null."),goog.a11y.aria.setRole(e,"progressbar"),goog.a11y.aria.setState(e,"live","polite")},goog.ui.ProgressBar.prototype.exitDocument=function(){goog.ui.ProgressBar.superClass_.exitDocument.call(this),this.detachEvents_()},goog.ui.ProgressBar.prototype.createThumb_=function(){return this.getDomHelper().createDom(goog.dom.TagName.DIV,goog.getCssName("progress-bar-thumb"))},goog.ui.ProgressBar.prototype.attachEvents_=function(){goog.userAgent.IE&&goog.userAgent.VERSION<7&&goog.events.listen(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)},goog.ui.ProgressBar.prototype.detachEvents_=function(){goog.userAgent.IE&&goog.userAgent.VERSION<7&&goog.events.unlisten(this.getElement(),goog.events.EventType.RESIZE,this.updateUi_,!1,this)},goog.ui.ProgressBar.prototype.decorateInternal=function(e){goog.ui.ProgressBar.superClass_.decorateInternal.call(this,e),goog.dom.classlist.add(goog.asserts.assert(this.getElement()),goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_]);var t=goog.dom.getElementsByTagNameAndClass(null,goog.getCssName("progress-bar-thumb"),this.getElement())[0];t||(t=this.createThumb_(),this.getElement().appendChild(t)),this.thumbElement_=t},goog.ui.ProgressBar.prototype.getValue=function(){return this.rangeModel_.getValue()},goog.ui.ProgressBar.prototype.setValue=function(e){this.rangeModel_.setValue(e),this.getElement()&&this.setValueState_()},goog.ui.ProgressBar.prototype.setValueState_=function(){var e=this.getElement();goog.asserts.assert(e,"The progress bar DOM element cannot be null."),goog.a11y.aria.setState(e,"valuenow",this.getValue())},goog.ui.ProgressBar.prototype.getMinimum=function(){return this.rangeModel_.getMinimum()},goog.ui.ProgressBar.prototype.setMinimum=function(e){this.rangeModel_.setMinimum(e),this.getElement()&&this.setMinimumState_()},goog.ui.ProgressBar.prototype.setMinimumState_=function(){var e=this.getElement();goog.asserts.assert(e,"The progress bar DOM element cannot be null."),goog.a11y.aria.setState(e,"valuemin",this.getMinimum())},goog.ui.ProgressBar.prototype.getMaximum=function(){return this.rangeModel_.getMaximum()},goog.ui.ProgressBar.prototype.setMaximum=function(e){this.rangeModel_.setMaximum(e),this.getElement()&&this.setMaximumState_()},goog.ui.ProgressBar.prototype.setMaximumState_=function(){var e=this.getElement();goog.asserts.assert(e,"The progress bar DOM element cannot be null."),goog.a11y.aria.setState(e,"valuemax",this.getMaximum())},goog.ui.ProgressBar.prototype.orientation_=goog.ui.ProgressBar.Orientation.HORIZONTAL,goog.ui.ProgressBar.prototype.handleChange_=function(e){this.updateUi_(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},goog.ui.ProgressBar.prototype.updateUi_=function(){if(this.thumbElement_){var e=this.getMinimum(),t=this.getMaximum(),o=(this.getValue()-e)/(t-e),g=Math.round(100*o);if(this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL)if(goog.userAgent.IE&&goog.userAgent.VERSION<7){this.thumbElement_.style.top="0",this.thumbElement_.style.height="100%";var s=this.thumbElement_.offsetHeight,r=Math.round(o*s);this.thumbElement_.style.top=s-r+"px",this.thumbElement_.style.height=r+"px"}else this.thumbElement_.style.top=100-g+"%",this.thumbElement_.style.height=g+"%";else this.thumbElement_.style.width=g+"%"}},goog.ui.ProgressBar.prototype.initializeUi_=function(){var e=this.thumbElement_.style;this.orientation_==goog.ui.ProgressBar.Orientation.VERTICAL?(e.left="0",e.width="100%"):(e.top=e.left="0",e.height="100%")},goog.ui.ProgressBar.prototype.setOrientation=function(e){if(this.orientation_!=e){var t=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[this.orientation_],o=goog.ui.ProgressBar.ORIENTATION_TO_CSS_NAME_[e];this.orientation_=e;var g=this.getElement();g&&(goog.dom.classlist.swap(g,t,o),this.initializeUi_(),this.updateUi_())}},goog.ui.ProgressBar.prototype.getOrientation=function(){return this.orientation_},goog.ui.ProgressBar.prototype.disposeInternal=function(){this.detachEvents_(),goog.ui.ProgressBar.superClass_.disposeInternal.call(this),this.thumbElement_=null,this.rangeModel_.dispose()},goog.ui.ProgressBar.prototype.getStep=function(){return this.rangeModel_.getStep()},goog.ui.ProgressBar.prototype.setStep=function(e){this.rangeModel_.setStep(e)};