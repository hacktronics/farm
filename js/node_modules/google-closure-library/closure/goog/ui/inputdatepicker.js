goog.provide("goog.ui.InputDatePicker"),goog.require("goog.date.DateTime"),goog.require("goog.dom"),goog.require("goog.dom.InputType"),goog.require("goog.dom.TagName"),goog.require("goog.i18n.DateTimeParse"),goog.require("goog.string"),goog.require("goog.ui.Component"),goog.require("goog.ui.DatePicker"),goog.require("goog.ui.LabelInput"),goog.require("goog.ui.PopupBase"),goog.require("goog.ui.PopupDatePicker"),goog.ui.InputDatePicker=function(e,t,o,i){goog.ui.Component.call(this,i),this.dateTimeFormatter_=e,this.dateTimeParser_=t,this.popupDatePicker_=new goog.ui.PopupDatePicker(o,i),this.addChild(this.popupDatePicker_),this.popupDatePicker_.setAllowAutoFocus(!1)},goog.inherits(goog.ui.InputDatePicker,goog.ui.Component),goog.tagUnsealableClass(goog.ui.InputDatePicker),goog.ui.InputDatePicker.prototype.dateTimeFormatter_=null,goog.ui.InputDatePicker.prototype.dateTimeParser_=null,goog.ui.InputDatePicker.prototype.popupDatePicker_=null,goog.ui.InputDatePicker.prototype.popupParentElement_=null,goog.ui.InputDatePicker.prototype.getDatePicker=function(){return this.popupDatePicker_.getDatePicker()},goog.ui.InputDatePicker.prototype.getPopupDatePicker=function(){return this.popupDatePicker_},goog.ui.InputDatePicker.prototype.getDate=function(){var e=this.getInputValueAsDate_(),t=this.popupDatePicker_.getDate();return e&&t?e.equals(t)||this.popupDatePicker_.setDate(e):this.popupDatePicker_.setDate(null),e},goog.ui.InputDatePicker.prototype.setDate=function(e){this.popupDatePicker_.setDate(e)},goog.ui.InputDatePicker.prototype.setInputValue=function(e){var t=this.getElement();t.labelInput_?t.labelInput_.setValue(e):t.value=e},goog.ui.InputDatePicker.prototype.getInputValue=function(){var e=this.getElement();return e.labelInput_?e.labelInput_.getValue():e.value},goog.ui.InputDatePicker.prototype.setInputValueAsDate_=function(e){this.setInputValue(e?this.dateTimeFormatter_.format(e):"")},goog.ui.InputDatePicker.prototype.getInputValueAsDate_=function(){var e=goog.string.trim(this.getInputValue());if(e){var t=new goog.date.DateTime;if(this.dateTimeParser_.strictParse(e,t)>0)return t}return null},goog.ui.InputDatePicker.prototype.createDom=function(){this.setElementInternal(this.getDomHelper().createDom(goog.dom.TagName.INPUT,{type:goog.dom.InputType.TEXT})),this.popupDatePicker_.createDom()},goog.ui.InputDatePicker.prototype.setPopupParentElement=function(e){this.popupParentElement_=e},goog.ui.InputDatePicker.prototype.enterDocument=function(){(this.popupParentElement_||this.getDomHelper().getDocument().body).appendChild(this.popupDatePicker_.getElement()),goog.ui.InputDatePicker.superClass_.enterDocument.call(this);var e=this.getElement();this.popupDatePicker_.attach(e),this.popupDatePicker_.setDate(this.getInputValueAsDate_());var t=this.getHandler();t.listen(this.popupDatePicker_,goog.ui.DatePicker.Events.CHANGE,this.onDateChanged_),t.listen(this.popupDatePicker_,goog.ui.PopupBase.EventType.SHOW,this.onPopup_)},goog.ui.InputDatePicker.prototype.exitDocument=function(){goog.ui.InputDatePicker.superClass_.exitDocument.call(this);var e=this.getElement();this.popupDatePicker_.detach(e),this.popupDatePicker_.exitDocument(),goog.dom.removeNode(this.popupDatePicker_.getElement())},goog.ui.InputDatePicker.prototype.decorateInternal=function(e){goog.ui.InputDatePicker.superClass_.decorateInternal.call(this,e),this.popupDatePicker_.createDom()},goog.ui.InputDatePicker.prototype.disposeInternal=function(){goog.ui.InputDatePicker.superClass_.disposeInternal.call(this),this.popupDatePicker_.dispose(),this.popupDatePicker_=null,this.popupParentElement_=null},goog.ui.InputDatePicker.prototype.showForElement=function(e){this.popupDatePicker_.showPopup(e)},goog.ui.InputDatePicker.prototype.hidePopup=function(){this.popupDatePicker_.hidePopup()},goog.ui.InputDatePicker.prototype.onPopup_=function(e){var t=this.getInputValueAsDate_();this.setDate(t),t&&this.setInputValueAsDate_(this.getDatePicker().getDate())},goog.ui.InputDatePicker.prototype.onDateChanged_=function(e){this.setInputValueAsDate_(e.date)};