goog.provide("goog.ui.IframeMask"),goog.require("goog.Disposable"),goog.require("goog.Timer"),goog.require("goog.dom"),goog.require("goog.dom.iframe"),goog.require("goog.events.EventHandler"),goog.require("goog.structs.Pool"),goog.require("goog.style"),goog.ui.IframeMask=function(o,e){goog.Disposable.call(this),this.dom_=o||goog.dom.getDomHelper(),this.snapElement_=this.dom_.getDocument().documentElement,this.handler_=new goog.events.EventHandler(this),this.iframePool_=e},goog.inherits(goog.ui.IframeMask,goog.Disposable),goog.tagUnsealableClass(goog.ui.IframeMask),goog.ui.IframeMask.prototype.iframe_,goog.ui.IframeMask.prototype.zIndex_=1,goog.ui.IframeMask.prototype.opacity_=0,goog.ui.IframeMask.prototype.disposeInternal=function(){this.iframePool_?this.iframePool_.releaseObject(this.iframe_):goog.dom.removeNode(this.iframe_),this.iframe_=null,this.handler_.dispose(),this.handler_=null,goog.ui.IframeMask.superClass_.disposeInternal.call(this)},goog.ui.IframeMask.HIDDEN_CSS_TEXT_="position:absolute;display:none;z-index:1",goog.ui.IframeMask.prototype.hideMask=function(){this.iframe_&&(this.iframe_.style.cssText=goog.ui.IframeMask.HIDDEN_CSS_TEXT_,this.iframePool_&&(this.iframePool_.releaseObject(this.iframe_),this.iframe_=null))},goog.ui.IframeMask.prototype.getIframe_=function(){return this.iframe_||(this.iframe_=this.iframePool_?this.iframePool_.getObject():goog.dom.iframe.createBlank(this.dom_),this.iframe_.style.cssText=goog.ui.IframeMask.HIDDEN_CSS_TEXT_,this.dom_.getDocument().body.appendChild(this.iframe_)),this.iframe_},goog.ui.IframeMask.prototype.applyMask=function(){var o=this.getIframe_(),e=goog.style.getBounds(this.snapElement_);o.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+this.zIndex_,goog.style.setOpacity(o,this.opacity_),o.style.display="block"},goog.ui.IframeMask.prototype.setOpacity=function(o){this.opacity_=o},goog.ui.IframeMask.prototype.setZIndex=function(o){this.zIndex_=o},goog.ui.IframeMask.prototype.setSnapElement=function(o){this.snapElement_=o,this.iframe_&&goog.style.isElementShown(this.iframe_)&&this.applyMask()},goog.ui.IframeMask.prototype.listenOnTarget=function(o,e,t,i){var s;this.handler_.listen(o,e,function(){i&&this.setSnapElement(i),s=goog.Timer.callOnce(this.applyMask,0,this)}),this.handler_.listen(o,t,function(){s&&(goog.Timer.clear(s),s=null),this.hideMask()})},goog.ui.IframeMask.prototype.removeHandlers=function(){this.handler_.removeAll()};