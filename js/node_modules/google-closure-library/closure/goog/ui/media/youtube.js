goog.provide("goog.ui.media.Youtube"),goog.provide("goog.ui.media.YoutubeModel"),goog.require("goog.dom.TagName"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.string"),goog.require("goog.string.Const"),goog.require("goog.ui.Component"),goog.require("goog.ui.media.FlashObject"),goog.require("goog.ui.media.Media"),goog.require("goog.ui.media.MediaModel"),goog.require("goog.ui.media.MediaRenderer"),goog.ui.media.Youtube=function(){goog.ui.media.MediaRenderer.call(this)},goog.inherits(goog.ui.media.Youtube,goog.ui.media.MediaRenderer),goog.addSingletonGetter(goog.ui.media.Youtube),goog.ui.media.Youtube.newControl=function(o,e){var g=new goog.ui.media.Media(o,goog.ui.media.Youtube.getInstance(),e);return g.setStateInternal(goog.ui.Component.State.ACTIVE),g},goog.ui.media.Youtube.CSS_CLASS=goog.getCssName("goog-ui-media-youtube"),goog.ui.media.Youtube.prototype.setState=function(o,e,g){var i=o;if(goog.ui.media.Youtube.superClass_.setState.call(this,i,e,g),!i.getElement())throw new Error(goog.ui.Component.Error.STATE_INVALID);var u=i.getDomHelper(),t=i.getDataModel();if(e&goog.ui.Component.State.SELECTED&&g){if(u.getElementsByTagNameAndClass(goog.dom.TagName.DIV,goog.ui.media.FlashObject.CSS_CLASS,i.getElement()).length>0)return;var a=new goog.ui.media.FlashObject(t.getPlayer().getTrustedResourceUrl(),u);i.addChild(a,!0)}},goog.ui.media.Youtube.prototype.getCssClass=function(){return goog.ui.media.Youtube.CSS_CLASS},goog.ui.media.YoutubeModel=function(o,e,g){goog.ui.media.MediaModel.call(this,goog.ui.media.YoutubeModel.buildUrl(o),e,g,goog.ui.media.MediaModel.MimeType.FLASH),this.videoId_=o,this.setThumbnails([new goog.ui.media.MediaModel.Thumbnail(goog.ui.media.YoutubeModel.getThumbnailUrl(o))]),this.setPlayer(new goog.ui.media.MediaModel.Player(goog.ui.media.YoutubeModel.getFlashUrl(o,!0)))},goog.inherits(goog.ui.media.YoutubeModel,goog.ui.media.MediaModel),goog.ui.media.YoutubeModel.MATCHER_=new RegExp("https?://(?:[a-zA-Z]{1,3}\\.)?(?:(?:(?:youtu\\.be|youtube(?:-nocookie)?\\.com/embed)/([\\w-]+)(?:\\?[\\w=&-]+)?)|(?:youtube(?:-nocookie)?\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?)[^\\w-]?","i"),goog.ui.media.YoutubeModel.newInstance=function(o,e,g){var i=goog.ui.media.YoutubeModel.MATCHER_.exec(o);if(i){var u=i[1]||i[2]||i[3];return new goog.ui.media.YoutubeModel(u,e,g)}throw new Error("failed to parse video id from youtube url: "+o)},goog.ui.media.YoutubeModel.buildUrl=function(o){return"https://www.youtube.com/watch?v="+goog.string.urlEncode(o)},goog.ui.media.YoutubeModel.getThumbnailUrl=function(o){return"https://i.ytimg.com/vi/"+o+"/default.jpg"},goog.ui.media.YoutubeModel.getFlashUrl=function(o,e){return goog.html.TrustedResourceUrl.format(goog.string.Const.from("https://www.youtube.com/v/%{v}&hl=en&fs=1%{autoplay}"),{v:o,autoplay:e?goog.string.Const.from("&autoplay=1"):""})},goog.ui.media.YoutubeModel.prototype.getVideoId=function(){return this.videoId_};