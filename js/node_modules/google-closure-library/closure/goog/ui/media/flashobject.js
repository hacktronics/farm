goog.provide("goog.ui.media.FlashObject"),goog.provide("goog.ui.media.FlashObject.ScriptAccessLevel"),goog.provide("goog.ui.media.FlashObject.Wmodes"),goog.require("goog.asserts"),goog.require("goog.dom.TagName"),goog.require("goog.dom.safe"),goog.require("goog.events.Event"),goog.require("goog.events.EventHandler"),goog.require("goog.events.EventType"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.html.flash"),goog.require("goog.log"),goog.require("goog.object"),goog.require("goog.string"),goog.require("goog.structs.Map"),goog.require("goog.style"),goog.require("goog.ui.Component"),goog.require("goog.userAgent"),goog.require("goog.userAgent.flash"),goog.ui.media.FlashObject=function(e,o){goog.ui.Component.call(this,o),this.flashUrl_=e,this.eventHandler_=new goog.events.EventHandler(this),this.flashVars_=new goog.structs.Map},goog.inherits(goog.ui.media.FlashObject,goog.ui.Component),goog.ui.media.FlashObject.SwfReadyStates_={LOADING:0,UNINITIALIZED:1,LOADED:2,INTERACTIVE:3,COMPLETE:4},goog.ui.media.FlashObject.IeSwfReadyStates_={LOADING:"loading",UNINITIALIZED:"uninitialized",LOADED:"loaded",INTERACTIVE:"interactive",COMPLETE:"complete"},goog.ui.media.FlashObject.Wmodes={OPAQUE:"opaque",TRANSPARENT:"transparent",WINDOW:"window"},goog.ui.media.FlashObject.ScriptAccessLevel={ALWAYS:"always",SAME_DOMAIN:"sameDomain",NEVER:"never"},goog.ui.media.FlashObject.CSS_CLASS=goog.getCssName("goog-ui-media-flash"),goog.ui.media.FlashObject.FLASH_CSS_CLASS=goog.getCssName("goog-ui-media-flash-object"),goog.ui.media.FlashObject.prototype.logger_=goog.log.getLogger("goog.ui.media.FlashObject"),goog.ui.media.FlashObject.prototype.wmode_=goog.ui.media.FlashObject.Wmodes.WINDOW,goog.ui.media.FlashObject.prototype.requiredVersion_,goog.ui.media.FlashObject.prototype.width_,goog.ui.media.FlashObject.prototype.height_,goog.ui.media.FlashObject.prototype.backgroundColor_="#000000",goog.ui.media.FlashObject.prototype.allowScriptAccess_=goog.ui.media.FlashObject.ScriptAccessLevel.SAME_DOMAIN,goog.ui.media.FlashObject.prototype.setWmode=function(e){return this.wmode_=e,this},goog.ui.media.FlashObject.prototype.getWmode=function(){return this.wmode_},goog.ui.media.FlashObject.prototype.addFlashVars=function(e){return this.flashVars_.addAll(e),this},goog.ui.media.FlashObject.prototype.setFlashVar=function(e,o){return this.flashVars_.set(e,o),this},goog.ui.media.FlashObject.prototype.setFlashVars=function(e,o){return e instanceof goog.structs.Map||"object"==goog.typeOf(e)?this.addFlashVars(e):(goog.asserts.assert("string"==typeof e&&void 0!==o,"Invalid argument(s)"),this.setFlashVar(e,o)),this},goog.ui.media.FlashObject.prototype.getFlashVars=function(){return this.flashVars_},goog.ui.media.FlashObject.prototype.setBackgroundColor=function(e){return this.backgroundColor_=e,this},goog.ui.media.FlashObject.prototype.getBackgroundColor=function(){return this.backgroundColor_},goog.ui.media.FlashObject.prototype.setAllowScriptAccess=function(e){return this.allowScriptAccess_=e,this},goog.ui.media.FlashObject.prototype.getAllowScriptAccess=function(){return this.allowScriptAccess_},goog.ui.media.FlashObject.prototype.setSize=function(e,o){return this.width_="string"==typeof e?e:Math.round(e)+"px",this.height_="string"==typeof o?o:Math.round(o)+"px",this.getElement()&&goog.style.setSize(this.getFlashElement(),this.width_,this.height_),this},goog.ui.media.FlashObject.prototype.getRequiredVersion=function(){return this.requiredVersion_},goog.ui.media.FlashObject.prototype.setRequiredVersion=function(e){return this.requiredVersion_=e,this},goog.ui.media.FlashObject.prototype.hasRequiredVersion=function(){return null!=this.requiredVersion_},goog.ui.media.FlashObject.prototype.enterDocument=function(){goog.ui.media.FlashObject.superClass_.enterDocument.call(this),goog.dom.safe.setInnerHtml(this.getElement(),this.createSwfTag_()),this.width_&&this.height_&&this.setSize(this.width_,this.height_),this.eventHandler_.listen(this.getElement(),goog.object.getValues(goog.events.EventType),goog.events.Event.stopPropagation)},goog.ui.media.FlashObject.prototype.createDom=function(){if(this.hasRequiredVersion()&&!goog.userAgent.flash.isVersion(this.getRequiredVersion()))throw goog.log.warning(this.logger_,"Required flash version not found:"+this.getRequiredVersion()),new Error(goog.ui.Component.Error.NOT_SUPPORTED);var e=this.getDomHelper().createElement(goog.dom.TagName.DIV);e.className=goog.ui.media.FlashObject.CSS_CLASS,this.setElementInternal(e)},goog.ui.media.FlashObject.prototype.createSwfTag_=function(){for(var e=this.flashVars_.getKeys(),o=this.flashVars_.getValues(),t=[],i=0;i<e.length;i++){var s=goog.string.urlEncode(e[i]),g=goog.string.urlEncode(o[i]);t.push(s+"="+g)}var a=t.join("&");return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(11)?this.createSwfTagOldIe_(a):this.createSwfTagModern_(a)},goog.ui.media.FlashObject.prototype.createSwfTagModern_=function(e){return goog.html.flash.createEmbed(this.flashUrl_,{AllowScriptAccess:this.allowScriptAccess_,allowFullScreen:"true",allowNetworking:"all",bgcolor:this.backgroundColor_,class:goog.ui.media.FlashObject.FLASH_CSS_CLASS,FlashVars:e,id:this.getId(),name:this.getId(),quality:"high",SeamlessTabbing:"false",wmode:this.wmode_})},goog.ui.media.FlashObject.prototype.createSwfTagOldIe_=function(e){return goog.html.flash.createObjectForOldIe(this.flashUrl_,{allowFullScreen:"true",AllowScriptAccess:this.allowScriptAccess_,allowNetworking:"all",bgcolor:this.backgroundColor_,FlashVars:e,quality:"high",SeamlessTabbing:"false",wmode:this.wmode_},{class:goog.ui.media.FlashObject.FLASH_CSS_CLASS,id:this.getId(),name:this.getId()})},goog.ui.media.FlashObject.prototype.getFlashElement=function(){return this.getElement()?this.getElement().firstChild:null},goog.ui.media.FlashObject.prototype.disposeInternal=function(){goog.ui.media.FlashObject.superClass_.disposeInternal.call(this),this.flashVars_=null,this.eventHandler_.dispose(),this.eventHandler_=null},goog.ui.media.FlashObject.prototype.isLoaded=function(){return!(!this.isInDocument()||!this.getElement())&&(!(!goog.userAgent.EDGE_OR_IE||!this.getFlashElement().readyState||this.getFlashElement().readyState!=goog.ui.media.FlashObject.IeSwfReadyStates_.COMPLETE)||(!(!this.getFlashElement().readyState||this.getFlashElement().readyState!=goog.ui.media.FlashObject.SwfReadyStates_.COMPLETE)||"PercentLoaded"in this.getFlashElement()&&100==this.getFlashElement().PercentLoaded()))};