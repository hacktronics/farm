goog.provide("goog.ui.Zippy"),goog.provide("goog.ui.Zippy.Events"),goog.provide("goog.ui.ZippyEvent"),goog.require("goog.a11y.aria"),goog.require("goog.a11y.aria.Role"),goog.require("goog.a11y.aria.State"),goog.require("goog.dom"),goog.require("goog.dom.classlist"),goog.require("goog.events.Event"),goog.require("goog.events.EventHandler"),goog.require("goog.events.EventTarget"),goog.require("goog.events.EventType"),goog.require("goog.events.KeyCodes"),goog.require("goog.events.KeyHandler"),goog.require("goog.style"),goog.ui.Zippy=function(e,o,t,n,i,g){goog.ui.Zippy.base(this,"constructor"),this.dom_=i||goog.dom.getDomHelper(),this.elHeader_=this.dom_.getElement(e)||null,this.elExpandedHeader_=this.dom_.getElement(n||null),this.lazyCreateFunc_=goog.isFunction(o)?o:null,this.role_=g||goog.a11y.aria.Role.TAB,this.elContent_=this.lazyCreateFunc_||!o?null:this.dom_.getElement(o),this.expanded_=1==t,void 0!==t||this.lazyCreateFunc_||(this.elExpandedHeader_?this.expanded_=goog.style.isElementShown(this.elExpandedHeader_):this.elHeader_&&(this.expanded_=goog.dom.classlist.contains(this.elHeader_,goog.getCssName("goog-zippy-expanded")))),this.keyboardEventHandler_=new goog.events.EventHandler(this),this.keyHandler_=new goog.events.KeyHandler,this.mouseEventHandler_=new goog.events.EventHandler(this);var s=this;function a(e){e&&(e.tabIndex=0,goog.a11y.aria.setRole(e,s.getAriaRole()),goog.dom.classlist.add(e,goog.getCssName("goog-zippy-header")),s.enableMouseEventsHandling_(e),s.enableKeyboardEventsHandling_(e))}a(this.elHeader_),a(this.elExpandedHeader_),this.setExpanded(this.expanded_)},goog.inherits(goog.ui.Zippy,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.Zippy),goog.ui.Zippy.Events={ACTION:"action",TOGGLE:"toggle"},goog.ui.Zippy.prototype.handleMouseEvents_=!0,goog.ui.Zippy.prototype.handleKeyEvents_=!0,goog.ui.Zippy.prototype.disposeInternal=function(){goog.ui.Zippy.base(this,"disposeInternal"),goog.dispose(this.keyboardEventHandler_),goog.dispose(this.keyHandler_),goog.dispose(this.mouseEventHandler_)},goog.ui.Zippy.prototype.getAriaRole=function(){return this.role_},goog.ui.Zippy.prototype.getContentElement=function(){return this.elContent_},goog.ui.Zippy.prototype.getVisibleHeaderElement=function(){var e=this.elExpandedHeader_;return e&&goog.style.isElementShown(e)?e:this.elHeader_},goog.ui.Zippy.prototype.expand=function(){this.setExpanded(!0)},goog.ui.Zippy.prototype.collapse=function(){this.setExpanded(!1)},goog.ui.Zippy.prototype.toggle=function(){this.setExpanded(!this.expanded_)},goog.ui.Zippy.prototype.setExpanded=function(e){this.elContent_?goog.style.setElementShown(this.elContent_,e):e&&this.lazyCreateFunc_&&(this.elContent_=this.lazyCreateFunc_()),this.elContent_&&goog.dom.classlist.add(this.elContent_,goog.getCssName("goog-zippy-content")),this.elExpandedHeader_?(goog.style.setElementShown(this.elHeader_,!e),goog.style.setElementShown(this.elExpandedHeader_,e)):this.updateHeaderClassName(e),this.setExpandedInternal(e),this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,this,this.expanded_))},goog.ui.Zippy.prototype.setExpandedInternal=function(e){this.expanded_=e},goog.ui.Zippy.prototype.isExpanded=function(){return this.expanded_},goog.ui.Zippy.prototype.updateHeaderClassName=function(e){this.elHeader_&&(goog.dom.classlist.enable(this.elHeader_,goog.getCssName("goog-zippy-expanded"),e),goog.dom.classlist.enable(this.elHeader_,goog.getCssName("goog-zippy-collapsed"),!e),goog.a11y.aria.setState(this.elHeader_,goog.a11y.aria.State.EXPANDED,e))},goog.ui.Zippy.prototype.isHandleKeyEvents=function(){return this.handleKeyEvents_},goog.ui.Zippy.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Zippy.prototype.setHandleKeyboardEvents=function(e){this.handleKeyEvents_!=e&&(this.handleKeyEvents_=e,e?(this.enableKeyboardEventsHandling_(this.elHeader_),this.enableKeyboardEventsHandling_(this.elExpandedHeader_)):(this.keyboardEventHandler_.removeAll(),this.keyHandler_.detach()))},goog.ui.Zippy.prototype.setHandleMouseEvents=function(e){this.handleMouseEvents_!=e&&(this.handleMouseEvents_=e,e?(this.enableMouseEventsHandling_(this.elHeader_),this.enableMouseEventsHandling_(this.elExpandedHeader_)):this.mouseEventHandler_.removeAll())},goog.ui.Zippy.prototype.enableKeyboardEventsHandling_=function(e){e&&(this.keyHandler_.attach(e),this.keyboardEventHandler_.listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.onHeaderKeyDown_))},goog.ui.Zippy.prototype.enableMouseEventsHandling_=function(e){e&&this.mouseEventHandler_.listen(e,goog.events.EventType.CLICK,this.onHeaderClick_)},goog.ui.Zippy.prototype.onHeaderKeyDown_=function(e){e.keyCode!=goog.events.KeyCodes.ENTER&&e.keyCode!=goog.events.KeyCodes.SPACE||(this.toggle(),this.dispatchActionEvent_(e),e.preventDefault(),e.stopPropagation())},goog.ui.Zippy.prototype.onHeaderClick_=function(e){this.toggle(),this.dispatchActionEvent_(e)},goog.ui.Zippy.prototype.dispatchActionEvent_=function(e){this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.ACTION,this,this.expanded_,e))},goog.ui.ZippyEvent=function(e,o,t,n){goog.ui.ZippyEvent.base(this,"constructor",e,o),this.expanded=t,this.triggeringEvent=n||null},goog.inherits(goog.ui.ZippyEvent,goog.events.Event);