goog.provide("goog.ui.AdvancedTooltip"),goog.require("goog.events"),goog.require("goog.events.EventType"),goog.require("goog.math.Box"),goog.require("goog.math.Coordinate"),goog.require("goog.style"),goog.require("goog.ui.Tooltip"),goog.require("goog.userAgent"),goog.ui.AdvancedTooltip=function(o,t,i){goog.ui.Tooltip.call(this,o,t,i)},goog.inherits(goog.ui.AdvancedTooltip,goog.ui.Tooltip),goog.tagUnsealableClass(goog.ui.AdvancedTooltip),goog.ui.AdvancedTooltip.prototype.cursorTracking_=!1,goog.ui.AdvancedTooltip.prototype.cursorTrackingHideDelayMs_=100,goog.ui.AdvancedTooltip.prototype.hotSpotPadding_,goog.ui.AdvancedTooltip.prototype.boundingBox_,goog.ui.AdvancedTooltip.prototype.anchorBox_,goog.ui.AdvancedTooltip.prototype.tracking_=!1,goog.ui.AdvancedTooltip.prototype.setHotSpotPadding=function(o){this.hotSpotPadding_=o||null},goog.ui.AdvancedTooltip.prototype.getHotSpotPadding=function(){return this.hotSpotPadding_},goog.ui.AdvancedTooltip.prototype.setCursorTracking=function(o){this.cursorTracking_=o},goog.ui.AdvancedTooltip.prototype.getCursorTracking=function(){return this.cursorTracking_},goog.ui.AdvancedTooltip.prototype.setCursorTrackingHideDelayMs=function(o){this.cursorTrackingHideDelayMs_=o},goog.ui.AdvancedTooltip.prototype.getCursorTrackingHideDelayMs=function(){return this.cursorTrackingHideDelayMs_},goog.ui.AdvancedTooltip.prototype.onShow=function(){goog.ui.AdvancedTooltip.superClass_.onShow.call(this),this.boundingBox_=goog.style.getBounds(this.getElement()).toBox(),this.anchor&&(this.anchorBox_=goog.style.getBounds(this.anchor).toBox()),this.tracking_=this.cursorTracking_,goog.events.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this)},goog.ui.AdvancedTooltip.prototype.onHide=function(){goog.events.unlisten(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this),this.boundingBox_=null,this.anchorBox_=null,this.tracking_=!1,goog.ui.AdvancedTooltip.superClass_.onHide.call(this)},goog.ui.AdvancedTooltip.prototype.isMouseInTooltip=function(){return this.isCoordinateInTooltip(this.cursorPosition)},goog.ui.AdvancedTooltip.prototype.isCoordinateInTooltip=function(o){if(this.hotSpotPadding_){var t=goog.style.getPageOffset(this.getElement()),i=goog.style.getSize(this.getElement());return t.x-this.hotSpotPadding_.left<=o.x&&o.x<=t.x+i.width+this.hotSpotPadding_.right&&t.y-this.hotSpotPadding_.top<=o.y&&o.y<=t.y+i.height+this.hotSpotPadding_.bottom}return goog.ui.AdvancedTooltip.superClass_.isCoordinateInTooltip.call(this,o)},goog.ui.AdvancedTooltip.prototype.isCoordinateActive_=function(o){if(this.anchorBox_&&this.anchorBox_.contains(o)||this.isCoordinateInTooltip(o))return!0;var t=this.getChildTooltip();return!!t&&t.isCoordinateInTooltip(o)},goog.ui.AdvancedTooltip.prototype.maybeHide=function(o){if(this.hideTimer=void 0,o==this.anchor&&!this.isCoordinateActive_(this.cursorPosition)&&!this.getActiveElement()&&!this.hasActiveChild()){if(goog.userAgent.GECKO&&0==this.cursorPosition.x&&0==this.cursorPosition.y)return;this.setVisible(!1)}},goog.ui.AdvancedTooltip.prototype.handleMouseMove=function(o){var t=this.isVisible();if(this.boundingBox_){var i=this.getDomHelper().getDocumentScroll(),e=new goog.math.Coordinate(o.clientX+i.x,o.clientY+i.y);if(this.isCoordinateActive_(e))t=!1;else if(this.tracking_){var n=goog.math.Box.distance(this.boundingBox_,this.cursorPosition);t=goog.math.Box.distance(this.boundingBox_,e)>=n}}if(t){this.startHideTimer(),this.setActiveElement(null);var g=this.getChildTooltip();g&&g.setActiveElement(null)}else this.getState()==goog.ui.Tooltip.State.WAITING_TO_HIDE&&this.clearHideTimer();goog.ui.AdvancedTooltip.superClass_.handleMouseMove.call(this,o)},goog.ui.AdvancedTooltip.prototype.handleTooltipMouseOver=function(o){this.getActiveElement()!=this.getElement()&&(this.tracking_=!1,this.setActiveElement(this.getElement()))},goog.ui.AdvancedTooltip.prototype.getHideDelayMs=function(){return this.tracking_?this.cursorTrackingHideDelayMs_:goog.ui.AdvancedTooltip.base(this,"getHideDelayMs")},goog.ui.AdvancedTooltip.prototype.resetHotSpot=goog.nullFunction;