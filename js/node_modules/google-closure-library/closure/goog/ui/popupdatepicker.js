goog.provide("goog.ui.PopupDatePicker"),goog.require("goog.events.EventType"),goog.require("goog.positioning.AnchoredViewportPosition"),goog.require("goog.positioning.Corner"),goog.require("goog.style"),goog.require("goog.ui.Component"),goog.require("goog.ui.DatePicker"),goog.require("goog.ui.Popup"),goog.require("goog.ui.PopupBase"),goog.ui.PopupDatePicker=function(e,o){goog.ui.Component.call(this,o),this.datePicker_=e||new goog.ui.DatePicker,this.keepAllWeeksInViewport_=!1},goog.inherits(goog.ui.PopupDatePicker,goog.ui.Component),goog.tagUnsealableClass(goog.ui.PopupDatePicker),goog.ui.PopupDatePicker.prototype.datePicker_=null,goog.ui.PopupDatePicker.prototype.popup_=null,goog.ui.PopupDatePicker.prototype.lastTarget_=null,goog.ui.PopupDatePicker.prototype.allowAutoFocus_=!0,goog.ui.PopupDatePicker.prototype.createDom=function(){goog.ui.PopupDatePicker.superClass_.createDom.call(this),this.getElement().className=goog.getCssName("goog-popupdatepicker"),this.popup_=new goog.ui.Popup(this.getElement()),this.popup_.setParentEventTarget(this)},goog.ui.PopupDatePicker.prototype.isVisible=function(){return!!this.popup_&&this.popup_.isVisible()},goog.ui.PopupDatePicker.prototype.enterDocument=function(){if(goog.ui.PopupDatePicker.superClass_.enterDocument.call(this),!this.datePicker_.isInDocument()){var e=this.getElement();e.style.visibility="hidden",goog.style.setElementShown(e,!1),this.datePicker_.decorate(e)}this.getHandler().listen(this.datePicker_,goog.ui.DatePicker.Events.CHANGE,this.onDateChanged_).listen(this.datePicker_,goog.ui.DatePicker.Events.SELECT,this.onDateSelected_)},goog.ui.PopupDatePicker.prototype.disposeInternal=function(){goog.ui.PopupDatePicker.superClass_.disposeInternal.call(this),this.popup_&&(this.popup_.dispose(),this.popup_=null),this.datePicker_.dispose(),this.datePicker_=null,this.lastTarget_=null},goog.ui.PopupDatePicker.prototype.canDecorate=function(e){return!1},goog.ui.PopupDatePicker.prototype.getDatePicker=function(){return this.datePicker_},goog.ui.PopupDatePicker.prototype.getPopup=function(){return this.popup_},goog.ui.PopupDatePicker.prototype.getDate=function(){return this.datePicker_.getDate()},goog.ui.PopupDatePicker.prototype.setDate=function(e){this.datePicker_.setDate(e)},goog.ui.PopupDatePicker.prototype.getLastTarget=function(){return this.lastTarget_},goog.ui.PopupDatePicker.prototype.attach=function(e){this.getHandler().listen(e,goog.events.EventType.MOUSEDOWN,this.showPopup_)},goog.ui.PopupDatePicker.prototype.detach=function(e){this.getHandler().unlisten(e,goog.events.EventType.MOUSEDOWN,this.showPopup_)},goog.ui.PopupDatePicker.prototype.setAllowAutoFocus=function(e){this.allowAutoFocus_=e},goog.ui.PopupDatePicker.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.PopupDatePicker.prototype.setKeepAllWeeksInViewport=function(e){this.keepAllWeeksInViewport_=e},goog.ui.PopupDatePicker.prototype.getKeepAllWeeksInViewport=function(){return this.keepAllWeeksInViewport_},goog.ui.PopupDatePicker.prototype.showPopup=function(e,o){this.lastTarget_=e,this.popup_.setPosition(new goog.positioning.AnchoredViewportPosition(e,goog.positioning.Corner.BOTTOM_START,!0)),this.getHandler().unlisten(this.datePicker_,goog.ui.DatePicker.Events.CHANGE,this.onDateChanged_).unlisten(this.datePicker_,goog.ui.DatePicker.Events.SELECT,this.onDateSelected_).unlisten(this.datePicker_,goog.ui.DatePicker.Events.GRID_SIZE_INCREASE,this.onGridSizeIncrease_),!!o||this.datePicker_.setDate(null),this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW),this.popup_.setVisible(!0),this.allowAutoFocus_&&this.getElement().focus(),this.getHandler().listen(this.datePicker_,goog.ui.DatePicker.Events.CHANGE,this.onDateChanged_).listen(this.datePicker_,goog.ui.DatePicker.Events.SELECT,this.onDateSelected_),this.keepAllWeeksInViewport_&&this.getHandler().listen(this.datePicker_,goog.ui.DatePicker.Events.GRID_SIZE_INCREASE,this.onGridSizeIncrease_)},goog.ui.PopupDatePicker.prototype.showPopup_=function(e){this.showPopup(e.currentTarget)},goog.ui.PopupDatePicker.prototype.hidePopup=function(){this.popup_.setVisible(!1),this.allowAutoFocus_&&this.lastTarget_&&this.lastTarget_.focus()},goog.ui.PopupDatePicker.prototype.onDateSelected_=function(e){this.hidePopup(),this.dispatchEvent(e)},goog.ui.PopupDatePicker.prototype.onDateChanged_=function(e){this.dispatchEvent(e)},goog.ui.PopupDatePicker.prototype.onGridSizeIncrease_=function(){this.popup_&&this.popup_.reposition()};