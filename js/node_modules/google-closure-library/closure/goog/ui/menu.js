goog.provide("goog.ui.Menu"),goog.provide("goog.ui.Menu.EventType"),goog.require("goog.dom.TagName"),goog.require("goog.math.Coordinate"),goog.require("goog.string"),goog.require("goog.style"),goog.require("goog.ui.Component.EventType"),goog.require("goog.ui.Component.State"),goog.require("goog.ui.Container"),goog.require("goog.ui.Container.Orientation"),goog.require("goog.ui.MenuHeader"),goog.require("goog.ui.MenuItem"),goog.require("goog.ui.MenuRenderer"),goog.require("goog.ui.MenuSeparator"),goog.ui.Menu=function(e,o){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,o||goog.ui.MenuRenderer.getInstance(),e),this.setFocusable(!1)},goog.inherits(goog.ui.Menu,goog.ui.Container),goog.tagUnsealableClass(goog.ui.Menu),goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE},goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS,goog.ui.Menu.prototype.openingCoords,goog.ui.Menu.prototype.allowAutoFocus_=!0,goog.ui.Menu.prototype.allowHighlightDisabled_=!1,goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()},goog.ui.Menu.prototype.containsElement=function(e){if(this.getRenderer().containsElement(this,e))return!0;for(var o=0,t=this.getChildCount();o<t;o++){var i=this.getChildAt(o);if("function"==typeof i.containsElement&&i.containsElement(e))return!0}return!1},goog.ui.Menu.prototype.addItem=function(e){this.addChild(e,!0)},goog.ui.Menu.prototype.addItemAt=function(e,o){this.addChildAt(e,o,!0)},goog.ui.Menu.prototype.removeItem=function(e){var o=this.removeChild(e,!0);o&&o.dispose()},goog.ui.Menu.prototype.removeItemAt=function(e){var o=this.removeChildAt(e,!0);o&&o.dispose()},goog.ui.Menu.prototype.getItemAt=function(e){return this.getChildAt(e)},goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()},goog.ui.Menu.prototype.getItems=function(){var e=[];return this.forEachChild(function(o){e.push(o)}),e},goog.ui.Menu.prototype.setPosition=function(e,o){var t=this.isVisible();t||goog.style.setElementShown(this.getElement(),!0),goog.style.setPageOffset(this.getElement(),e,o),t||goog.style.setElementShown(this.getElement(),!1)},goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null},goog.ui.Menu.prototype.setAllowAutoFocus=function(e){this.allowAutoFocus_=e,e&&this.setFocusable(!0)},goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.Menu.prototype.setAllowHighlightDisabled=function(e){this.allowHighlightDisabled_=e},goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_},goog.ui.Menu.prototype.setVisible=function(e,o,t){var i=goog.ui.Menu.superClass_.setVisible.call(this,e,o);return i&&e&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus(),e&&t&&"number"==typeof t.clientX?this.openingCoords=new goog.math.Coordinate(t.clientX,t.clientY):this.openingCoords=null,i},goog.ui.Menu.prototype.handleEnterItem=function(e){return this.allowAutoFocus_&&this.getKeyEventTarget().focus(),goog.ui.Menu.superClass_.handleEnterItem.call(this,e)},goog.ui.Menu.prototype.highlightNextPrefix=function(e){var o=new RegExp("^"+goog.string.regExpEscape(e),"i");return this.highlightHelper(function(e,t){var i=e<0?0:e,n=!1;do{++e==t&&(e=0,n=!0);var g=this.getChildAt(e).getCaption();if(g&&g.match(o))return e}while(!n||e!=i);return this.getHighlightedIndex()},this.getHighlightedIndex())},goog.ui.Menu.prototype.canHighlightItem=function(e){return(this.allowHighlightDisabled_||e.isEnabled())&&e.isVisible()&&e.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Menu.prototype.decorateInternal=function(e){this.decorateContent(e),goog.ui.Menu.superClass_.decorateInternal.call(this,e)},goog.ui.Menu.prototype.handleKeyEventInternal=function(e){var o=goog.ui.Menu.base(this,"handleKeyEventInternal",e);return o||this.forEachChild(function(t){!o&&t.getMnemonic&&t.getMnemonic()==e.keyCode&&(this.isEnabled()&&this.setHighlighted(t),o=t.handleKeyEvent(e))},this),o},goog.ui.Menu.prototype.setHighlightedIndex=function(e){goog.ui.Menu.base(this,"setHighlightedIndex",e);var o=this.getChildAt(e);o&&goog.style.scrollIntoContainerView(o.getElement(),this.getElement())},goog.ui.Menu.prototype.decorateContent=function(e){for(var o=this.getRenderer(),t=this.getDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.DIV,goog.getCssName(o.getCssClass(),"content"),e),i=t.length,n=0;n<i;n++)o.decorateChildren(this,t[n])};