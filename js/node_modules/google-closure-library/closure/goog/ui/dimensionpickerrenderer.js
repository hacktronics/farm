goog.provide("goog.ui.DimensionPickerRenderer"),goog.forwardDeclare("goog.ui.DimensionPicker"),goog.require("goog.a11y.aria.Announcer"),goog.require("goog.a11y.aria.LivePriority"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.i18n.bidi"),goog.require("goog.style"),goog.require("goog.ui.ControlRenderer"),goog.require("goog.userAgent"),goog.ui.DimensionPickerRenderer=function(){goog.ui.ControlRenderer.call(this),this.announcer_=new goog.a11y.aria.Announcer},goog.inherits(goog.ui.DimensionPickerRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.DimensionPickerRenderer),goog.ui.DimensionPickerRenderer.CSS_CLASS=goog.getCssName("goog-dimension-picker"),goog.ui.DimensionPickerRenderer.prototype.getUnderlyingDiv_=function(e){return e.firstChild.childNodes[1]},goog.ui.DimensionPickerRenderer.prototype.getHighlightDiv_=function(e){return e.firstChild.lastChild},goog.ui.DimensionPickerRenderer.prototype.getStatusDiv_=function(e){return e.lastChild},goog.ui.DimensionPickerRenderer.prototype.getMouseCatcher_=function(e){return e.firstChild.firstChild},goog.ui.DimensionPickerRenderer.prototype.canDecorate=function(e){return e.tagName==goog.dom.TagName.DIV&&!e.firstChild},goog.ui.DimensionPickerRenderer.prototype.decorate=function(e,o){var t=e;return goog.ui.DimensionPickerRenderer.superClass_.decorate.call(this,t,o),this.addElementContents_(t,o),this.updateSize(t,o),o},goog.ui.DimensionPickerRenderer.prototype.updateSize=function(e,o){var t=e.getSize();o.style.width=t.width+"em";var i=this.getUnderlyingDiv_(o);i.style.width=t.width+"em",i.style.height=t.height+"em",e.isRightToLeft()&&this.adjustParentDirection_(e,o)},goog.ui.DimensionPickerRenderer.prototype.addElementContents_=function(e,o){var t=e.getDomHelper().createDom(goog.dom.TagName.DIV,goog.getCssName(this.getCssClass(),"mousecatcher")),i=e.getDomHelper().createDom(goog.dom.TagName.DIV,{class:goog.getCssName(this.getCssClass(),"unhighlighted"),style:"width:100%;height:100%"}),g=e.getDomHelper().createDom(goog.dom.TagName.DIV,goog.getCssName(this.getCssClass(),"highlighted"));o.appendChild(e.getDomHelper().createDom(goog.dom.TagName.DIV,{style:"width:100%;height:100%;touch-action:none;"},t,i,g)),o.appendChild(e.getDomHelper().createDom(goog.dom.TagName.DIV,goog.getCssName(this.getCssClass(),"status")))},goog.ui.DimensionPickerRenderer.prototype.createDom=function(e){var o=e,t=this.getClassNames(o),i=o.getDomHelper().createDom(goog.dom.TagName.DIV,{class:t?t.join(" "):"","aria-hidden":"true"});return this.addElementContents_(o,i),this.updateSize(o,i),i},goog.ui.DimensionPickerRenderer.prototype.initializeDom=function(e){var o=e;goog.ui.DimensionPickerRenderer.superClass_.initializeDom.call(this,o);var t=o.getValue();this.setHighlightedSize(o,t.width,t.height),this.positionMouseCatcher(o)},goog.ui.DimensionPickerRenderer.prototype.getMouseMoveElement=function(e){return e.getElement().firstChild},goog.ui.DimensionPickerRenderer.prototype.getGridOffsetX=function(e,o){return Math.min(e.maxColumns,Math.ceil(o/18))},goog.ui.DimensionPickerRenderer.prototype.getGridOffsetY=function(e,o){return Math.min(e.maxRows,Math.ceil(o/18))},goog.ui.DimensionPickerRenderer.prototype.setHighlightedSize=function(e,o,t){var i=e.getElement();if(i){var g=this.getHighlightDiv_(i).style;g.width=o+"em",g.height=t+"em",e.isRightToLeft()&&(g.right="0");var r=goog.getMsg("{$numCols} by {$numRows}",{numCols:String(o),numRows:String(t)});this.announcer_.say(r,goog.a11y.aria.LivePriority.ASSERTIVE),goog.dom.setTextContent(this.getStatusDiv_(i),goog.i18n.bidi.enforceLtrInText(o+" x "+t))}},goog.ui.DimensionPickerRenderer.prototype.positionMouseCatcher=function(e){var o=this.getMouseCatcher_(e.getElement()),t=goog.dom.getOwnerDocument(o),i=t.body,g=goog.style.getRelativePosition(o,i);o.style.display="none";var r,n=e.isRightToLeft()&&g.x>0?Math.floor(g.x/18):Math.floor((i.scrollWidth-g.x)/18);if(goog.userAgent.IE)r=goog.style.getClientViewportElement(i).scrollHeight-20;else{var s=goog.dom.getWindow(t);r=Math.max(s.innerHeight,i.scrollHeight)-20}var a=Math.floor((r-g.y)/18);o.style.width=Math.min(e.maxColumns,n)+"em",o.style.height=Math.min(e.maxRows,a)+"em",o.style.display="",e.isRightToLeft()&&(o.style.right="0")},goog.ui.DimensionPickerRenderer.prototype.getCssClass=function(){return goog.ui.DimensionPickerRenderer.CSS_CLASS},goog.ui.DimensionPickerRenderer.prototype.adjustParentDirection_=function(e,o){var t=e.getParent();if(t){var i=t.getElement(),g=goog.style.getStyle(i,"right");if(""==g){var r=goog.style.getPosition(i),n=goog.style.getSize(i);if(0!=n.width&&0!=r.x)g=goog.style.getBounds(goog.style.getClientViewportElement()).width-r.x-n.width,goog.style.setStyle(i,"right",g+"px")}""!=goog.style.getStyle(i,"left")&&goog.style.setStyle(i,"left","")}else goog.style.setStyle(o,"right","0px")};