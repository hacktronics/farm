goog.provide("goog.ui.ac.RemoteArrayMatcher"),goog.require("goog.Disposable"),goog.require("goog.Uri"),goog.require("goog.events"),goog.require("goog.net.EventType"),goog.require("goog.net.XhrIo"),goog.ui.ac.RemoteArrayMatcher=function(e,t,o){goog.Disposable.call(this),this.url_=e,this.useSimilar_=!t,this.xhr_=new goog.net.XhrIo(o)},goog.inherits(goog.ui.ac.RemoteArrayMatcher,goog.Disposable),goog.ui.ac.RemoteArrayMatcher.prototype.method_="GET",goog.ui.ac.RemoteArrayMatcher.prototype.content_=void 0,goog.ui.ac.RemoteArrayMatcher.prototype.headers_=null,goog.ui.ac.RemoteArrayMatcher.prototype.lastListenerKey_=null,goog.ui.ac.RemoteArrayMatcher.prototype.setMethod=function(e){this.method_=e},goog.ui.ac.RemoteArrayMatcher.prototype.setContent=function(e){this.content_=e},goog.ui.ac.RemoteArrayMatcher.prototype.setHeaders=function(e){this.headers_=e},goog.ui.ac.RemoteArrayMatcher.prototype.setTimeoutInterval=function(e){this.xhr_.setTimeoutInterval(e)},goog.ui.ac.RemoteArrayMatcher.prototype.buildUrl=function(e,t,o,r,a){var i=new goog.Uri(e);return i.setParameterValue("token",t),i.setParameterValue("max_matches",String(o)),i.setParameterValue("use_similar",String(Number(r))),i.toString()},goog.ui.ac.RemoteArrayMatcher.prototype.shouldRequestMatches=function(e,t,o,r,a){return!0},goog.ui.ac.RemoteArrayMatcher.prototype.parseResponseText=function(e){var t=[];if(e)try{t=JSON.parse(e)}catch(e){}return t},goog.ui.ac.RemoteArrayMatcher.prototype.xhrCallback=function(e,t,o){var r=o.target.getResponseText();t(e,this.parseResponseText(r))},goog.ui.ac.RemoteArrayMatcher.prototype.requestMatchingRows=function(e,t,o,r){if(this.shouldRequestMatches(this.url_,e,t,this.useSimilar_,r)){var a=this.buildUrl(this.url_,e,t,this.useSimilar_,r);if(a){var i=goog.bind(this.xhrCallback,this,e,o);this.xhr_.isActive()&&this.xhr_.abort(),this.lastListenerKey_&&goog.events.unlistenByKey(this.lastListenerKey_),this.lastListenerKey_=goog.events.listenOnce(this.xhr_,goog.net.EventType.SUCCESS,i),this.xhr_.send(a,this.method_,this.content_,this.headers_)}}},goog.ui.ac.RemoteArrayMatcher.prototype.disposeInternal=function(){this.xhr_.dispose(),goog.ui.ac.RemoteArrayMatcher.superClass_.disposeInternal.call(this)};