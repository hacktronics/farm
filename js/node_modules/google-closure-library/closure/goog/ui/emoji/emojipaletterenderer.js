goog.provide("goog.ui.emoji.EmojiPaletteRenderer"),goog.forwardDeclare("goog.ui.Palette"),goog.forwardDeclare("goog.ui.emoji.SpriteInfo"),goog.require("goog.a11y.aria"),goog.require("goog.asserts"),goog.require("goog.dom.NodeType"),goog.require("goog.dom.TagName"),goog.require("goog.dom.classlist"),goog.require("goog.style"),goog.require("goog.ui.PaletteRenderer"),goog.require("goog.ui.emoji.Emoji"),goog.ui.emoji.EmojiPaletteRenderer=function(e){goog.ui.PaletteRenderer.call(this),this.defaultImgUrl_=e},goog.inherits(goog.ui.emoji.EmojiPaletteRenderer,goog.ui.PaletteRenderer),goog.ui.emoji.EmojiPaletteRenderer.cellId_=0,goog.ui.emoji.EmojiPaletteRenderer.prototype.defaultImgUrl_=null,goog.ui.emoji.EmojiPaletteRenderer.getCssClass=function(){return goog.getCssName("goog-ui-emojipalette")},goog.ui.emoji.EmojiPaletteRenderer.prototype.createPaletteItem=function(e,o,g,t){var r;if(g){var a=g.getCssClass();r=a?e.createDom(goog.dom.TagName.DIV,a):this.buildElementFromSpriteMetadata(e,g,t)}else r=e.createDom(goog.dom.TagName.IMG,{src:t});var i=e.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-palette-cell-wrapper"),r);return i.setAttribute(goog.ui.emoji.Emoji.ATTRIBUTE,o),i.setAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE,o),i},goog.ui.emoji.EmojiPaletteRenderer.prototype.updateAnimatedPaletteItem=function(e,o){var g=e.firstChild;goog.asserts.assert(g);var t=goog.dom.classlist.get(g);t&&1==t.length&&(g.className=""),goog.style.setStyle(g,{width:o.width,height:o.height,"background-image":"url("+o.src+")","background-position":"0 0"})},goog.ui.emoji.EmojiPaletteRenderer.prototype.buildElementFromSpriteMetadata=function(e,o,g){var t=o.getWidthCssValue(),r=o.getHeightCssValue(),a=o.getXOffsetCssValue(),i=o.getYOffsetCssValue(),m=e.createDom(goog.dom.TagName.DIV);return goog.style.setStyle(m,{width:t,height:r,"background-image":"url("+g+")","background-repeat":"no-repeat","background-position":a+" "+i}),m},goog.ui.emoji.EmojiPaletteRenderer.prototype.createCell=function(e,o){if(!e){var g=this.defaultImgUrl_?o.createDom(goog.dom.TagName.IMG,{src:this.defaultImgUrl_}):o.createDom(goog.dom.TagName.DIV);e=o.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-palette-cell-wrapper"),g)}var t=o.createDom(goog.dom.TagName.TD,{class:goog.getCssName(this.getCssClass(),"cell"),id:this.getCssClass()+"-cell-"+goog.ui.emoji.EmojiPaletteRenderer.cellId_++},e);return goog.a11y.aria.setRole(t,"gridcell"),t},goog.ui.emoji.EmojiPaletteRenderer.prototype.getContainingItem=function(e,o){for(var g=e.getElement();o&&o.nodeType==goog.dom.NodeType.ELEMENT&&o!=g;){if(o.tagName==goog.dom.TagName.TD)return o.firstChild;o=o.parentNode}return null};