goog.provide("goog.ui.PopupColorPicker"),goog.require("goog.asserts"),goog.require("goog.dom.classlist"),goog.require("goog.events.EventType"),goog.require("goog.positioning.AnchoredPosition"),goog.require("goog.positioning.Corner"),goog.require("goog.ui.ColorPicker"),goog.require("goog.ui.Component"),goog.require("goog.ui.Popup"),goog.ui.PopupColorPicker=function(o,e){goog.ui.Component.call(this,o),e&&(this.colorPicker_=e)},goog.inherits(goog.ui.PopupColorPicker,goog.ui.Component),goog.tagUnsealableClass(goog.ui.PopupColorPicker),goog.ui.PopupColorPicker.prototype.initialized_=!1,goog.ui.PopupColorPicker.prototype.colorPicker_=null,goog.ui.PopupColorPicker.prototype.popup_=null,goog.ui.PopupColorPicker.prototype.pinnedCorner_=goog.positioning.Corner.TOP_START,goog.ui.PopupColorPicker.prototype.popupCorner_=goog.positioning.Corner.BOTTOM_START,goog.ui.PopupColorPicker.prototype.lastTarget_=null,goog.ui.PopupColorPicker.prototype.rememberSelection_,goog.ui.PopupColorPicker.prototype.allowAutoFocus_=!0,goog.ui.PopupColorPicker.prototype.focusable_=!0,goog.ui.PopupColorPicker.prototype.toggleMode_=!0,goog.ui.PopupColorPicker.prototype.showOnHover_=!1,goog.ui.PopupColorPicker.prototype.createDom=function(){goog.ui.PopupColorPicker.superClass_.createDom.call(this),this.popup_=new goog.ui.Popup(this.getElement()),this.popup_.setPinnedCorner(this.pinnedCorner_),goog.dom.classlist.set(goog.asserts.assert(this.getElement()),goog.getCssName("goog-popupcolorpicker")),this.getElement().unselectable="on"},goog.ui.PopupColorPicker.prototype.disposeInternal=function(){goog.ui.PopupColorPicker.superClass_.disposeInternal.call(this),this.colorPicker_=null,this.lastTarget_=null,this.initialized_=!1,this.popup_&&(this.popup_.dispose(),this.popup_=null)},goog.ui.PopupColorPicker.prototype.canDecorate=function(o){return!1},goog.ui.PopupColorPicker.prototype.getColorPicker=function(){return this.colorPicker_},goog.ui.PopupColorPicker.prototype.getAutoHide=function(){return!!this.popup_&&this.popup_.getAutoHide()},goog.ui.PopupColorPicker.prototype.setAutoHide=function(o){this.popup_&&this.popup_.setAutoHide(o)},goog.ui.PopupColorPicker.prototype.getAutoHideRegion=function(){return this.popup_&&this.popup_.getAutoHideRegion()},goog.ui.PopupColorPicker.prototype.setAutoHideRegion=function(o){this.popup_&&this.popup_.setAutoHideRegion(o)},goog.ui.PopupColorPicker.prototype.getPopup=function(){return this.popup_},goog.ui.PopupColorPicker.prototype.getLastTarget=function(){return this.lastTarget_},goog.ui.PopupColorPicker.prototype.attach=function(o){this.showOnHover_?this.getHandler().listen(o,goog.events.EventType.MOUSEOVER,this.show_):this.getHandler().listen(o,goog.events.EventType.MOUSEDOWN,this.show_)},goog.ui.PopupColorPicker.prototype.detach=function(o){this.showOnHover_,this.getHandler().unlisten(o,goog.events.EventType.MOUSEOVER,this.show_)},goog.ui.PopupColorPicker.prototype.getSelectedColor=function(){return this.colorPicker_.getSelectedColor()},goog.ui.PopupColorPicker.prototype.setFocusable=function(o){this.focusable_=o,this.colorPicker_&&this.colorPicker_.setFocusable(o)},goog.ui.PopupColorPicker.prototype.setAllowAutoFocus=function(o){this.allowAutoFocus_=o},goog.ui.PopupColorPicker.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.PopupColorPicker.prototype.setToggleMode=function(o){this.toggleMode_=o},goog.ui.PopupColorPicker.prototype.getToggleMode=function(){return this.toggleMode_},goog.ui.PopupColorPicker.prototype.setRememberSelection=function(o){this.rememberSelection_=o},goog.ui.PopupColorPicker.prototype.getRememberSelection=function(){return this.rememberSelection_},goog.ui.PopupColorPicker.prototype.addColors=function(o){},goog.ui.PopupColorPicker.prototype.clearColors=function(){},goog.ui.PopupColorPicker.prototype.setPinnedCorner=function(o){this.pinnedCorner_=o,this.popup_&&this.popup_.setPinnedCorner(this.pinnedCorner_)},goog.ui.PopupColorPicker.prototype.setPopupCorner=function(o){this.popupCorner_=o},goog.ui.PopupColorPicker.prototype.setShowOnHover=function(o){this.showOnHover_=o},goog.ui.PopupColorPicker.prototype.show_=function(o){this.initialized_||(this.colorPicker_=this.colorPicker_||goog.ui.ColorPicker.createSimpleColorGrid(this.getDomHelper()),this.colorPicker_.setFocusable(this.focusable_),this.addChild(this.colorPicker_,!0),this.getHandler().listen(this.colorPicker_,goog.ui.ColorPicker.EventType.CHANGE,this.onColorPicked_),this.initialized_=!0),this.popup_.isOrWasRecentlyVisible()&&this.toggleMode_&&this.lastTarget_==o.currentTarget?this.popup_.setVisible(!1):(this.lastTarget_=o.currentTarget,this.popup_.setPosition(new goog.positioning.AnchoredPosition(this.lastTarget_,this.popupCorner_)),this.rememberSelection_||this.colorPicker_.setSelectedIndex(-1),this.popup_.setVisible(!0),this.allowAutoFocus_&&this.colorPicker_.focus())},goog.ui.PopupColorPicker.prototype.onColorPicked_=function(o){-1!=this.colorPicker_.getSelectedIndex()?(this.popup_.setVisible(!1),this.allowAutoFocus_&&this.lastTarget_.focus()):o.stopPropagation()};