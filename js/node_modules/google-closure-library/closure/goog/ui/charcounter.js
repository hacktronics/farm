goog.provide("goog.ui.CharCounter"),goog.provide("goog.ui.CharCounter.Display"),goog.require("goog.dom"),goog.require("goog.events"),goog.require("goog.events.EventTarget"),goog.require("goog.events.InputHandler"),goog.ui.CharCounter=function(t,e,o,n){goog.events.EventTarget.call(this),this.elInput_=t,this.elCount_=e,this.maxLength_=o,this.display_=n||goog.ui.CharCounter.Display.REMAINING,t.removeAttribute("maxlength"),this.inputHandler_=new goog.events.InputHandler(t),goog.events.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.onChange_,!1,this),this.checkLength()},goog.inherits(goog.ui.CharCounter,goog.events.EventTarget),goog.ui.CharCounter.Display={REMAINING:0,INCREMENTAL:1},goog.ui.CharCounter.prototype.setMaxLength=function(t){this.maxLength_=t,this.checkLength()},goog.ui.CharCounter.prototype.getMaxLength=function(){return this.maxLength_},goog.ui.CharCounter.prototype.setDisplayMode=function(t){this.display_=t,this.checkLength()},goog.ui.CharCounter.prototype.getDisplayMode=function(){return this.display_},goog.ui.CharCounter.prototype.onChange_=function(t){this.checkLength()},goog.ui.CharCounter.prototype.checkLength=function(){var t=this.elInput_.value.length;if(t>this.maxLength_){var e=this.elInput_.scrollTop,o=this.elInput_.scrollLeft;this.elInput_.value=this.elInput_.value.substring(0,this.maxLength_),t=this.maxLength_,this.elInput_.scrollTop=e,this.elInput_.scrollLeft=o}if(this.elCount_){var n=this.display_==goog.ui.CharCounter.Display.INCREMENTAL;goog.dom.setTextContent(this.elCount_,String(n?t:this.maxLength_-t))}},goog.ui.CharCounter.prototype.disposeInternal=function(){goog.ui.CharCounter.superClass_.disposeInternal.call(this),delete this.elInput_,this.inputHandler_.dispose(),this.inputHandler_=null};