goog.provide("goog.ui.SplitPane"),goog.provide("goog.ui.SplitPane.Orientation"),goog.require("goog.asserts"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.dom.classlist"),goog.require("goog.events.EventType"),goog.require("goog.fx.Dragger"),goog.require("goog.math.Rect"),goog.require("goog.math.Size"),goog.require("goog.style"),goog.require("goog.ui.Component"),goog.require("goog.userAgent"),goog.ui.SplitPane=function(t,e,o,i){goog.ui.SplitPane.base(this,"constructor",i),this.orientation_=o,this.firstComponent_=t,this.addChild(t),this.secondComponent_=e,this.addChild(e),this.splitpaneHandle_=null},goog.inherits(goog.ui.SplitPane,goog.ui.Component),goog.tagUnsealableClass(goog.ui.SplitPane),goog.ui.SplitPane.EventType={HANDLE_DRAG:"handle_drag",HANDLE_DRAG_END:"handle_drag_end",HANDLE_SNAP:"handle_snap"},goog.ui.SplitPane.CLASS_NAME_=goog.getCssName("goog-splitpane"),goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_=goog.getCssName("goog-splitpane-first-container"),goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_=goog.getCssName("goog-splitpane-second-container"),goog.ui.SplitPane.HANDLE_CLASS_NAME_=goog.getCssName("goog-splitpane-handle"),goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_=goog.getCssName("goog-splitpane-handle-horizontal"),goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_=goog.getCssName("goog-splitpane-handle-vertical"),goog.ui.SplitPane.prototype.splitDragger_=null,goog.ui.SplitPane.prototype.firstComponentContainer_=null,goog.ui.SplitPane.prototype.secondComponentContainer_=null,goog.ui.SplitPane.prototype.handleSize_=5,goog.ui.SplitPane.prototype.initialSize_=null,goog.ui.SplitPane.prototype.savedSnapSize_=null,goog.ui.SplitPane.prototype.firstComponentSize_=null,goog.ui.SplitPane.prototype.continuousResize_=!0,goog.ui.SplitPane.prototype.iframeOverlay_=null,goog.ui.SplitPane.IframeOverlayIndex_={HIDDEN:-1,OVERLAY:1,SPLITTER_HANDLE:2},goog.ui.SplitPane.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"},goog.ui.SplitPane.prototype.createDom=function(){var t=this.getDomHelper(),e=t.createDom(goog.dom.TagName.DIV,goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_),o=t.createDom(goog.dom.TagName.DIV,goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_),i=t.createDom(goog.dom.TagName.DIV,goog.ui.SplitPane.HANDLE_CLASS_NAME_);this.setElementInternal(t.createDom(goog.dom.TagName.DIV,goog.ui.SplitPane.CLASS_NAME_,e,o,i)),this.firstComponentContainer_=e,this.secondComponentContainer_=o,this.splitpaneHandle_=i,this.setUpHandle_(),this.finishSetup_()},goog.ui.SplitPane.prototype.canDecorate=function(t){var e=goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_,o=this.getElementToDecorate_(t,e);if(!o)return!1;this.firstComponentContainer_=o,e=goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_;var i=this.getElementToDecorate_(t,e);if(!i)return!1;this.secondComponentContainer_=i,e=goog.ui.SplitPane.HANDLE_CLASS_NAME_;var n=this.getElementToDecorate_(t,e);return!!n&&(this.splitpaneHandle_=n,!0)},goog.ui.SplitPane.prototype.getElementToDecorate_=function(t,e){for(var o=goog.dom.getChildren(t),i=0;i<o.length;i++){var n=goog.asserts.assertElement(o[i]);if(goog.dom.classlist.contains(n,e))return n}return goog.dom.getElementsByTagNameAndClass(null,e,t)[0]},goog.ui.SplitPane.prototype.decorateInternal=function(t){goog.ui.SplitPane.base(this,"decorateInternal",t),this.setUpHandle_();var e=goog.style.getBorderBoxSize(t);this.setSize(new goog.math.Size(e.width,e.height)),this.finishSetup_()},goog.ui.SplitPane.prototype.finishSetup_=function(){var t=this.getDomHelper();this.firstComponent_.getElement()||this.firstComponent_.createDom(),t.appendChild(this.firstComponentContainer_,this.firstComponent_.getElement()),this.secondComponent_.getElement()||this.secondComponent_.createDom(),t.appendChild(this.secondComponentContainer_,this.secondComponent_.getElement()),this.splitDragger_=new goog.fx.Dragger(this.splitpaneHandle_,this.splitpaneHandle_),this.firstComponentContainer_.style.position="absolute",this.secondComponentContainer_.style.position="absolute";var e=this.splitpaneHandle_.style;e.position="absolute",e.overflow="hidden",e.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.SPLITTER_HANDLE},goog.ui.SplitPane.prototype.enterDocument=function(){goog.ui.SplitPane.base(this,"enterDocument");var t=this.getElement();"static"==goog.style.getComputedPosition(t)&&(t.style.position="relative"),this.getHandler().listen(this.splitpaneHandle_,goog.events.EventType.DBLCLICK,this.handleDoubleClick_).listen(this.splitDragger_,goog.fx.Dragger.EventType.START,this.handleDragStart_).listen(this.splitDragger_,goog.fx.Dragger.EventType.DRAG,this.handleDrag_).listen(this.splitDragger_,goog.fx.Dragger.EventType.END,this.handleDragEnd_),this.setFirstComponentSize(this.initialSize_)},goog.ui.SplitPane.prototype.setInitialSize=function(t){this.initialSize_=t},goog.ui.SplitPane.prototype.setHandleSize=function(t){this.handleSize_=t},goog.ui.SplitPane.prototype.setContinuousResize=function(t){this.continuousResize_=t},goog.ui.SplitPane.prototype.isVertical=function(){return this.orientation_==goog.ui.SplitPane.Orientation.VERTICAL},goog.ui.SplitPane.prototype.setUpHandle_=function(){this.isVertical()?(this.splitpaneHandle_.style.height=this.handleSize_+"px",goog.dom.classlist.add(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_)):(this.splitpaneHandle_.style.width=this.handleSize_+"px",goog.dom.classlist.add(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_))},goog.ui.SplitPane.prototype.setOrientationClassForHandle=function(){goog.asserts.assert(this.splitpaneHandle_),this.isVertical()?goog.dom.classlist.swap(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_):goog.dom.classlist.swap(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_)},goog.ui.SplitPane.prototype.setOrientation=function(t){if(this.orientation_!=t){this.orientation_=t;var e=this.isVertical();if(this.isInDocument())if(this.setOrientationClassForHandle(),"number"==typeof this.firstComponentSize_){var o=goog.style.getBorderBoxSize(this.getElement()),i=e?o.height/o.width:o.width/o.height;this.setFirstComponentSize(this.firstComponentSize_*i)}else this.setFirstComponentSize()}},goog.ui.SplitPane.prototype.getOrientation=function(){return this.orientation_},goog.ui.SplitPane.prototype.moveAndSize_=function(t,e){goog.style.setPosition(t,e.left,e.top),goog.style.setBorderBoxSize(t,new goog.math.Size(Math.max(e.width,0),Math.max(e.height,0)))},goog.ui.SplitPane.prototype.getFirstComponentSize=function(){return this.firstComponentSize_},goog.ui.SplitPane.prototype.setFirstComponentSize=function(t){this.setFirstComponentSize_(goog.style.getBorderBoxSize(this.getElement()),t)},goog.ui.SplitPane.prototype.setFirstComponentSize_=function(t,e){var o,i,n,g,s,a,r,p,l,h,_=this.isVertical(),S="number"==typeof e?e:"number"==typeof this.firstComponentSize_?this.firstComponentSize_:Math.floor((_?t.height:t.width)/2);this.firstComponentSize_=S,_?(i=S,o=t.width,s=t.width,a=this.handleSize_,g=t.height-i-a,n=t.width,l=0,p=(h=0+i)+a,r=0):(o=S,i=t.height,s=this.handleSize_,a=t.height,n=t.width-o-s,g=t.height,h=0,r=(l=0+o)+s,p=0),this.moveAndSize_(this.firstComponentContainer_,new goog.math.Rect(0,0,o,i)),"function"==typeof this.firstComponent_.resize&&this.firstComponent_.resize(new goog.math.Size(o,i)),this.moveAndSize_(this.splitpaneHandle_,new goog.math.Rect(l,h,s,a)),this.moveAndSize_(this.secondComponentContainer_,new goog.math.Rect(r,p,n,g)),"function"==typeof this.secondComponent_.resize&&this.secondComponent_.resize(new goog.math.Size(n,g)),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},goog.ui.SplitPane.prototype.setSize=function(t,e){goog.style.setBorderBoxSize(this.getElement(),t),this.iframeOverlay_&&goog.style.setBorderBoxSize(this.iframeOverlay_,t),this.setFirstComponentSize_(t,e)},goog.ui.SplitPane.prototype.snapIt_=function(){var t,e,o=goog.style.getRelativePosition(this.splitpaneHandle_,this.firstComponentContainer_),i=goog.style.getBorderBoxSize(this.firstComponentContainer_),n=goog.style.getContentBoxSize(this.firstComponentContainer_),g=this.isVertical();g?(t=i.height-n.height,e=o.y):(t=i.width-n.width,e=o.x),t==e?this.setFirstComponentSize(this.savedSnapSize_):(this.savedSnapSize_=g?goog.style.getBorderBoxSize(this.firstComponentContainer_).height:goog.style.getBorderBoxSize(this.firstComponentContainer_).width,this.setFirstComponentSize(t)),this.dispatchEvent(goog.ui.SplitPane.EventType.HANDLE_SNAP)},goog.ui.SplitPane.prototype.handleDragStart_=function(t){if(!this.iframeOverlay_){var e="position: relative";goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("10")&&(e+=";background-color: #000;filter: Alpha(Opacity=0)"),this.iframeOverlay_=this.getDomHelper().createDom(goog.dom.TagName.DIV,{style:e}),this.getDomHelper().appendChild(this.getElement(),this.iframeOverlay_)}this.iframeOverlay_.style.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.OVERLAY,goog.style.setBorderBoxSize(this.iframeOverlay_,goog.style.getBorderBoxSize(this.getElement()));var o=goog.style.getPosition(this.firstComponentContainer_),i=0,n=0,g=o.x,s=o.y,a=goog.style.getBorderBoxSize(this.firstComponentContainer_),r=goog.style.getContentBoxSize(this.firstComponentContainer_),p=goog.style.getContentBoxSize(this.secondComponentContainer_);this.isVertical()?(n=r.height+p.height,s+=a.height-r.height):(i=r.width+p.width,g+=a.width-r.width);var l=new goog.math.Rect(g,s,i,n);this.splitDragger_.setLimits(l)},goog.ui.SplitPane.prototype.getRelativeLeft_=function(t){return t-goog.style.getPosition(this.firstComponentContainer_).x},goog.ui.SplitPane.prototype.getRelativeTop_=function(t){return t-goog.style.getPosition(this.firstComponentContainer_).y},goog.ui.SplitPane.prototype.handleDrag_=function(t){if(this.continuousResize_){if(this.isVertical()){var e=this.getRelativeTop_(t.top);this.setFirstComponentSize(e)}else{var o=this.getRelativeLeft_(t.left);this.setFirstComponentSize(o)}this.dispatchEvent(goog.ui.SplitPane.EventType.HANDLE_DRAG)}},goog.ui.SplitPane.prototype.handleDragEnd_=function(t){if(this.iframeOverlay_.style.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.HIDDEN,!this.continuousResize_)if(this.isVertical()){var e=this.getRelativeTop_(t.top);this.setFirstComponentSize(e)}else{var o=this.getRelativeLeft_(t.left);this.setFirstComponentSize(o)}this.dispatchEvent(goog.ui.SplitPane.EventType.HANDLE_DRAG_END)},goog.ui.SplitPane.prototype.handleDoubleClick_=function(t){this.snapIt_()},goog.ui.SplitPane.prototype.disposeInternal=function(){goog.dispose(this.splitDragger_),this.splitDragger_=null,goog.dom.removeNode(this.iframeOverlay_),this.iframeOverlay_=null,goog.ui.SplitPane.base(this,"disposeInternal")};