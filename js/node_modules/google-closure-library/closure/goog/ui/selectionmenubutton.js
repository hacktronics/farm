goog.provide("goog.ui.SelectionMenuButton"),goog.provide("goog.ui.SelectionMenuButton.SelectionState"),goog.require("goog.dom.InputType"),goog.require("goog.dom.TagName"),goog.require("goog.events.EventType"),goog.require("goog.style"),goog.require("goog.ui.Component"),goog.require("goog.ui.MenuButton"),goog.require("goog.ui.MenuItem"),goog.require("goog.ui.registry"),goog.ui.SelectionMenuButton=function(e,t,o){goog.ui.MenuButton.call(this,null,null,e,o),this.initialItemRenderer_=t||null},goog.inherits(goog.ui.SelectionMenuButton,goog.ui.MenuButton),goog.tagUnsealableClass(goog.ui.SelectionMenuButton),goog.ui.SelectionMenuButton.SelectionState={ALL:0,SOME:1,NONE:2},goog.ui.SelectionMenuButton.prototype.selectionState=goog.ui.SelectionMenuButton.SelectionState.NONE,goog.ui.SelectionMenuButton.prototype.initialItemRenderer_,goog.ui.SelectionMenuButton.prototype.setEnabled=function(e){goog.ui.SelectionMenuButton.base(this,"setEnabled",e),this.setCheckboxEnabled(e)},goog.ui.SelectionMenuButton.prototype.setCheckboxEnabled=function(e){this.getCheckboxElement().disabled=!e},goog.ui.SelectionMenuButton.prototype.handleMouseDown=function(e){this.getDomHelper().contains(this.getCheckboxElement(),e.target)||goog.ui.SelectionMenuButton.superClass_.handleMouseDown.call(this,e)},goog.ui.SelectionMenuButton.prototype.getCheckboxElement=function(){return this.getDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.INPUT,goog.getCssName("goog-selectionmenubutton-checkbox"),this.getContentElement())[0]},goog.ui.SelectionMenuButton.prototype.handleCheckboxClick=function(e){this.selectionState==goog.ui.SelectionMenuButton.SelectionState.NONE?(this.setSelectionState(goog.ui.SelectionMenuButton.SelectionState.ALL),this.getItemAt(0)&&this.getItemAt(0).dispatchEvent(goog.ui.Component.EventType.ACTION)):(this.setSelectionState(goog.ui.SelectionMenuButton.SelectionState.NONE),this.getItemAt(1)&&this.getItemAt(1).dispatchEvent(goog.ui.Component.EventType.ACTION))},goog.ui.SelectionMenuButton.prototype.handleMenuAction_=function(e){e.target.getModel()==goog.ui.SelectionMenuButton.SelectionState.ALL?this.setSelectionState(goog.ui.SelectionMenuButton.SelectionState.ALL):this.setSelectionState(goog.ui.SelectionMenuButton.SelectionState.NONE)},goog.ui.SelectionMenuButton.prototype.addMenuEvent_=function(){this.getItemAt(0)&&this.getItemAt(1)&&(this.getHandler().listen(this.getMenu(),goog.ui.Component.EventType.ACTION,this.handleMenuAction_),this.getItemAt(0).setModel(goog.ui.SelectionMenuButton.SelectionState.ALL),this.getItemAt(1).setModel(goog.ui.SelectionMenuButton.SelectionState.NONE))},goog.ui.SelectionMenuButton.prototype.addCheckboxEvent=function(){this.getHandler().listen(this.getCheckboxElement(),goog.events.EventType.CLICK,this.handleCheckboxClick)},goog.ui.SelectionMenuButton.prototype.createDom=function(){goog.ui.SelectionMenuButton.superClass_.createDom.call(this),this.createCheckbox();var e=goog.getMsg("All"),t=goog.getMsg("None"),o=new goog.ui.MenuItem(e,null,this.getDomHelper(),this.initialItemRenderer_),n=new goog.ui.MenuItem(t,null,this.getDomHelper(),this.initialItemRenderer_);this.addItem(o),this.addItem(n),this.addCheckboxEvent(),this.addMenuEvent_()},goog.ui.SelectionMenuButton.prototype.createCheckbox=function(){var e=this.getDomHelper().createElement(goog.dom.TagName.INPUT);e.type=goog.dom.InputType.CHECKBOX,e.className=goog.getCssName("goog-selectionmenubutton-checkbox"),this.setContent(e)},goog.ui.SelectionMenuButton.prototype.decorateInternal=function(e){goog.ui.SelectionMenuButton.superClass_.decorateInternal.call(this,e),this.addCheckboxEvent(),this.addMenuEvent_()},goog.ui.SelectionMenuButton.prototype.setMenu=function(e){goog.ui.SelectionMenuButton.superClass_.setMenu.call(this,e),this.addMenuEvent_()},goog.ui.SelectionMenuButton.prototype.setSelectionState=function(e){if(this.selectionState!=e){var t=this.getCheckboxElement();e==goog.ui.SelectionMenuButton.SelectionState.ALL?(t.checked=!0,goog.style.setOpacity(t,1)):e==goog.ui.SelectionMenuButton.SelectionState.SOME?(t.checked=!0,goog.style.setOpacity(t,.5)):(t.checked=!1,goog.style.setOpacity(t,1)),this.selectionState=e}},goog.ui.SelectionMenuButton.prototype.getSelectionState=function(){return this.selectionState},goog.ui.registry.setDecoratorByClassName(goog.getCssName("goog-selectionmenubutton-button"),function(){return new goog.ui.SelectionMenuButton});