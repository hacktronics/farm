goog.provide("goog.ui.AnimatedZippy"),goog.require("goog.a11y.aria.Role"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.events"),goog.require("goog.fx.Animation"),goog.require("goog.fx.Transition"),goog.require("goog.fx.easing"),goog.require("goog.ui.Zippy"),goog.require("goog.ui.ZippyEvent"),goog.ui.AnimatedZippy=function(i,o,e,t,n){var g=t||goog.dom.getDomHelper(),a=g.createDom(goog.dom.TagName.DIV,{style:"overflow:hidden"}),p=g.getElement(o);p.parentNode.replaceChild(a,p),a.appendChild(p),this.elWrapper_=a,this.anim_=null,goog.ui.Zippy.call(this,i,p,e,void 0,g,n);var s=this.isExpanded();this.elWrapper_.style.display=s?"":"none",this.updateHeaderClassName(s)},goog.inherits(goog.ui.AnimatedZippy,goog.ui.Zippy),goog.tagUnsealableClass(goog.ui.AnimatedZippy),goog.ui.AnimatedZippy.Events={TOGGLE_ANIMATION_BEGIN:goog.events.getUniqueId("toggleanimationbegin"),TOGGLE_ANIMATION_END:goog.events.getUniqueId("toggleanimationend")},goog.ui.AnimatedZippy.prototype.animationDuration=500,goog.ui.AnimatedZippy.prototype.animationAcceleration=goog.fx.easing.easeOut,goog.ui.AnimatedZippy.prototype.isBusy=function(){return null!=this.anim_},goog.ui.AnimatedZippy.prototype.setExpanded=function(i){if(this.isExpanded()!=i||this.anim_){"none"==this.elWrapper_.style.display&&(this.elWrapper_.style.display="");var o=this.getContentElement().offsetHeight,e=0;if(this.anim_){goog.events.removeAll(this.anim_),this.anim_.stop(!1);var t=parseInt(this.getContentElement().style.marginTop,10);e=o-Math.abs(t)}else e=i?0:o;this.updateHeaderClassName(i),this.anim_=new goog.fx.Animation([0,e],[0,i?o:0],this.animationDuration,this.animationAcceleration);var n=[goog.fx.Transition.EventType.BEGIN,goog.fx.Animation.EventType.ANIMATE,goog.fx.Transition.EventType.END];goog.events.listen(this.anim_,n,this.onAnimate_,!1,this),goog.events.listen(this.anim_,goog.fx.Transition.EventType.BEGIN,goog.bind(this.onAnimationBegin_,this,i)),goog.events.listen(this.anim_,goog.fx.Transition.EventType.END,goog.bind(this.onAnimationCompleted_,this,i)),this.anim_.play(!1)}},goog.ui.AnimatedZippy.prototype.onAnimate_=function(i){var o=this.getContentElement(),e=o.offsetHeight;o.style.marginTop=i.y-e+"px"},goog.ui.AnimatedZippy.prototype.onAnimationBegin_=function(i){this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.AnimatedZippy.Events.TOGGLE_ANIMATION_BEGIN,this,i))},goog.ui.AnimatedZippy.prototype.onAnimationCompleted_=function(i){i&&(this.getContentElement().style.marginTop="0"),goog.events.removeAll(this.anim_),this.setExpandedInternal(i),this.anim_=null,i||(this.elWrapper_.style.display="none"),this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.Zippy.Events.TOGGLE,this,i)),this.dispatchEvent(new goog.ui.ZippyEvent(goog.ui.AnimatedZippy.Events.TOGGLE_ANIMATION_END,this,i))};