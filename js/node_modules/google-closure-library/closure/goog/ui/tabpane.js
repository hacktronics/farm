goog.provide("goog.ui.TabPane"),goog.provide("goog.ui.TabPane.Events"),goog.provide("goog.ui.TabPane.TabLocation"),goog.provide("goog.ui.TabPane.TabPage"),goog.provide("goog.ui.TabPaneEvent"),goog.require("goog.asserts"),goog.require("goog.dom"),goog.require("goog.dom.TagName"),goog.require("goog.dom.classlist"),goog.require("goog.events"),goog.require("goog.events.Event"),goog.require("goog.events.EventTarget"),goog.require("goog.events.EventType"),goog.require("goog.events.KeyCodes"),goog.require("goog.html.SafeStyleSheet"),goog.require("goog.style"),goog.ui.TabPane=function(e,t,o,g){goog.events.EventTarget.call(this),this.dom_=o||goog.dom.getDomHelper(),this.el_=e,this.pages_=[],this.tabLocation_=t||goog.ui.TabPane.TabLocation.TOP,this.useMouseDown_=!!g,this.create_()},goog.inherits(goog.ui.TabPane,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.TabPane),goog.ui.TabPane.prototype.elButtonBar_,goog.ui.TabPane.prototype.elContent_,goog.ui.TabPane.prototype.selected_,goog.ui.TabPane.Events={CHANGE:"change"},goog.ui.TabPane.TabLocation={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},goog.ui.TabPane.prototype.create_=function(){this.el_.className=goog.getCssName("goog-tabpane");var e=this.getChildNodes_();this.elButtonBar_=this.dom_.createDom(goog.dom.TagName.UL,{className:goog.getCssName("goog-tabpane-tabs"),tabIndex:"0"}),this.elContent_=this.dom_.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-tabpane-cont")),this.el_.appendChild(this.elContent_);var t=goog.asserts.assertElement(this.el_);switch(this.tabLocation_){case goog.ui.TabPane.TabLocation.TOP:t.insertBefore(this.elButtonBar_,this.elContent_),t.insertBefore(this.createClear_(),this.elContent_),goog.dom.classlist.add(t,goog.getCssName("goog-tabpane-top"));break;case goog.ui.TabPane.TabLocation.BOTTOM:t.appendChild(this.elButtonBar_),t.appendChild(this.createClear_()),goog.dom.classlist.add(t,goog.getCssName("goog-tabpane-bottom"));break;case goog.ui.TabPane.TabLocation.LEFT:t.insertBefore(this.elButtonBar_,this.elContent_),goog.dom.classlist.add(t,goog.getCssName("goog-tabpane-left"));break;case goog.ui.TabPane.TabLocation.RIGHT:t.insertBefore(this.elButtonBar_,this.elContent_),goog.dom.classlist.add(t,goog.getCssName("goog-tabpane-right"));break;default:throw new Error("Invalid tab location")}this.elButtonBar_.tabIndex=0,goog.events.listen(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this),goog.events.listen(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this),this.createPages_(e)},goog.ui.TabPane.prototype.createClear_=function(){var e=goog.html.SafeStyleSheet.createRule("."+goog.getCssName("goog-tabpane-clear"),{clear:"both",height:"0",overflow:"hidden"});return goog.style.installSafeStyleSheet(e),this.dom_.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-tabpane-clear"))},goog.ui.TabPane.prototype.disposeInternal=function(){goog.ui.TabPane.superClass_.disposeInternal.call(this),goog.events.unlisten(this.elButtonBar_,this.useMouseDown_?goog.events.EventType.MOUSEDOWN:goog.events.EventType.CLICK,this.onHeaderClick_,!1,this),goog.events.unlisten(this.elButtonBar_,goog.events.EventType.KEYDOWN,this.onHeaderKeyDown_,!1,this),delete this.el_,this.elButtonBar_=null,this.elContent_=null},goog.ui.TabPane.prototype.getChildNodes_=function(){for(var e=[],t=goog.dom.getFirstElementChild(this.el_);t;)e.push(t),t=goog.dom.getNextElementSibling(t);return e},goog.ui.TabPane.prototype.createPages_=function(e){for(var t,o=0;t=e[o];o++)this.addPage(new goog.ui.TabPane.TabPage(t))},goog.ui.TabPane.prototype.addPage=function(e,t){e.parent_&&e.parent_!=this&&e.parent_ instanceof goog.ui.TabPane&&e.parent_.removePage(e);var o=this.pages_.length;void 0!==t&&t!=o?(o=t,this.pages_.splice(o,0,e),this.elButtonBar_.insertBefore(e.elTitle_,this.elButtonBar_.childNodes[o])):(this.pages_.push(e),this.elButtonBar_.appendChild(e.elTitle_)),e.setParent_(this,o),this.selected_||(this.selected_=e,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_))),this.elContent_.appendChild(e.elContent_),e.setVisible_(e==this.selected_);for(var g,a=o+1;g=this.pages_[a];a++)g.index_=a},goog.ui.TabPane.prototype.removePage=function(e){"number"==typeof e&&(e=this.pages_[e]),this.pages_.splice(e.index_,1),e.setParent_(null),goog.dom.removeNode(e.elTitle_),goog.dom.removeNode(e.elContent_);for(var t,o=0;t=this.pages_[o];o++)t.setParent_(this,o)},goog.ui.TabPane.prototype.getPage=function(e){return this.pages_[e]},goog.ui.TabPane.prototype.setSelectedPage=function(e){!e.isEnabled()||this.selected_&&e==this.selected_||(this.selected_.setVisible_(!1),e.setVisible_(!0),this.selected_=e,this.dispatchEvent(new goog.ui.TabPaneEvent(goog.ui.TabPane.Events.CHANGE,this,this.selected_)))},goog.ui.TabPane.prototype.setSelectedIndex=function(e){e>=0&&e<this.pages_.length&&this.setSelectedPage(this.pages_[e])},goog.ui.TabPane.prototype.getSelectedIndex=function(){return this.selected_?this.selected_.index_:-1},goog.ui.TabPane.prototype.getSelectedPage=function(){return this.selected_||null},goog.ui.TabPane.prototype.getContentElement=function(){return this.elContent_||null},goog.ui.TabPane.prototype.getElement=function(){return this.el_||null},goog.ui.TabPane.prototype.onHeaderClick_=function(e){for(var t=e.target;t!=this.elButtonBar_;){if(t.tagName==goog.dom.TagName.LI){var o;for(o=0;t=t.previousSibling;o++);this.setSelectedIndex(o);break}t=t.parentNode}e.preventDefault()},goog.ui.TabPane.prototype.onHeaderKeyDown_=function(e){if(!(e.altKey||e.metaKey||e.ctrlKey))switch(e.keyCode){case goog.events.KeyCodes.LEFT:var t=this.selected_.getIndex()-1;this.setSelectedIndex(t<0?this.pages_.length-1:t);break;case goog.events.KeyCodes.RIGHT:t=this.selected_.getIndex()+1;this.setSelectedIndex(t>=this.pages_.length?0:t);break;case goog.events.KeyCodes.HOME:this.setSelectedIndex(0);break;case goog.events.KeyCodes.END:this.setSelectedIndex(this.pages_.length-1)}},goog.ui.TabPane.TabPage=function(e,t,o){var g,a=null;if(t)a=t,g=e;else if(e){var n=goog.dom.getFirstElementChild(e);n&&(a=goog.dom.getTextContent(n),n.parentNode.removeChild(n)),g=e}this.dom_=o||goog.dom.getDomHelper(),this.elContent_=g||this.dom_.createDom(goog.dom.TagName.DIV),this.elTitle_=this.dom_.createDom(goog.dom.TagName.LI,null,a),this.parent_=null,this.index_=null,this.enabled_=!0},goog.ui.TabPane.TabPage.prototype.getTitle=function(){return goog.dom.getTextContent(this.elTitle_)},goog.ui.TabPane.TabPage.prototype.setTitle=function(e){goog.dom.setTextContent(this.elTitle_,e)},goog.ui.TabPane.TabPage.prototype.getTitleElement=function(){return this.elTitle_},goog.ui.TabPane.TabPage.prototype.getContentElement=function(){return this.elContent_},goog.ui.TabPane.TabPage.prototype.getIndex=function(){return this.index_},goog.ui.TabPane.TabPage.prototype.getParent=function(){return this.parent_},goog.ui.TabPane.TabPage.prototype.select=function(){this.parent_&&this.parent_.setSelectedPage(this)},goog.ui.TabPane.TabPage.prototype.setEnabled=function(e){this.enabled_=e,this.elTitle_.className=e?goog.getCssName("goog-tabpane-tab"):goog.getCssName("goog-tabpane-tab-disabled")},goog.ui.TabPane.TabPage.prototype.isEnabled=function(){return this.enabled_},goog.ui.TabPane.TabPage.prototype.setVisible_=function(e){this.isEnabled()&&(this.elContent_.style.display=e?"":"none",this.elTitle_.className=e?goog.getCssName("goog-tabpane-tab-selected"):goog.getCssName("goog-tabpane-tab"))},goog.ui.TabPane.TabPage.prototype.setParent_=function(e,t){this.parent_=e,this.index_=void 0!==t?t:null},goog.ui.TabPaneEvent=function(e,t,o){goog.events.Event.call(this,e,t),this.page=o},goog.inherits(goog.ui.TabPaneEvent,goog.events.Event);