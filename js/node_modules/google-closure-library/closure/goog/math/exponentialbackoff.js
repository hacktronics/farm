goog.provide("goog.math.ExponentialBackoff"),goog.require("goog.asserts"),goog.math.ExponentialBackoff=function(a,t,o,r,e){goog.asserts.assert(a>0,"Initial value must be greater than zero."),goog.asserts.assert(t>=a,"Max value should be at least as large as initial value."),void 0!==o&&goog.asserts.assert(o>=0&&o<=1,"Randomness factor should be between 0 and 1."),void 0!==r&&goog.asserts.assert(r>1,"Backoff factor should be greater than 1"),void 0!==e&&goog.asserts.assert(e>=1,"Decay factor should be greater than 1"),this.initialValue_=a,this.maxValue_=t,this.currValue_=a,this.currBaseValue_=a,this.randomFactor_=o||0,this.backoffFactor_=r||2,this.decayFactor_=e||2},goog.math.ExponentialBackoff.prototype.currBackoffCount_=0,goog.math.ExponentialBackoff.prototype.currDecayCount_=0,goog.math.ExponentialBackoff.prototype.reset=function(){this.currValue_=this.initialValue_,this.currBaseValue_=this.initialValue_,this.currBackoffCount_=0,this.currDecayCount_=0},goog.math.ExponentialBackoff.prototype.getValue=function(){return this.currValue_},goog.math.ExponentialBackoff.prototype.getBackoffCount=function(){return this.currBackoffCount_},goog.math.ExponentialBackoff.prototype.getDecayCount=function(){return this.currDecayCount_},goog.math.ExponentialBackoff.prototype.backoff=function(){this.currBaseValue_=Math.min(this.maxValue_,this.currBaseValue_*this.backoffFactor_);var a=this.randomFactor_?Math.round(this.randomFactor_*(Math.random()-.5)*2*this.currBaseValue_):0;this.currValue_=Math.min(this.maxValue_,this.currBaseValue_+a),this.currBackoffCount_++},goog.math.ExponentialBackoff.prototype.decay=function(){this.currBaseValue_=Math.max(this.initialValue_,this.currBaseValue_/this.decayFactor_);var a=this.randomFactor_?Math.round(this.randomFactor_*(Math.random()-.5)*2*this.currBaseValue_):0;this.currValue_=Math.max(this.initialValue_,this.currBaseValue_+a),this.currDecayCount_++};