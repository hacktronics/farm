goog.provide("goog.math.RangeSet"),goog.require("goog.array"),goog.require("goog.iter.Iterator"),goog.require("goog.iter.StopIteration"),goog.require("goog.math.Range"),goog.math.RangeSet=function(){this.ranges_=[]},goog.DEBUG&&(goog.math.RangeSet.prototype.toString=function(){return"["+this.ranges_.join(", ")+"]"}),goog.math.RangeSet.equals=function(t,e){return t==e||!!(t&&e&&goog.array.equals(t.ranges_,e.ranges_,goog.math.Range.equals))},goog.math.RangeSet.prototype.clone=function(){for(var t=new goog.math.RangeSet,e=this.ranges_.length;e--;)t.ranges_[e]=this.ranges_[e].clone();return t},goog.math.RangeSet.prototype.add=function(t){if(!(t.end<=t.start)){t=t.clone();for(var e,n=0;e=this.ranges_[n];n++)if(t.start<=e.end){t.start=Math.min(t.start,e.start);break}for(var r=n;(e=this.ranges_[n])&&!(t.end<e.start);n++)t.end=Math.max(t.end,e.end);this.ranges_.splice(r,n-r,t)}},goog.math.RangeSet.prototype.remove=function(t){if(!(t.end<=t.start)){for(var e,n=0;(e=this.ranges_[n])&&!(t.start<e.end);n++);if(e&&!(t.end<e.start)){var r=n;for(t.start>e.start&&(r++,t.end<e.end&&goog.array.insertAt(this.ranges_,new goog.math.Range(t.end,e.end),r),e.end=t.start),n=r;(e=this.ranges_[n])&&(e.start=Math.max(t.end,e.start),!(t.end<e.end));n++);this.ranges_.splice(r,n-r)}}},goog.math.RangeSet.prototype.contains=function(t){if(t.end<=t.start)return!1;for(var e,n=0;e=this.ranges_[n];n++)if(t.start<e.end){if(t.end>=e.start)return goog.math.Range.contains(e,t);break}return!1},goog.math.RangeSet.prototype.containsValue=function(t){for(var e,n=0;e=this.ranges_[n];n++)if(t<e.end){if(t>=e.start)return!0;break}return!1},goog.math.RangeSet.prototype.union=function(t){t=t.clone();for(var e,n=0;e=this.ranges_[n];n++)t.add(e);return t},goog.math.RangeSet.prototype.difference=function(t){for(var e,n=this.clone(),r=0;e=t.ranges_[r];r++)n.remove(e);return n},goog.math.RangeSet.prototype.intersection=function(t){return this.isEmpty()||t.isEmpty()?new goog.math.RangeSet:this.difference(t.inverse(this.getBounds()))},goog.math.RangeSet.prototype.slice=function(t){var e=new goog.math.RangeSet;if(t.start>=t.end)return e;for(var n,r=0;n=this.ranges_[r];r++)if(!(n.end<=t.start)){if(n.start>t.end)break;e.add(new goog.math.Range(Math.max(t.start,n.start),Math.min(t.end,n.end)))}return e},goog.math.RangeSet.prototype.inverse=function(t){var e=new goog.math.RangeSet;e.add(t);for(var n,r=0;n=this.ranges_[r];r++)if(!(t.start>=n.end)){if(t.end<n.start)break;e.remove(n)}return e},goog.math.RangeSet.prototype.coveredLength=function(){return goog.array.reduce(this.ranges_,function(t,e){return t+e.end-e.start},0)},goog.math.RangeSet.prototype.getBounds=function(){return this.ranges_.length?new goog.math.Range(this.ranges_[0].start,goog.array.peek(this.ranges_).end):null},goog.math.RangeSet.prototype.isEmpty=function(){return 0==this.ranges_.length},goog.math.RangeSet.prototype.clear=function(){this.ranges_.length=0},goog.math.RangeSet.prototype.__iterator__=function(t){var e=0,n=this.ranges_,r=new goog.iter.Iterator;return r.next=function(){if(e>=n.length)throw goog.iter.StopIteration;return n[e++].clone()},r};