goog.provide("goog.math.Integer"),goog.require("goog.reflect"),goog.math.Integer=function(t,e){this.sign_=e;for(var r=[],g=!0,o=t.length-1;o>=0;o--){var n=0|t[o];g&&n==e||(r[o]=n,g=!1)}this.bits_=r},goog.math.Integer.IntCache_={},goog.math.Integer.fromInt=function(t){return-128<=t&&t<128?goog.reflect.cache(goog.math.Integer.IntCache_,t,function(t){return new goog.math.Integer([0|t],t<0?-1:0)}):new goog.math.Integer([0|t],t<0?-1:0)},goog.math.Integer.fromNumber=function(t){if(isNaN(t)||!isFinite(t))return goog.math.Integer.ZERO;if(t<0)return goog.math.Integer.fromNumber(-t).negate();for(var e=[],r=1,g=0;t>=r;g++)e[g]=t/r|0,r*=goog.math.Integer.TWO_PWR_32_DBL_;return new goog.math.Integer(e,0)},goog.math.Integer.fromBits=function(t){var e=t[t.length-1];return new goog.math.Integer(t,e&1<<31?-1:0)},goog.math.Integer.fromString=function(t,e){if(0==t.length)throw new Error("number format error: empty string");var r=e||10;if(r<2||36<r)throw new Error("radix out of range: "+r);if("-"==t.charAt(0))return goog.math.Integer.fromString(t.substring(1),r).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character');for(var g=goog.math.Integer.fromNumber(Math.pow(r,8)),o=goog.math.Integer.ZERO,n=0;n<t.length;n+=8){var i=Math.min(8,t.length-n),h=parseInt(t.substring(n,n+i),r);if(i<8){var s=goog.math.Integer.fromNumber(Math.pow(r,i));o=o.multiply(s).add(goog.math.Integer.fromNumber(h))}else o=(o=o.multiply(g)).add(goog.math.Integer.fromNumber(h))}return o},goog.math.Integer.TWO_PWR_32_DBL_=4294967296,goog.math.Integer.ZERO=goog.math.Integer.fromInt(0),goog.math.Integer.ONE=goog.math.Integer.fromInt(1),goog.math.Integer.TWO_PWR_24_=goog.math.Integer.fromInt(1<<24),goog.math.Integer.prototype.toInt=function(){return this.bits_.length>0?this.bits_[0]:this.sign_},goog.math.Integer.prototype.toNumber=function(){if(this.isNegative())return-this.negate().toNumber();for(var t=0,e=1,r=0;r<this.bits_.length;r++)t+=this.getBitsUnsigned(r)*e,e*=goog.math.Integer.TWO_PWR_32_DBL_;return t},goog.math.Integer.prototype.toString=function(t){var e=t||10;if(e<2||36<e)throw new Error("radix out of range: "+e);if(this.isZero())return"0";if(this.isNegative())return"-"+this.negate().toString(e);for(var r=goog.math.Integer.fromNumber(Math.pow(e,6)),g=this,o="";;){var n=g.divide(r),i=(g.subtract(n.multiply(r)).toInt()>>>0).toString(e);if((g=n).isZero())return i+o;for(;i.length<6;)i="0"+i;o=""+i+o}},goog.math.Integer.prototype.getBits=function(t){return t<0?0:t<this.bits_.length?this.bits_[t]:this.sign_},goog.math.Integer.prototype.getBitsUnsigned=function(t){var e=this.getBits(t);return e>=0?e:goog.math.Integer.TWO_PWR_32_DBL_+e},goog.math.Integer.prototype.getSign=function(){return this.sign_},goog.math.Integer.prototype.isZero=function(){if(0!=this.sign_)return!1;for(var t=0;t<this.bits_.length;t++)if(0!=this.bits_[t])return!1;return!0},goog.math.Integer.prototype.isNegative=function(){return-1==this.sign_},goog.math.Integer.prototype.isOdd=function(){return 0==this.bits_.length&&-1==this.sign_||this.bits_.length>0&&!!(1&this.bits_[0])},goog.math.Integer.prototype.equals=function(t){if(this.sign_!=t.sign_)return!1;for(var e=Math.max(this.bits_.length,t.bits_.length),r=0;r<e;r++)if(this.getBits(r)!=t.getBits(r))return!1;return!0},goog.math.Integer.prototype.notEquals=function(t){return!this.equals(t)},goog.math.Integer.prototype.greaterThan=function(t){return this.compare(t)>0},goog.math.Integer.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},goog.math.Integer.prototype.lessThan=function(t){return this.compare(t)<0},goog.math.Integer.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},goog.math.Integer.prototype.compare=function(t){var e=this.subtract(t);return e.isNegative()?-1:e.isZero()?0:1},goog.math.Integer.prototype.shorten=function(t){for(var e=t-1>>5,r=(t-1)%32,g=[],o=0;o<e;o++)g[o]=this.getBits(o);var n=31==r?4294967295:(1<<r+1)-1,i=this.getBits(e)&n;return i&1<<r?(i|=4294967295-n,g[e]=i,new goog.math.Integer(g,-1)):(g[e]=i,new goog.math.Integer(g,0))},goog.math.Integer.prototype.negate=function(){return this.not().add(goog.math.Integer.ONE)},goog.math.Integer.prototype.abs=function(){return this.isNegative()?this.negate():this},goog.math.Integer.prototype.add=function(t){for(var e=Math.max(this.bits_.length,t.bits_.length),r=[],g=0,o=0;o<=e;o++){var n=this.getBits(o)>>>16,i=65535&this.getBits(o),h=t.getBits(o)>>>16,s=g+i+(65535&t.getBits(o)),a=(s>>>16)+n+h;g=a>>>16,s&=65535,a&=65535,r[o]=a<<16|s}return goog.math.Integer.fromBits(r)},goog.math.Integer.prototype.subtract=function(t){return this.add(t.negate())},goog.math.Integer.prototype.multiply=function(t){if(this.isZero())return goog.math.Integer.ZERO;if(t.isZero())return goog.math.Integer.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(goog.math.Integer.TWO_PWR_24_)&&t.lessThan(goog.math.Integer.TWO_PWR_24_))return goog.math.Integer.fromNumber(this.toNumber()*t.toNumber());for(var e=this.bits_.length+t.bits_.length,r=[],g=0;g<2*e;g++)r[g]=0;for(g=0;g<this.bits_.length;g++)for(var o=0;o<t.bits_.length;o++){var n=this.getBits(g)>>>16,i=65535&this.getBits(g),h=t.getBits(o)>>>16,s=65535&t.getBits(o);r[2*g+2*o]+=i*s,goog.math.Integer.carry16_(r,2*g+2*o),r[2*g+2*o+1]+=n*s,goog.math.Integer.carry16_(r,2*g+2*o+1),r[2*g+2*o+1]+=i*h,goog.math.Integer.carry16_(r,2*g+2*o+1),r[2*g+2*o+2]+=n*h,goog.math.Integer.carry16_(r,2*g+2*o+2)}for(g=0;g<e;g++)r[g]=r[2*g+1]<<16|r[2*g];for(g=e;g<2*e;g++)r[g]=0;return new goog.math.Integer(r,0)},goog.math.Integer.carry16_=function(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++},goog.math.Integer.prototype.slowDivide_=function(t){if(this.isNegative()||t.isNegative())throw new Error("slowDivide_ only works with positive integers.");for(var e=goog.math.Integer.ONE,r=t;r.lessThanOrEqual(this);)e=e.shiftLeft(1),r=r.shiftLeft(1);var g,o=e.shiftRight(1),n=r.shiftRight(1);for(r=r.shiftRight(2),e=e.shiftRight(2);!r.isZero();)(g=n.add(r)).lessThanOrEqual(this)&&(o=o.add(e),n=g),r=r.shiftRight(1),e=e.shiftRight(1);var i=this.subtract(o.multiply(t));return new goog.math.Integer.DivisionResult(o,i)},goog.math.Integer.prototype.divide=function(t){return this.divideAndRemainder(t).quotient},goog.math.Integer.DivisionResult=function(t,e){this.quotient=t,this.remainder=e},goog.math.Integer.prototype.divideAndRemainder=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return new goog.math.Integer.DivisionResult(goog.math.Integer.ZERO,goog.math.Integer.ZERO);if(this.isNegative()){var e=this.negate().divideAndRemainder(t);return new goog.math.Integer.DivisionResult(e.quotient.negate(),e.remainder.negate())}if(t.isNegative()){e=this.divideAndRemainder(t.negate());return new goog.math.Integer.DivisionResult(e.quotient.negate(),e.remainder)}if(this.bits_.length>30)return this.slowDivide_(t);for(var r=goog.math.Integer.ZERO,g=this;g.greaterThanOrEqual(t);){for(var o=Math.max(1,Math.floor(g.toNumber()/t.toNumber())),n=Math.ceil(Math.log(o)/Math.LN2),i=n<=48?1:Math.pow(2,n-48),h=goog.math.Integer.fromNumber(o),s=h.multiply(t);s.isNegative()||s.greaterThan(g);)o-=i,s=(h=goog.math.Integer.fromNumber(o)).multiply(t);h.isZero()&&(h=goog.math.Integer.ONE),r=r.add(h),g=g.subtract(s)}return new goog.math.Integer.DivisionResult(r,g)},goog.math.Integer.prototype.modulo=function(t){return this.divideAndRemainder(t).remainder},goog.math.Integer.prototype.not=function(){for(var t=this.bits_.length,e=[],r=0;r<t;r++)e[r]=~this.bits_[r];return new goog.math.Integer(e,~this.sign_)},goog.math.Integer.prototype.and=function(t){for(var e=Math.max(this.bits_.length,t.bits_.length),r=[],g=0;g<e;g++)r[g]=this.getBits(g)&t.getBits(g);return new goog.math.Integer(r,this.sign_&t.sign_)},goog.math.Integer.prototype.or=function(t){for(var e=Math.max(this.bits_.length,t.bits_.length),r=[],g=0;g<e;g++)r[g]=this.getBits(g)|t.getBits(g);return new goog.math.Integer(r,this.sign_|t.sign_)},goog.math.Integer.prototype.xor=function(t){for(var e=Math.max(this.bits_.length,t.bits_.length),r=[],g=0;g<e;g++)r[g]=this.getBits(g)^t.getBits(g);return new goog.math.Integer(r,this.sign_^t.sign_)},goog.math.Integer.prototype.shiftLeft=function(t){for(var e=t>>5,r=t%32,g=this.bits_.length+e+(r>0?1:0),o=[],n=0;n<g;n++)o[n]=r>0?this.getBits(n-e)<<r|this.getBits(n-e-1)>>>32-r:this.getBits(n-e);return new goog.math.Integer(o,this.sign_)},goog.math.Integer.prototype.shiftRight=function(t){for(var e=t>>5,r=t%32,g=this.bits_.length-e,o=[],n=0;n<g;n++)o[n]=r>0?this.getBits(n+e)>>>r|this.getBits(n+e+1)<<32-r:this.getBits(n+e);return new goog.math.Integer(o,this.sign_)};