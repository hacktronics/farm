goog.provide("goog.db.Index"),goog.require("goog.async.Deferred"),goog.require("goog.db.Cursor"),goog.require("goog.db.Error"),goog.require("goog.db.KeyRange"),goog.require("goog.debug"),goog.db.Index=function(e){this.index_=e},goog.db.Index.prototype.getName=function(){return this.index_.name},goog.db.Index.prototype.getKeyPath=function(){return this.index_.keyPath},goog.db.Index.prototype.isUnique=function(){return this.index_.unique},goog.db.Index.prototype.get_=function(e,o,g){var r,t=new goog.async.Deferred;try{r=this.index_[e](g)}catch(e){return o+=" with key "+goog.debug.deepExpose(g),t.errback(goog.db.Error.fromException(e,o)),t}return r.onsuccess=function(e){t.callback(e.target.result)},r.onerror=function(e){o+=" with key "+goog.debug.deepExpose(g),t.errback(goog.db.Error.fromRequest(e.target,o))},t},goog.db.Index.prototype.get=function(e){return this.get_("get","getting from index "+this.getName(),e)},goog.db.Index.prototype.getKey=function(e){return this.get_("getKey","getting key from index "+this.getName(),e)},goog.db.Index.prototype.getAll=function(e,o){return this.getAll_("getAll","getting all from index "+this.getName(),e,o)},goog.db.Index.prototype.getAllKeys=function(e,o){return this.getAll_("getAllKeys","getting all keys index "+this.getName(),e,o)},goog.db.Index.prototype.getAll_=function(e,o,g,r){var t;t=void 0===g?void 0:g instanceof goog.db.KeyRange?g.range():goog.db.KeyRange.only(g).range();var n,i=new goog.async.Deferred;try{n=this.index_[e](t,r)}catch(e){return o+=" for range "+(t?goog.debug.deepExpose(t):"<all>"),i.errback(goog.db.Error.fromException(e,o)),i}return n.onsuccess=function(){i.callback(n.result)},n.onerror=function(e){o+=" for range "+(t?goog.debug.deepExpose(t):"<all>"),i.errback(goog.db.Error.fromRequest(e.target,o))},i},goog.db.Index.prototype.openCursor=function(e,o){return goog.db.Cursor.openCursor(this.index_,e,o)};