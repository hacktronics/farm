goog.provide("goog.db.IndexedDb"),goog.require("goog.db.Error"),goog.require("goog.db.ObjectStore"),goog.require("goog.db.Transaction"),goog.require("goog.events.Event"),goog.require("goog.events.EventHandler"),goog.require("goog.events.EventTarget"),goog.db.IndexedDb=function(e){goog.db.IndexedDb.base(this,"constructor"),this.db_=e,this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(this.db_,goog.db.IndexedDb.EventType.ABORT,goog.bind(this.dispatchEvent,this,goog.db.IndexedDb.EventType.ABORT)),this.eventHandler_.listen(this.db_,goog.db.IndexedDb.EventType.ERROR,this.dispatchError_),this.eventHandler_.listen(this.db_,goog.db.IndexedDb.EventType.VERSION_CHANGE,this.dispatchVersionChange_),this.eventHandler_.listen(this.db_,goog.db.IndexedDb.EventType.CLOSE,goog.bind(this.dispatchEvent,this,goog.db.IndexedDb.EventType.CLOSE))},goog.inherits(goog.db.IndexedDb,goog.events.EventTarget),goog.db.IndexedDb.prototype.open_=!0,goog.db.IndexedDb.prototype.dispatchError_=function(e){const o=e.target,t=o&&o.error,n=t&&t.severity;this.dispatchEvent({type:goog.db.IndexedDb.EventType.ERROR,errorCode:n})},goog.db.IndexedDb.prototype.dispatchVersionChange_=function(e){this.dispatchEvent(new goog.db.IndexedDb.VersionChangeEvent(e.oldVersion,e.newVersion))},goog.db.IndexedDb.prototype.close=function(){this.open_&&(this.db_.close(),this.open_=!1)},goog.db.IndexedDb.prototype.isOpen=function(){return this.open_},goog.db.IndexedDb.prototype.getName=function(){return this.db_.name},goog.db.IndexedDb.prototype.getVersion=function(){return Number(this.db_.version)},goog.db.IndexedDb.prototype.getObjectStoreNames=function(){return this.db_.objectStoreNames},goog.db.IndexedDb.prototype.createObjectStore=function(e,o){try{return new goog.db.ObjectStore(this.db_.createObjectStore(e,o))}catch(o){throw goog.db.Error.fromException(o,"creating object store "+e)}},goog.db.IndexedDb.prototype.deleteObjectStore=function(e){try{this.db_.deleteObjectStore(e)}catch(o){throw goog.db.Error.fromException(o,"deleting object store "+e)}},goog.db.IndexedDb.prototype.createTransaction=function(e,o){try{var t=o?this.db_.transaction(e,o):this.db_.transaction(e);return new goog.db.Transaction(t,this)}catch(e){throw goog.db.Error.fromException(e,"creating transaction")}},goog.db.IndexedDb.prototype.disposeInternal=function(){goog.db.IndexedDb.base(this,"disposeInternal"),this.eventHandler_.dispose()},goog.db.IndexedDb.EventType={ABORT:"abort",CLOSE:"close",ERROR:"error",VERSION_CHANGE:"versionchange"},goog.db.IndexedDb.VersionChangeEvent=function(e,o){goog.db.IndexedDb.VersionChangeEvent.base(this,"constructor",goog.db.IndexedDb.EventType.VERSION_CHANGE),this.oldVersion=e,this.newVersion=o},goog.inherits(goog.db.IndexedDb.VersionChangeEvent,goog.events.Event);