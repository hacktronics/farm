goog.provide("goog.string.linkify"),goog.require("goog.html.SafeHtml"),goog.require("goog.string"),goog.string.linkify.linkifyPlainTextAsHtml=function(i,g,n){if(-1==i.indexOf("@")&&-1==i.indexOf("://")&&-1==i.indexOf("www.")&&-1==i.indexOf("Www.")&&-1==i.indexOf("WWW."))return n?goog.html.SafeHtml.htmlEscapePreservingNewlines(i):goog.html.SafeHtml.htmlEscape(i);var o={};for(var t in g)g[t]?o[t]=g[t]:o[t]=null;"rel"in o||(o.rel="nofollow"),"target"in o||(o.target="_blank");var r=[];return i.replace(goog.string.linkify.FIND_LINKS_RE_,function(i,g,t,_,l){if(r.push(n?goog.html.SafeHtml.htmlEscapePreservingNewlines(g):g),!t)return"";var e,f,s="";if(_)s="mailto:",e=_,f="";else{l||(s="http://");var R=t.match(goog.string.linkify.ENDS_WITH_PUNCTUATION_RE_);R&&!goog.string.contains(t,"(")?(e=R[1],f=R[2]):(e=t,f="")}return o.href=s+e,r.push(goog.html.SafeHtml.create("a",o,e)),r.push(n?goog.html.SafeHtml.htmlEscapePreservingNewlines(f):f),""}),goog.html.SafeHtml.concat(r)},goog.string.linkify.findFirstUrl=function(i){var g=i.match(goog.string.linkify.URL_RE_);return null!=g?g[0]:""},goog.string.linkify.findFirstEmail=function(i){var g=i.match(goog.string.linkify.EMAIL_RE_);return null!=g?g[0]:""},goog.string.linkify.ENDING_PUNCTUATION_CHARS_="':;,\\.?}\\]\\)!",goog.string.linkify.ENDS_WITH_PUNCTUATION_RE_=new RegExp("^(.*?)(["+goog.string.linkify.ENDING_PUNCTUATION_CHARS_+"]+)$"),goog.string.linkify.ACCEPTABLE_URL_CHARS_="\\w#-;!=?@\\[\\\\\\]_`{|}~",goog.string.linkify.RECOGNIZED_PROTOCOLS_=["https?","ftp"],goog.string.linkify.PROTOCOL_START_="("+goog.string.linkify.RECOGNIZED_PROTOCOLS_.join("|")+")://",goog.string.linkify.WWW_START_="www\\.",goog.string.linkify.URL_RE_STRING_="(?:"+goog.string.linkify.PROTOCOL_START_+"|"+goog.string.linkify.WWW_START_+")["+goog.string.linkify.ACCEPTABLE_URL_CHARS_+"]+",goog.string.linkify.URL_RE_=new RegExp(goog.string.linkify.URL_RE_STRING_,"i"),goog.string.linkify.TOP_LEVEL_DOMAIN_="(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b",goog.string.linkify.EMAIL_RE_STRING_="(?:mailto:)?([\\w.!#$%&'*+-/=?^_`{|}~]+@[A-Za-z0-9.-]+\\."+goog.string.linkify.TOP_LEVEL_DOMAIN_+")",goog.string.linkify.EMAIL_RE_=new RegExp(goog.string.linkify.EMAIL_RE_STRING_,"i"),goog.string.linkify.FIND_LINKS_RE_=new RegExp("([\\S\\s]*?)(\\b"+goog.string.linkify.EMAIL_RE_STRING_+"|\\b"+goog.string.linkify.URL_RE_STRING_+"|$)","gi");