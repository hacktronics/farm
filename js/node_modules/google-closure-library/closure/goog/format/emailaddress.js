goog.provide("goog.format.EmailAddress"),goog.require("goog.string"),goog.format.EmailAddress=function(o,r){this.name_=r||"",this.address=o||""},goog.format.EmailAddress.OPENERS_='"<([',goog.format.EmailAddress.CLOSERS_='">)]',goog.format.EmailAddress.SPECIAL_CHARS='()<>@:\\".[]',goog.format.EmailAddress.ADDRESS_SEPARATORS_=",;",goog.format.EmailAddress.CHARS_REQUIRE_QUOTES_=goog.format.EmailAddress.SPECIAL_CHARS+goog.format.EmailAddress.ADDRESS_SEPARATORS_,goog.format.EmailAddress.ALL_DOUBLE_QUOTES_=/\"/g,goog.format.EmailAddress.ESCAPED_DOUBLE_QUOTES_=/\\\"/g,goog.format.EmailAddress.ALL_BACKSLASHES_=/\\/g,goog.format.EmailAddress.ESCAPED_BACKSLASHES_=/\\\\/g,goog.format.EmailAddress.LOCAL_PART_REGEXP_STR_="[+a-zA-Z0-9_.!#$%&'*\\/=?^`{|}~-]+",goog.format.EmailAddress.DOMAIN_PART_REGEXP_STR_="([a-zA-Z0-9-]+\\.)+[a-zA-Z0-9]{2,63}",goog.format.EmailAddress.LOCAL_PART_=new RegExp("^"+goog.format.EmailAddress.LOCAL_PART_REGEXP_STR_+"$"),goog.format.EmailAddress.DOMAIN_PART_=new RegExp("^"+goog.format.EmailAddress.DOMAIN_PART_REGEXP_STR_+"$"),goog.format.EmailAddress.EMAIL_ADDRESS_=new RegExp("^"+goog.format.EmailAddress.LOCAL_PART_REGEXP_STR_+"@"+goog.format.EmailAddress.DOMAIN_PART_REGEXP_STR_+"$"),goog.format.EmailAddress.prototype.getName=function(){return this.name_},goog.format.EmailAddress.prototype.getAddress=function(){return this.address},goog.format.EmailAddress.prototype.setName=function(o){this.name_=o},goog.format.EmailAddress.prototype.setAddress=function(o){this.address=o},goog.format.EmailAddress.prototype.toString=function(){return this.toStringInternal(goog.format.EmailAddress.CHARS_REQUIRE_QUOTES_)},goog.format.EmailAddress.isQuoteNeeded_=function(o,r){for(var s=0;s<r.length;s++){var a=r[s];if(goog.string.contains(o,a))return!0}return!1},goog.format.EmailAddress.prototype.toStringInternal=function(o){var r=this.getName();return r=r.replace(goog.format.EmailAddress.ALL_DOUBLE_QUOTES_,""),goog.format.EmailAddress.isQuoteNeeded_(r,o)&&(r='"'+r.replace(goog.format.EmailAddress.ALL_BACKSLASHES_,"\\\\")+'"'),""==r?this.address:""==this.address?r:r+" <"+this.address+">"},goog.format.EmailAddress.prototype.isValid=function(){return goog.format.EmailAddress.isValidAddrSpec(this.address)},goog.format.EmailAddress.isValidAddress=function(o){return goog.format.EmailAddress.parse(o).isValid()},goog.format.EmailAddress.isValidAddrSpec=function(o){return goog.format.EmailAddress.EMAIL_ADDRESS_.test(o)},goog.format.EmailAddress.isValidLocalPartSpec=function(o){return goog.format.EmailAddress.LOCAL_PART_.test(o)},goog.format.EmailAddress.isValidDomainPartSpec=function(o){return goog.format.EmailAddress.DOMAIN_PART_.test(o)},goog.format.EmailAddress.parseInternal=function(o,r){for(var s="",a="",e=0;e<o.length;){var t=goog.format.EmailAddress.getToken_(o,e);if("<"==t.charAt(0)&&-1!=t.indexOf(">")){var g=t.indexOf(">");a=t.substring(1,g)}else""==a&&(s+=t);e+=t.length}return""==a&&-1!=s.indexOf("@")&&(a=s,s=""),s=goog.string.collapseWhitespace(s),s=goog.string.stripQuotes(s,"'"),s=(s=(s=goog.string.stripQuotes(s,'"')).replace(goog.format.EmailAddress.ESCAPED_DOUBLE_QUOTES_,'"')).replace(goog.format.EmailAddress.ESCAPED_BACKSLASHES_,"\\"),new r(a=goog.string.collapseWhitespace(a),s)},goog.format.EmailAddress.parse=function(o){return goog.format.EmailAddress.parseInternal(o,goog.format.EmailAddress)},goog.format.EmailAddress.parseListInternal=function(o,r,s){var a,e=[],t="";o=goog.string.collapseWhitespace(o);for(var g=0;g<o.length;)s(a=goog.format.EmailAddress.getToken_(o,g))||" "==a&&r(t).isValid()?(goog.string.isEmptyOrWhitespace(t)||e.push(r(t)),t="",g++):(t+=a,g+=a.length);return goog.string.isEmptyOrWhitespace(t)||e.push(r(t)),e},goog.format.EmailAddress.parseList=function(o){return goog.format.EmailAddress.parseListInternal(o,goog.format.EmailAddress.parse,goog.format.EmailAddress.isAddressSeparator)},goog.format.EmailAddress.getToken_=function(o,r){var s=o.charAt(r),a=goog.format.EmailAddress.OPENERS_.indexOf(s);if(-1==a)return s;if(goog.format.EmailAddress.isEscapedDlQuote_(o,r))return s;for(var e=goog.format.EmailAddress.CLOSERS_.charAt(a),t=o.indexOf(e,r+1);t>=0&&goog.format.EmailAddress.isEscapedDlQuote_(o,t);)t=o.indexOf(e,t+1);return t>=0?o.substring(r,t+1):s},goog.format.EmailAddress.isEscapedDlQuote_=function(o,r){if('"'!=o.charAt(r))return!1;for(var s=0,a=r-1;a>=0&&"\\"==o.charAt(a);a--)s++;return s%2!=0},goog.format.EmailAddress.isAddressSeparator=function(o){return goog.string.contains(goog.format.EmailAddress.ADDRESS_SEPARATORS_,o)};