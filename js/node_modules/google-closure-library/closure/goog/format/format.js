goog.provide("goog.format"),goog.require("goog.i18n.GraphemeBreak"),goog.require("goog.string"),goog.require("goog.userAgent"),goog.format.fileSize=function(o,r){return goog.format.numBytesToString(o,r,!1)},goog.format.isConvertableScaledNumber=function(o){return goog.format.SCALED_NUMERIC_RE_.test(o)},goog.format.stringToNumericValue=function(o){return goog.string.endsWith(o,"B")?goog.format.stringToNumericValue_(o,goog.format.NUMERIC_SCALES_BINARY_):goog.format.stringToNumericValue_(o,goog.format.NUMERIC_SCALES_SI_)},goog.format.stringToNumBytes=function(o){return goog.format.stringToNumericValue_(o,goog.format.NUMERIC_SCALES_BINARY_)},goog.format.numericValueToString=function(o,r){return goog.format.numericValueToString_(o,goog.format.NUMERIC_SCALES_SI_,r)},goog.format.numBytesToString=function(o,r,g,t){var e="";return(void 0===g||g)&&(e="B"),goog.format.numericValueToString_(o,goog.format.NUMERIC_SCALES_BINARY_,r,e,t)},goog.format.stringToNumericValue_=function(o,r){var g=o.match(goog.format.SCALED_NUMERIC_RE_);return g?Number(g[1])*r[g[2]]:NaN},goog.format.numericValueToString_=function(o,r,g,t,e){var a=goog.format.NUMERIC_SCALE_PREFIXES_,n=o,i="",_="",m=1;o<0&&(o=-o);for(var f=0;f<a.length;f++){var u=a[f];if(o>=(m=r[u])||m<=1&&o>.1*m){i=u;break}}i?(t&&(i+=t),e&&(_=" ")):m=1;var E=Math.pow(10,void 0!==g?g:2);return Math.round(n/m*E)/E+_+i},goog.format.SCALED_NUMERIC_RE_=/^([-]?\d+\.?\d*)([K,M,G,T,P,E,Z,Y,k,m,u,n]?)[B]?$/,goog.format.NUMERIC_SCALE_PREFIXES_=["Y","Z","E","P","T","G","M","K","","m","u","n"],goog.format.NUMERIC_SCALES_SI_={"":1,n:1e-9,u:1e-6,m:.001,k:1e3,K:1e3,M:1e6,G:1e9,T:1e12,P:1e15,E:1e18,Z:1e21,Y:1e24},goog.format.NUMERIC_SCALES_BINARY_={"":1,n:Math.pow(1024,-3),u:Math.pow(1024,-2),m:1/1024,k:1024,K:1024,M:Math.pow(1024,2),G:Math.pow(1024,3),T:Math.pow(1024,4),P:Math.pow(1024,5),E:Math.pow(1024,6),Z:Math.pow(1024,7),Y:Math.pow(1024,8)},goog.format.FIRST_GRAPHEME_EXTEND_=768,goog.format.isTreatedAsBreakingSpace_=function(o){return o<=goog.format.WbrToken_.SPACE||o>=4096&&(o>=8192&&o<=8198||o>=8200&&o<=8203||5760==o||6158==o||8232==o||8233==o||8287==o||12288==o)},goog.format.isInvisibleFormattingCharacter_=function(o){return o>=8204&&o<=8207||o>=8234&&o<=8238},goog.format.insertWordBreaksGeneric_=function(o,r,g){var t=g||10;if(t>o.length)return o;for(var e=[],a=0,n=0,i=0,_=0,m=0;m<o.length;m++){var f=_,u=(_=o.charCodeAt(m))>=goog.format.FIRST_GRAPHEME_EXTEND_&&!r(f,_,!0);a>=t&&!goog.format.isTreatedAsBreakingSpace_(_)&&!u&&(e.push(o.substring(i,m),goog.format.WORD_BREAK_HTML),i=m,a=0),n?_==goog.format.WbrToken_.GT&&n==goog.format.WbrToken_.LT?n=0:_==goog.format.WbrToken_.SEMI_COLON&&n==goog.format.WbrToken_.AMP&&(n=0,a++):_==goog.format.WbrToken_.LT||_==goog.format.WbrToken_.AMP?n=_:goog.format.isTreatedAsBreakingSpace_(_)?a=0:goog.format.isInvisibleFormattingCharacter_(_)||a++}return e.push(o.substr(i)),e.join("")},goog.format.insertWordBreaks=function(o,r){return goog.format.insertWordBreaksGeneric_(o,goog.i18n.GraphemeBreak.hasGraphemeBreak,r)},goog.format.conservativelyHasGraphemeBreak_=function(o,r,g){return r>=1024&&r<1315},goog.format.insertWordBreaksBasic=function(o,r){return goog.format.insertWordBreaksGeneric_(o,goog.format.conservativelyHasGraphemeBreak_,r)},goog.format.IS_IE8_OR_ABOVE_=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(8),goog.format.WORD_BREAK_HTML=goog.userAgent.WEBKIT?"<wbr></wbr>":goog.userAgent.OPERA?"&shy;":goog.format.IS_IE8_OR_ABOVE_?"&#8203;":"<wbr>",goog.format.WbrToken_={LT:60,GT:62,AMP:38,SEMI_COLON:59,SPACE:32};