goog.provide("goog.net.IframeLoadMonitor"),goog.require("goog.dom"),goog.require("goog.events"),goog.require("goog.events.EventTarget"),goog.require("goog.events.EventType"),goog.require("goog.userAgent"),goog.net.IframeLoadMonitor=function(o,e){if(goog.net.IframeLoadMonitor.base(this,"constructor"),this.iframe_=o,this.hasContent_=!!e,this.isLoaded_=this.isLoadedHelper_(),!this.isLoaded_){var t=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")?goog.events.EventType.READYSTATECHANGE:goog.events.EventType.LOAD;this.onloadListenerKey_=goog.events.listen(this.iframe_,t,this.handleLoad_,!1,this),this.intervalId_=window.setInterval(goog.bind(this.handleLoad_,this),goog.net.IframeLoadMonitor.POLL_INTERVAL_MS_)}},goog.inherits(goog.net.IframeLoadMonitor,goog.events.EventTarget),goog.net.IframeLoadMonitor.LOAD_EVENT="ifload",goog.net.IframeLoadMonitor.POLL_INTERVAL_MS_=100,goog.net.IframeLoadMonitor.prototype.onloadListenerKey_=null,goog.net.IframeLoadMonitor.prototype.isLoaded=function(){return this.isLoaded_},goog.net.IframeLoadMonitor.prototype.maybeStopTimer_=function(){this.intervalId_&&(window.clearInterval(this.intervalId_),this.intervalId_=null)},goog.net.IframeLoadMonitor.prototype.getIframe=function(){return this.iframe_},goog.net.IframeLoadMonitor.prototype.disposeInternal=function(){delete this.iframe_,this.maybeStopTimer_(),goog.events.unlistenByKey(this.onloadListenerKey_),goog.net.IframeLoadMonitor.superClass_.disposeInternal.call(this)},goog.net.IframeLoadMonitor.prototype.isLoadedHelper_=function(){var o=!1;try{if(this.hasContent_||!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("11")){var e=goog.dom.getFrameContentDocument(this.iframe_).body;o=this.hasContent_?!!e&&!!e.firstChild:!!e}else o="complete"==this.iframe_.readyState}catch(o){}return o},goog.net.IframeLoadMonitor.prototype.handleLoad_=function(){this.isLoadedHelper_()&&(this.maybeStopTimer_(),goog.events.unlistenByKey(this.onloadListenerKey_),this.onloadListenerKey_=null,this.isLoaded_=!0,this.dispatchEvent(goog.net.IframeLoadMonitor.LOAD_EVENT))};