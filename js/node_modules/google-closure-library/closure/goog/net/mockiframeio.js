goog.provide("goog.net.MockIFrameIo"),goog.forwardDeclare("goog.testing.TestQueue"),goog.require("goog.events.EventTarget"),goog.require("goog.net.ErrorCode"),goog.require("goog.net.EventType"),goog.require("goog.net.IframeIo"),goog.net.MockIFrameIo=function(o){goog.events.EventTarget.call(this),this.testQueue_=o},goog.inherits(goog.net.MockIFrameIo,goog.events.EventTarget),goog.net.MockIFrameIo.prototype.active_=!1,goog.net.MockIFrameIo.prototype.lastContent_="",goog.net.MockIFrameIo.prototype.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,goog.net.MockIFrameIo.prototype.lastError_="",goog.net.MockIFrameIo.prototype.lastCustomError_=null,goog.net.MockIFrameIo.prototype.lastUri_=null,goog.net.MockIFrameIo.prototype.errorChecker_,goog.net.MockIFrameIo.prototype.success_,goog.net.MockIFrameIo.prototype.complete_,goog.net.MockIFrameIo.prototype.send=function(o,e,t,r){if(this.active_)throw new Error("[goog.net.IframeIo] Unable to send, already active.");this.testQueue_.enqueue(["s",o,e,t,r]),this.complete_=!1,this.active_=!0},goog.net.MockIFrameIo.prototype.sendFromForm=function(o,e,t){if(this.active_)throw new Error("[goog.net.IframeIo] Unable to send, already active.");this.testQueue_.enqueue(["s",o,e,t]),this.complete_=!1,this.active_=!0},goog.net.MockIFrameIo.prototype.abort=function(o){this.active_&&(this.testQueue_.enqueue(["a",o]),this.complete_=!1,this.active_=!1,this.success_=!1,this.lastErrorCode_=o||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.ABORT),this.simulateReady())},goog.net.MockIFrameIo.prototype.simulateIncrementalData=function(o){this.dispatchEvent(new goog.net.IframeIo.IncrementalDataEvent(o))},goog.net.MockIFrameIo.prototype.simulateDone=function(o){o?(this.success_=!1,this.lastErrorCode_=goog.net.ErrorCode.HTTP_ERROR,this.lastError_=this.getLastError(),this.dispatchEvent(goog.net.EventType.ERROR)):(this.success_=!0,this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,this.dispatchEvent(goog.net.EventType.SUCCESS)),this.complete_=!0,this.dispatchEvent(goog.net.EventType.COMPLETE)},goog.net.MockIFrameIo.prototype.simulateReady=function(){this.dispatchEvent(goog.net.EventType.READY)},goog.net.MockIFrameIo.prototype.isComplete=function(){return this.complete_},goog.net.MockIFrameIo.prototype.isSuccess=function(){return this.success_},goog.net.MockIFrameIo.prototype.isActive=function(){return this.active_},goog.net.MockIFrameIo.prototype.getResponseText=function(){return this.lastContent_},goog.net.MockIFrameIo.prototype.getResponseJson=function(){return JSON.parse(this.lastContent_)},goog.net.MockIFrameIo.prototype.getLastUri=function(){return this.lastUri_},goog.net.MockIFrameIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_},goog.net.MockIFrameIo.prototype.getLastError=function(){return goog.net.ErrorCode.getDebugMessage(this.lastErrorCode_)},goog.net.MockIFrameIo.prototype.getLastCustomError=function(){return this.lastCustomError_},goog.net.MockIFrameIo.prototype.setErrorChecker=function(o){this.errorChecker_=o},goog.net.MockIFrameIo.prototype.getErrorChecker=function(){return this.errorChecker_};