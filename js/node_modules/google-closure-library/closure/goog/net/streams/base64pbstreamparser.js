goog.module("goog.net.streams.Base64PbStreamParser");var Base64StreamDecoder=goog.require("goog.net.streams.Base64StreamDecoder"),PbStreamParser=goog.require("goog.net.streams.PbStreamParser"),StreamParser=goog.require("goog.net.streams.StreamParser"),asserts=goog.require("goog.asserts"),Base64PbStreamParser=function(){this.errorMessage_=null,this.streamPos_=0,this.base64Decoder_=new Base64StreamDecoder,this.pbParser_=new PbStreamParser};Base64PbStreamParser.prototype.isInputValid=function(){return null===this.errorMessage_},Base64PbStreamParser.prototype.getErrorMessage=function(){return this.errorMessage_},Base64PbStreamParser.prototype.error_=function(r,e){throw this.errorMessage_="The stream is broken @"+this.streamPos_+". Error: "+e+". With input:\n"+r,new Error(this.errorMessage_)},Base64PbStreamParser.prototype.parse=function(r){asserts.assertString(r),null!==this.errorMessage_&&this.error_(r,"stream already broken");var e=null;try{var s=this.base64Decoder_.decode(r);e=null===s?null:this.pbParser_.parse(s)}catch(e){this.error_(r,e.message)}return this.streamPos_+=r.length,e},exports=Base64PbStreamParser;