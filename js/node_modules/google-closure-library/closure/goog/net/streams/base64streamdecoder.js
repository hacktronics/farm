goog.provide("goog.net.streams.Base64StreamDecoder"),goog.require("goog.asserts"),goog.require("goog.crypt.base64"),goog.scope(function(){goog.net.streams.Base64StreamDecoder=function(){this.isInputValid_=!0,this.streamPos_=0,this.leftoverInput_=""};var t=goog.net.streams.Base64StreamDecoder;t.prototype.isInputValid=function(){return this.isInputValid_},t.prototype.error_=function(t,e){throw this.isInputValid_=!1,new Error("The stream is broken @"+this.streamPos_+". Error: "+e+". With input:\n"+t)},t.prototype.decode=function(t){goog.asserts.assertString(t),this.isInputValid_||this.error_(t,"stream already broken"),this.leftoverInput_+=t;var e=Math.floor(this.leftoverInput_.length/4);if(0==e)return null;try{var r=goog.crypt.base64.decodeStringToByteArray(this.leftoverInput_.substr(0,4*e))}catch(t){this.error_(this.leftoverInput_,t.message)}return this.streamPos_+=4*e,this.leftoverInput_=this.leftoverInput_.substr(4*e),r}});