goog.provide("goog.net.BulkLoader"),goog.require("goog.events.Event"),goog.require("goog.events.EventHandler"),goog.require("goog.events.EventTarget"),goog.require("goog.log"),goog.require("goog.net.BulkLoaderHelper"),goog.require("goog.net.EventType"),goog.require("goog.net.XhrIo"),goog.net.BulkLoader=function(e){goog.events.EventTarget.call(this),this.helper_=new goog.net.BulkLoaderHelper(e),this.eventHandler_=new goog.events.EventHandler(this)},goog.inherits(goog.net.BulkLoader,goog.events.EventTarget),goog.net.BulkLoader.prototype.logger_=goog.log.getLogger("goog.net.BulkLoader"),goog.net.BulkLoader.prototype.getResponseTexts=function(){return this.helper_.getResponseTexts()},goog.net.BulkLoader.prototype.getRequestUris=function(){return this.helper_.getUris()},goog.net.BulkLoader.prototype.load=function(){var e=this.eventHandler_,o=this.helper_.getUris();goog.log.info(this.logger_,"Starting load of code with "+o.length+" uris.");for(var t=0;t<o.length;t++){var g=new goog.net.XhrIo;e.listen(g,goog.net.EventType.COMPLETE,goog.bind(this.handleEvent_,this,t)),g.send(o[t])}},goog.net.BulkLoader.prototype.handleEvent_=function(e,o){goog.log.info(this.logger_,'Received event "'+o.type+'" for id '+e+" with uri "+this.helper_.getUri(e));var t=o.target;t.isSuccess()?this.handleSuccess_(e,t):this.handleError_(e,t)},goog.net.BulkLoader.prototype.handleSuccess_=function(e,o){this.helper_.setResponseText(e,o.getResponseText()),this.helper_.isLoadComplete()&&this.finishLoad_(),o.dispose()},goog.net.BulkLoader.prototype.handleError_=function(e,o){this.dispatchEvent(new goog.net.BulkLoader.LoadErrorEvent(o.getStatus())),o.dispose()},goog.net.BulkLoader.prototype.finishLoad_=function(){goog.log.info(this.logger_,"All uris loaded."),this.dispatchEvent(goog.net.EventType.SUCCESS)},goog.net.BulkLoader.prototype.disposeInternal=function(){goog.net.BulkLoader.superClass_.disposeInternal.call(this),this.eventHandler_.dispose(),this.eventHandler_=null,this.helper_.dispose(),this.helper_=null},goog.net.BulkLoader.LoadErrorEvent=function(e){goog.net.BulkLoader.LoadErrorEvent.base(this,"constructor",goog.net.EventType.ERROR),this.status=e},goog.inherits(goog.net.BulkLoader.LoadErrorEvent,goog.events.Event);