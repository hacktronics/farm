goog.provide("goog.fs.FileReader"),goog.provide("goog.fs.FileReader.EventType"),goog.provide("goog.fs.FileReader.ReadyState"),goog.require("goog.async.Deferred"),goog.require("goog.events.EventTarget"),goog.require("goog.fs.Error"),goog.require("goog.fs.ProgressEvent"),goog.fs.FileReader=function(){goog.fs.FileReader.base(this,"constructor"),this.reader_=new FileReader,this.reader_.onloadstart=goog.bind(this.dispatchProgressEvent_,this),this.reader_.onprogress=goog.bind(this.dispatchProgressEvent_,this),this.reader_.onload=goog.bind(this.dispatchProgressEvent_,this),this.reader_.onabort=goog.bind(this.dispatchProgressEvent_,this),this.reader_.onerror=goog.bind(this.dispatchProgressEvent_,this),this.reader_.onloadend=goog.bind(this.dispatchProgressEvent_,this)},goog.inherits(goog.fs.FileReader,goog.events.EventTarget),goog.fs.FileReader.ReadyState={INIT:0,LOADING:1,DONE:2},goog.fs.FileReader.EventType={LOAD_START:"loadstart",PROGRESS:"progress",LOAD:"load",ABORT:"abort",ERROR:"error",LOAD_END:"loadend"},goog.fs.FileReader.prototype.abort=function(){try{this.reader_.abort()}catch(e){throw new goog.fs.Error(e,"aborting read")}},goog.fs.FileReader.prototype.getReadyState=function(){return this.reader_.readyState},goog.fs.FileReader.prototype.getResult=function(){return this.reader_.result},goog.fs.FileReader.prototype.getError=function(){return this.reader_.error&&new goog.fs.Error(this.reader_.error,"reading file")},goog.fs.FileReader.prototype.dispatchProgressEvent_=function(e){this.dispatchEvent(new goog.fs.ProgressEvent(e,this))},goog.fs.FileReader.prototype.disposeInternal=function(){goog.fs.FileReader.base(this,"disposeInternal"),delete this.reader_},goog.fs.FileReader.prototype.readAsBinaryString=function(e){this.reader_.readAsBinaryString(e)},goog.fs.FileReader.readAsBinaryString=function(e){var r=new goog.fs.FileReader,o=goog.fs.FileReader.createDeferred_(r);return r.readAsBinaryString(e),o},goog.fs.FileReader.prototype.readAsArrayBuffer=function(e){this.reader_.readAsArrayBuffer(e)},goog.fs.FileReader.readAsArrayBuffer=function(e){var r=new goog.fs.FileReader,o=goog.fs.FileReader.createDeferred_(r);return r.readAsArrayBuffer(e),o},goog.fs.FileReader.prototype.readAsText=function(e,r){this.reader_.readAsText(e,r)},goog.fs.FileReader.readAsText=function(e,r){var o=new goog.fs.FileReader,t=goog.fs.FileReader.createDeferred_(o);return o.readAsText(e,r),t},goog.fs.FileReader.prototype.readAsDataUrl=function(e){this.reader_.readAsDataURL(e)},goog.fs.FileReader.readAsDataUrl=function(e){var r=new goog.fs.FileReader,o=goog.fs.FileReader.createDeferred_(r);return r.readAsDataUrl(e),o},goog.fs.FileReader.createDeferred_=function(e){var r=new goog.async.Deferred;return e.listen(goog.fs.FileReader.EventType.LOAD_END,goog.partial(function(e,r,o){var t=r.getResult(),a=r.getError();null==t||a?e.errback(a):e.callback(t),r.dispose()},r,e)),r};