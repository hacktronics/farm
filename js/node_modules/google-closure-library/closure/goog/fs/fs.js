goog.provide("goog.fs"),goog.require("goog.array"),goog.require("goog.async.Deferred"),goog.require("goog.fs.Error"),goog.require("goog.fs.FileReader"),goog.require("goog.fs.FileSystemImpl"),goog.require("goog.fs.url"),goog.require("goog.userAgent"),goog.fs.get_=function(o,e){var g=goog.global.requestFileSystem||goog.global.webkitRequestFileSystem;if(!goog.isFunction(g))return goog.async.Deferred.fail(new Error("File API unsupported"));var r=new goog.async.Deferred;return g(o,e,function(o){r.callback(new goog.fs.FileSystemImpl(o))},function(o){r.errback(new goog.fs.Error(o,"requesting filesystem"))}),r},goog.fs.FileSystemType_={TEMPORARY:0,PERSISTENT:1},goog.fs.getTemporary=function(o){return goog.fs.get_(goog.fs.FileSystemType_.TEMPORARY,o)},goog.fs.getPersistent=function(o){return goog.fs.get_(goog.fs.FileSystemType_.PERSISTENT,o)},goog.fs.createObjectUrl=function(o){return goog.fs.url.createObjectUrl(o)},goog.fs.revokeObjectUrl=function(o){goog.fs.url.revokeObjectUrl(o)},goog.fs.browserSupportsObjectUrls=function(){return goog.fs.url.browserSupportsObjectUrls()},goog.fs.getBlob=function(o){var e=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==e){for(var g=new e,r=0;r<arguments.length;r++)g.append(arguments[r]);return g.getBlob()}return goog.fs.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.getBlobWithProperties=function(o,e,g){var r=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==r){for(var t=new r,i=0;i<o.length;i++)t.append(o[i],g);return t.getBlob(e)}if(void 0!==goog.global.Blob){var s={};return e&&(s.type=e),g&&(s.endings=g),new Blob(o,s)}throw new Error("This browser doesn't seem to support creating Blobs")},goog.fs.blobToString=function(o,e){return goog.fs.FileReader.readAsText(o,e)},goog.fs.sliceBlob=function(o,e,g){return void 0===g&&(g=o.size),o.webkitSlice?o.webkitSlice(e,g):o.mozSlice?o.mozSlice(e,g):o.slice?goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("13.0")||goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("537.1")?(e<0&&(e+=o.size),e<0&&(e=0),g<0&&(g+=o.size),g<e&&(g=e),o.slice(e,g-e)):o.slice(e,g):null};