goog.provide("goog.messaging.AbstractChannel"),goog.require("goog.Disposable"),goog.require("goog.json"),goog.require("goog.log"),goog.require("goog.messaging.MessageChannel"),goog.messaging.AbstractChannel=function(){goog.messaging.AbstractChannel.base(this,"constructor"),this.services_={}},goog.inherits(goog.messaging.AbstractChannel,goog.Disposable),goog.messaging.AbstractChannel.prototype.defaultService_,goog.messaging.AbstractChannel.prototype.logger=goog.log.getLogger("goog.messaging.AbstractChannel"),goog.messaging.AbstractChannel.prototype.connect=function(e){e&&e()},goog.messaging.AbstractChannel.prototype.isConnected=function(){return!0},goog.messaging.AbstractChannel.prototype.registerService=function(e,o,g){this.services_[e]={callback:o,objectPayload:!!g}},goog.messaging.AbstractChannel.prototype.registerDefaultService=function(e){this.defaultService_=e},goog.messaging.AbstractChannel.prototype.send=goog.abstractMethod,goog.messaging.AbstractChannel.prototype.deliver=function(e,o){var g=this.getService(e,o);if(g){var t=this.decodePayload(e,o,g.objectPayload);null!=t&&g.callback(t)}},goog.messaging.AbstractChannel.prototype.getService=function(e,o){var g=this.services_[e];return g||(this.defaultService_?{callback:goog.partial(this.defaultService_,e),objectPayload:goog.isObject(o)}:(goog.log.warning(this.logger,'Unknown service name "'+e+'"'),null))},goog.messaging.AbstractChannel.prototype.decodePayload=function(e,o,g){if(g&&"string"==typeof o)try{return JSON.parse(o)}catch(g){return goog.log.warning(this.logger,"Expected JSON payload for "+e+', was "'+o+'"'),null}else if(!g&&"string"!=typeof o)return goog.json.serialize(o);return o},goog.messaging.AbstractChannel.prototype.disposeInternal=function(){goog.messaging.AbstractChannel.base(this,"disposeInternal"),delete this.services_,delete this.defaultService_};