goog.provide("goog.messaging.LoggerClient"),goog.forwardDeclare("goog.messaging.MessageChannel"),goog.require("goog.Disposable"),goog.require("goog.debug"),goog.require("goog.debug.LogManager"),goog.require("goog.debug.Logger"),goog.messaging.LoggerClient=function(g,e){if(goog.messaging.LoggerClient.instance_)return goog.messaging.LoggerClient.instance_;goog.messaging.LoggerClient.base(this,"constructor"),this.channel_=g,this.serviceName_=e,this.publishHandler_=goog.bind(this.sendLog_,this),goog.debug.LogManager.getRoot().addHandler(this.publishHandler_),goog.messaging.LoggerClient.instance_=this},goog.inherits(goog.messaging.LoggerClient,goog.Disposable),goog.messaging.LoggerClient.instance_=null,goog.messaging.LoggerClient.prototype.sendLog_=function(g){var e,o=g.getLoggerName(),s=g.getLevel(),n=g.getMessage(),i=g.getException();if(i){var a=goog.debug.normalizeErrorObject(i);if(e={name:a.name,message:a.message,lineNumber:a.lineNumber,fileName:a.fileName,stack:i.stack||goog.debug.getStacktrace(goog.debug.Logger.prototype.log)},goog.isObject(i))for(var t=0;"message"+t in i;t++)e["message"+t]=String(i["message"+t])}this.channel_.send(this.serviceName_,{name:o,level:s.value,message:n,exception:e})},goog.messaging.LoggerClient.prototype.disposeInternal=function(){goog.messaging.LoggerClient.base(this,"disposeInternal"),goog.debug.LogManager.getRoot().removeHandler(this.publishHandler_),delete this.channel_,goog.messaging.LoggerClient.instance_=null};