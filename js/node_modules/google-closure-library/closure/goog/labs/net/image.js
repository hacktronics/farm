goog.provide("goog.labs.net.image"),goog.require("goog.Promise"),goog.require("goog.dom.safe"),goog.require("goog.events.EventHandler"),goog.require("goog.events.EventType"),goog.require("goog.html.SafeUrl"),goog.require("goog.net.EventType"),goog.require("goog.userAgent"),goog.labs.net.image.load=function(e,o){return new goog.Promise(function(g,n){var t;t=void 0===o?new Image:goog.isFunction(o)?o():o;var r=goog.userAgent.IE&&goog.userAgent.VERSION<11?goog.net.EventType.READY_STATE_CHANGE:goog.events.EventType.LOAD,E=new goog.events.EventHandler;E.listen(t,[r,goog.net.EventType.ABORT,goog.net.EventType.ERROR],function(e){e.type==goog.net.EventType.READY_STATE_CHANGE&&t.readyState!=goog.net.EventType.COMPLETE||(goog.dispose(E),e.type==r?g(t):n(null))}),goog.dom.safe.setImageSrc(t,e)})};