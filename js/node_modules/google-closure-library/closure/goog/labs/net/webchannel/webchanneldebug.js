goog.provide("goog.labs.net.webChannel.WebChannelDebug"),goog.forwardDeclare("goog.Uri"),goog.forwardDeclare("goog.net.XmlHttp.ReadyState"),goog.require("goog.json"),goog.require("goog.log"),goog.labs.net.webChannel.WebChannelDebug=function(){this.logger_=goog.log.getLogger("goog.labs.net.webChannel.WebChannelDebug"),this.redactEnabled_=!0},goog.scope(function(){var o=goog.labs.net.webChannel.WebChannelDebug;o.prototype.disableRedact=function(){this.redactEnabled_=!1},o.prototype.browserOfflineResponse=function(o){this.info(function(){return"BROWSER_OFFLINE: "+o})},o.prototype.xmlHttpChannelRequest=function(o,e,t,n,r){var g=this;this.info(function(){return"XMLHTTP REQ ("+t+") [attempt "+n+"]: "+o+"\n"+e+"\n"+g.maybeRedactPostData_(r)})},o.prototype.xmlHttpChannelResponseMetaData=function(o,e,t,n,r,g){this.info(function(){return"XMLHTTP RESP ("+t+") [ attempt "+n+"]: "+o+"\n"+e+"\n"+r+" "+g})},o.prototype.xmlHttpChannelResponseText=function(o,e,t){var n=this;this.info(function(){return"XMLHTTP TEXT ("+o+"): "+n.redactResponse_(e)+(t?" "+t:"")})},o.prototype.timeoutResponse=function(o){this.info(function(){return"TIMEOUT: "+o})},o.prototype.debug=function(o){goog.log.fine(this.logger_,o)},o.prototype.dumpException=function(o,e){goog.log.error(this.logger_,e||"Exception",o)},o.prototype.info=function(o){goog.log.info(this.logger_,o)},o.prototype.warning=function(o){goog.log.warning(this.logger_,o)},o.prototype.severe=function(o){goog.log.error(this.logger_,o)},o.prototype.redactResponse_=function(o){if(!this.redactEnabled_)return o;if(!o)return null;try{var e=JSON.parse(o);if(e)for(var t=0;t<e.length;t++)goog.isArray(e[t])&&this.maybeRedactArray_(e[t]);return goog.json.serialize(e)}catch(e){return this.debug("Exception parsing expected JS array - probably was not JS"),o}},o.prototype.maybeRedactArray_=function(o){if(!(o.length<2)){var e=o[1];if(goog.isArray(e)&&!(e.length<1)){var t=e[0];if("noop"!=t&&"stop"!=t&&"close"!=t)for(var n=1;n<e.length;n++)e[n]=""}}},o.prototype.maybeRedactPostData_=function(o){if(!this.redactEnabled_)return o;if(!o)return null;for(var e="",t=o.split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r.length>1){var g=r[0],i=r[1],a=g.split("_");a.length>=2&&"type"==a[1]?e+=g+"="+i+"&":e+=g+"=redacted&"}}return e}});