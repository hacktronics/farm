goog.provide("goog.labs.net.webChannel.netUtils"),goog.require("goog.Uri"),goog.require("goog.labs.net.webChannel.WebChannelDebug"),goog.scope(function(){var o=goog.labs.net.webChannel.netUtils,e=goog.labs.net.webChannel.WebChannelDebug;o.NETWORK_TIMEOUT=1e4,o.testNetwork=function(e,a){var t=a;t||(t=new goog.Uri("//www.google.com/images/cleardot.gif"),goog.global.location&&"http"==goog.global.location.protocol||t.setScheme("https"),t.makeUnique()),o.testLoadImage(t.toString(),o.NETWORK_TIMEOUT,e)},o.testLoadImageWithRetries=function(e,a,t,g,l,n){if(l.debug("TestLoadImageWithRetries: "+n),0!=g){var i=n||0;g--,o.testLoadImage(e,a,function(n){n?t(!0):goog.global.setTimeout(function(){o.testLoadImageWithRetries(e,a,t,g,l,i)},i)})}else t(!1)},o.testLoadImage=function(a,t,g){var l=new e;if(l.debug("TestLoadImage: loading "+a),goog.global.Image){var n=new Image;n.onload=goog.partial(o.imageCallback_,l,n,"TestLoadImage: loaded",!0,g),n.onerror=goog.partial(o.imageCallback_,l,n,"TestLoadImage: error",!1,g),n.onabort=goog.partial(o.imageCallback_,l,n,"TestLoadImage: abort",!1,g),n.ontimeout=goog.partial(o.imageCallback_,l,n,"TestLoadImage: timeout",!1,g),goog.global.setTimeout(function(){n.ontimeout&&n.ontimeout()},t),n.src=a}else g(!1)},o.imageCallback_=function(e,a,t,g,l){try{e.debug(t),o.clearImageCallbacks_(a),l(g)}catch(o){e.dumpException(o)}},o.clearImageCallbacks_=function(o){o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null}});