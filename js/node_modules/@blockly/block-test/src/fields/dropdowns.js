/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";import*as Blockly from"blockly/core";Blockly.defineBlocksWithJsonArray([{type:"test_dropdowns_long",message0:"long: %1",args0:[{type:"field_dropdown",name:"FIELDNAME",options:[["first item","ITEM1"],["second item","ITEM2"],["third item","ITEM3"],["fourth item","ITEM4"],["fifth item","ITEM5"],["sixth item","ITEM6"],["seventh item","ITEM7"],["eighth item","ITEM8"],["ninth item","ITEM9"],["tenth item","ITEM10"],["eleventh item","ITEM11"],["twelfth item","ITEM12"],["thirteenth item","ITEM13"],["fourteenth item","ITEM14"],["fifteenth item","ITEM15"],["sixteenth item","ITEM16"],["seventeenth item","ITEM17"],["eighteenth item","ITEM18"],["nineteenth item","ITEM19"],["twentieth item","ITEM20"],["twenty-first item","ITEM21"],["twenty-second item","ITEM22"],["twenty-third item","ITEM23"],["twenty-fourth item","ITEM24"],["twenty-fifth item","ITEM25"],["twenty-sixth item","ITEM26"],["twenty-seventh item","ITEM27"],["twenty-eighth item","ITEM28"],["twenty-ninth item","ITEM29"],["thirtieth item","ITEM30"],["thirty-first item","ITEM31"],["thirty-second item","ITEM32"]]}]},{type:"test_dropdowns_images",message0:"%1",args0:[{NOTE:"The following paths are relative to playground.html",type:"field_dropdown",name:"FIELDNAME",options:[[{src:"https://blockly-demo.appspot.com/static/tests/media/a.png",width:32,height:32,alt:"A"},"A"],[{src:"https://blockly-demo.appspot.com/static/tests/media/b.png",width:32,height:32,alt:"B"},"B"],[{src:"https://blockly-demo.appspot.com/static/tests/media/c.png",width:32,height:32,alt:"C"},"C"],[{src:"https://blockly-demo.appspot.com/static/tests/media/d.png",width:32,height:32,alt:"D"},"D"],[{src:"https://blockly-demo.appspot.com/static/tests/media/e.png",width:32,height:32,alt:"E"},"E"],[{src:"https://blockly-demo.appspot.com/static/tests/media/f.png",width:32,height:32,alt:"F"},"F"],[{src:"https://blockly-demo.appspot.com/static/tests/media/g.png",width:32,height:32,alt:"G"},"G"],[{src:"https://blockly-demo.appspot.com/static/tests/media/h.png",width:32,height:32,alt:"H"},"H"],[{src:"https://blockly-demo.appspot.com/static/tests/media/i.png",width:32,height:32,alt:"I"},"I"],[{src:"https://blockly-demo.appspot.com/static/tests/media/j.png",width:32,height:32,alt:"J"},"J"],[{src:"https://blockly-demo.appspot.com/static/tests/media/k.png",width:32,height:32,alt:"K"},"K"],[{src:"https://blockly-demo.appspot.com/static/tests/media/l.png",width:32,height:32,alt:"L"},"L"],[{src:"https://blockly-demo.appspot.com/static/tests/media/m.png",width:32,height:32,alt:"M"},"M"]]}]},{type:"test_dropdowns_images_and_text",message0:"%1",args0:[{type:"field_dropdown",name:"FIELDNAME",options:[["images and text","IMAGES AND TEXT"],[{src:"https://blockly-demo.appspot.com/static/tests/media/a.png",width:32,height:32,alt:"A"},"A"],[{src:"https://blockly-demo.appspot.com/static/tests/media/b.png",width:32,height:32,alt:"B"},"B"],[{src:"https://blockly-demo.appspot.com/static/tests/media/c.png",width:32,height:32,alt:"C"},"C"],[{src:"https://blockly-demo.appspot.com/static/tests/media/d.png",width:32,height:32,alt:"D"},"D"],[{src:"https://blockly-demo.appspot.com/static/tests/media/e.png",width:32,height:32,alt:"E"},"E"],[{src:"https://blockly-demo.appspot.com/static/tests/media/f.png",width:32,height:32,alt:"F"},"F"],[{src:"https://blockly-demo.appspot.com/static/tests/media/g.png",width:32,height:32,alt:"G"},"G"],[{src:"https://blockly-demo.appspot.com/static/tests/media/h.png",width:32,height:32,alt:"H"},"H"],["xyz","LMNOP"],[{src:"https://blockly-demo.appspot.com/static/tests/media/i.png",width:32,height:32,alt:"I"},"I"],[{src:"https://blockly-demo.appspot.com/static/tests/media/j.png",width:32,height:32,alt:"J"},"J"],[{src:"https://blockly-demo.appspot.com/static/tests/media/k.png",width:32,height:32,alt:"K"},"K"],[{src:"https://blockly-demo.appspot.com/static/tests/media/l.png",width:32,height:32,alt:"L"},"L"],[{src:"https://blockly-demo.appspot.com/static/tests/media/m.png",width:32,height:32,alt:"M"},"M"]]}]},{type:"test_dropdowns_in_mutator",message0:"dropdown mutator",mutator:"test_dropdown_mutator"},{type:"test_dropdowns_in_mutator_block",message0:"dropdown %1",args0:[{type:"field_dropdown",name:"DROPDOWN",options:[["option","ONE"],["option","TWO"]]}]}]);const dynamicDropdownOptions_=[],addDynamicDropdownOption=function(){Blockly.prompt("Add an option?","option "+dynamicDropdownOptions_.length,function(t){t&&(console.log("Adding option: "+t),dynamicDropdownOptions_.push([t,"OPTION"+dynamicDropdownOptions_.length]))})},removeDynamicDropdownOption=function(){const t=dynamicDropdownOptions_[0]?dynamicDropdownOptions_[0][0]:"";Blockly.prompt("Remove an option?",t,function(t){for(let o,e=0;o=dynamicDropdownOptions_[e];e++)o[0]==t&&(console.log("Removing option: "+t),dynamicDropdownOptions_.splice(e,1))})};Blockly.Blocks.test_dropdowns_dynamic_random={init:function(){const t=new Blockly.FieldDropdown(this.dynamicOptions);this.appendDummyInput().appendField("dynamic random").appendField(t,"OPTIONS")},dynamicOptions:function(){const t=Math.floor(10*Math.random())+1,o=[];for(let e=0;e<t;e++)o.push([String(e),String(e)]);return o}},Blockly.Blocks.test_dropdowns_dynamic_connect_dependant={init:function(){const t=new Blockly.FieldDropdown(this.dynamicOptions);this.appendDummyInput().appendField("dynamic connect-dependant").appendField(t,"OPTIONS"),this.setNextStatement(!0),this.setPreviousStatement(!0)},dynamicOptions:function(){if(this.sourceBlock_&&this.sourceBlock_.getSurroundParent()){const t=this.sourceBlock_.getSurroundParent(),o=[["connected","CONNECTED_KEY"],[`surroundParent: ${t.type}`,`${t.id}_type_key`],[`surroundParent: ${t.id}`,`${t.id}_key`]],e=this.sourceBlock_.getTopStackBlock();return e.id!==t.id&&(o.push([`topStack: ${e.type}`,`${e.id}_type_key`]),o.push([`topStack: ${e.id}`,`${e.id}_key`])),o}return[["unconnected","UNCONNECTED_KEY"]]}};const DROPDOWN_MUTATOR={mutationToDom:function(){return Blockly.utils.xml.createElement("mutation")},domToMutation:function(t){},decompose:function(t){const o=t.newBlock("test_dropdowns_in_mutator_block");return o.initSvg(),o},compose:function(t){}};Blockly.Extensions.registerMutator("test_dropdown_mutator",DROPDOWN_MUTATOR,null,["test_dropdowns_in_mutator_block"]),Blockly.Blocks.test_dropdowns_dynamic={init:function(){const t=new Blockly.FieldDropdown(this.dynamicOptions);this.appendDummyInput().appendField("dynamic").appendField(t,"OPTIONS")},dynamicOptions:function(){return dynamicDropdownOptions_.length?dynamicDropdownOptions_:[["","OPTION0"]]}};export const category={kind:"CATEGORY",name:"Drop-downs",contents:[{kind:"LABEL",text:"Dynamic"},{kind:"BLOCK",type:"test_dropdowns_dynamic"},{kind:"BUTTON",text:"Add option",callbackkey:"addDynamicOption"},{kind:"BUTTON",text:"Remove option",callbackkey:"removeDynamicOption"},{kind:"BLOCK",type:"test_dropdowns_dynamic_random"},{kind:"BLOCK",type:"test_dropdowns_dynamic_connect_dependant"},{kind:"LABEL",text:"Other"},{kind:"BLOCK",type:"test_dropdowns_long"},{kind:"BLOCK",type:"test_dropdowns_images"},{kind:"BLOCK",type:"test_dropdowns_images_and_text"}]};export function onInit(t){t.registerButtonCallback("addDynamicOption",addDynamicDropdownOption),t.registerButtonCallback("removeDynamicOption",removeDynamicDropdownOption)}